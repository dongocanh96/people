<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>The PyMiers</title><link href="http://pp.pymi.vn/" rel="alternate"></link><link href="http://pp.pymi.vn/feeds/all.atom.xml" rel="self"></link><id>http://pp.pymi.vn/</id><updated>2020-03-10T00:00:00+07:00</updated><entry><title>Mypy - là trai hay là gái?</title><link href="http://pp.pymi.vn/article/mypy/" rel="alternate"></link><published>2020-03-10T00:00:00+07:00</published><updated>2020-03-10T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2020-03-10:/article/mypy/</id><summary type="html">&lt;p&gt;Là bạn hay là bè? là str hay int? Thêm type cho Python code mà không ho, không sốt, không toang.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Vài ba năm gần đây, làng Vũ Trụ rộn lên trào lưu thêm "type" vào các ngôn ngữ lập trình dynamic typing.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.php.net/manual/en/functions.arguments.php#functions.arguments.type-declaration"&gt;PHP&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.typescriptlang.org/"&gt;JavaScript|TypeScript&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Python đã già nhưng vẫn đú, cũng không bỏ lỡ cuộc đu trend này.
Kết quả là ngày hôm nay, bạn đã có thể thêm type vào code Python -
nếu muốn - như &lt;a href="https://blogs.dropbox.com/tech/2019/09/our-journey-to-type-checking-4-million-lines-of-python/"&gt;DropBox&lt;/a&gt;, &lt;a href="https://instagram-engineering.com/let-your-code-type-hint-itself-introducing-open-source-monkeytype-a855c7284881"&gt;Instagram&lt;/a&gt;... . Python chính thức thêm &lt;a href="https://www.python.org/dev/peps/pep-0484/"&gt;type hint/type annotation&lt;/a&gt;
vào từ bản 3.5,
chú ý rằng type này không ảnh hưởng/giúp đỡ gì bạn, nếu không sử dụng mypy hay
các IDE.&lt;/p&gt;
&lt;p&gt;Mypy là static type checker - tool giúp phân tích code (static analysis) dựa trên type annotation, dự
án có sự tham gia của tác giả Python - Guido van Rossum, ... và cả &lt;a href="https://github.com/python/mypy/pull/4594"&gt;HVN&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Thêm type để làm gì?&lt;/h2&gt;
&lt;p&gt;Các ngôn ngữ lập trình dynamic typing: Python, JavaScript, PHP, Ruby được
ưa chuộng và luôn chiếm vị trí top các bảng xếp hạng ngôn ngữ lập trình trong
những năm gần đây, hay Clojure, LISP, Erlang, Elixir... dù không lên đỉnh nhưng
vẫn luôn hot.
Dynamic typing giúp code trở nên ngắn gọn và linh hoạt.
Vậy thêm type (kiểu) làm gì? không lẽ để dài hơn và bớt linh hoạt hơn?&lt;/p&gt;
&lt;p&gt;Code dài dòng thêm thì rõ là không ai muốn, bởi nếu muốn đã quay về viết Java
hết rồi, nhưng bớt linh hoạt hơn là một mục đích đáng xem xét.&lt;/p&gt;
&lt;p&gt;Khi mọi thứ linh hoạt, nếu không tuân theo các quy tắc, không có kỷ luật cá nhân
tốt, sẽ dẫn tới rối loạn. Hoặc khi hệ thống trở nên phức tạp hơn,
nhiều tính năng phụ thuộc vào nhau, cũng dẫn tới việc không kiểm soát được.&lt;/p&gt;
&lt;p&gt;Điều này sẽ dễ thấy hơn khi tham gia một dự án có nhiều lập trình viên.
Một team 5 Python dev làm việc đã quen với nhau, code
cùng chuẩn PEP8, cùng không thích OOP, ... hay nói cách khác là một team thực
thụ, sẽ code nhanh như tên lửa, vài giờ một tính năng, bay vèo vèo.&lt;/p&gt;
&lt;p&gt;Một nhóm người khác với 5 lập trình viên, học
lập trình từ các nguồn khác nhau, trình độ khác nhau, thậm chí ngôn ngữ thành
thạo cũng khác nhau, nếu làm cùng một dự án sẽ rất rối loạn.
Có chỗ viết 3 class để gọi 1 function cho đúng chuẩn kế thừa, OOP của Java,
có function viết theo kiểu recursive, có chỗ đặt tên biến một chữ cái,
không viết function, một hàm main dài hàng trăm dòng,
function mỗi nhánh trả về một kiểu khác, viết decorator chỉ để dùng 1 lần và
thể hiện, sửa một function rồi các function khác hỏng theo... và hàng trăm thứ
khác có thể sai hơn nữa. Một team như vậy phát
triển sẽ rất chậm, nhiều bug, khó thêm tính năng,
thậm chí gây mệt mỏi, stress khi phải làm việc với nhau. Giải pháp thì lại
không thể là giải tán, cãi nhau,
Vậy làm gì?&lt;/p&gt;
&lt;p&gt;Type là một phần giải pháp, type giúp đặt ràng buộc rõ ràng đầu vào đầu ra,
đảm bảo một function luôn trả về cùng 1 kiểu dù ở nhánh nào. Function
là kiến trúc cơ bản của 1 chương trình, một hệ thống. Khi function định nghĩa
rõ ràng, các bên tương tác (gọi function) với nhau cũng sẽ rõ ràng. Ai nhỡ
sửa function trả về sai kiểu cũng sẽ được thông báo ngay. Nhân viên mới tuyển,
sinh viên mới ra trường, vào sửa function trả về nhầm kiểu sẽ bị type
bắt lại ngay.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Type là một thứ CÔNG CỤ giúp giảm sự linh hoạt của code, tăng thêm kỷ luật,
đảm bảo code ít bị rối loạn hơn. Nếu code 1 mình, hay bạn chắc chăn mình và
&lt;strong&gt;các đồng nghiệp&lt;/strong&gt; đủ kỷ luật để không viết function trả về các kiểu khác nhau
thì type cũng không cần thiết.&lt;/li&gt;
&lt;li&gt;Type không nên là thứ can thiệp/cản trở nhiều vào mục đích của lập trình viên.
Ta muốn có công cụ trợ giúp, chứ không muốn nó chống lại mình. Type dài dòng
như của Java là một ví dụ điển hình khiến việc viết code cũng trở nên ngại.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Sử dụng mypy&lt;/h2&gt;
&lt;h3&gt;Cài đặt&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;pip install mypy
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;Ví dụ 1 - đơn giản để bắt đầu&lt;/h4&gt;
&lt;p&gt;Ví dụ 1: đoạn code không có type:&lt;/p&gt;
&lt;p&gt;File &lt;code&gt;mypy_simple.py&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;sum_of_three&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_of_three&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
    &lt;span class="n"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;The answer of life: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chạy mypy:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mypy mypy_simple.py
Success: no issues found in &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="nb"&gt;source&lt;/span&gt; file
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Không có gì xảy ra, do không function/name nào có type annotation cả.
Mặc định này giúp việc thêm type là tùy ý. Team có thể có người viết type,
có người không ở các function khác nhau, đều OK. Nếu cực nghiêm khắc,
có thể bật chế độ strict lên:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mypy --strict mypy_simple.py
mypy_simple.py:1: error: Function is missing a &lt;span class="nb"&gt;type&lt;/span&gt; annotation
mypy_simple.py:5: error: Function is missing a &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;type&lt;/span&gt; annotation
mypy_simple.py:5: note: Use &lt;span class="s2"&gt;&amp;quot;-&amp;gt; None&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="k"&gt;function&lt;/span&gt; does not &lt;span class="k"&gt;return&lt;/span&gt; a value
mypy_simple.py:6: error: Call to untyped &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;sum_of_three&amp;quot;&lt;/span&gt; in typed context
mypy_simple.py:10: error: Call to untyped &lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;main&amp;quot;&lt;/span&gt; in typed context
Found &lt;span class="m"&gt;4&lt;/span&gt; errors in &lt;span class="m"&gt;1&lt;/span&gt; file &lt;span class="o"&gt;(&lt;/span&gt;checked &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="nb"&gt;source&lt;/span&gt; file&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ở chế độ này, mọi thứ thiếu type annotation đều bị thông báo, đây chỉ là ví dụ
cực đoan, phải tốn khá nhiều công sức và làm quen mới có thể bật chế độ này lên,
vậy nên khó quá tạm thời bỏ qua.&lt;/p&gt;
&lt;p&gt;Thêm type cho đoạn code trong ví dụ 1:
với Python type annotation, ta thường chỉ thêm cho định nghĩa của các function,
ít khi phải khai báo cho các variable. Ví dụ trên có 2 function, sau khi thêm
type vào &lt;code&gt;sum_of_three&lt;/code&gt; sẽ trông như sau:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;sum_of_three&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_of_three&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
    &lt;span class="n"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;The answer of life: {}&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;3 argument đều có kiểu là &lt;code&gt;: int&lt;/code&gt;, &lt;code&gt;-&amp;gt; int&lt;/code&gt; nói rằng function này
trả về kiểu &lt;code&gt;int&lt;/code&gt;.
Chạy lại lệnh mypy&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mypy mypy_simple.py
Success: no issues found in &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="nb"&gt;source&lt;/span&gt; file
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Vẫn trông như không có gì xảy ra, nhưng thật ra là có, do code của ta không
có vấn đề gì nên mypy cũng không báo gì. Thử đổi trong function &lt;code&gt;main&lt;/code&gt;,
cộng kết quả của &lt;code&gt;sum_of_three&lt;/code&gt; (kiểu int) với một &lt;code&gt;str&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_of_three&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
    &lt;span class="n"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;The answer of life: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nếu là lập trình viên JavaScript, bạn sẽ mong đợi một kết quả str bình thường,
&lt;code&gt;"The answer of life: 42"&lt;/code&gt;, bởi JavaScript thuộc loại weak typing,
còn Python là strong typing: int là int, str là str, không cộng trừ lẫn lộn.&lt;/p&gt;
&lt;p&gt;Nếu là một PyMier chân chính, bạn sẽ nhận ra ngay đoạn code này gặp exception
khi CHẠY THẬT, do cộng một str với một số int.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python mypy_simple.py
Traceback &lt;span class="o"&gt;(&lt;/span&gt;most recent call last&lt;span class="o"&gt;)&lt;/span&gt;:
  File &lt;span class="s2"&gt;&amp;quot;mypy_simple.py&amp;quot;&lt;/span&gt;, line &lt;span class="m"&gt;12&lt;/span&gt;, in &amp;lt;module&amp;gt;
    main&lt;span class="o"&gt;()&lt;/span&gt;
  File &lt;span class="s2"&gt;&amp;quot;mypy_simple.py&amp;quot;&lt;/span&gt;, line &lt;span class="m"&gt;8&lt;/span&gt;, in main
    &lt;span class="nv"&gt;message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;The answer of life: &amp;quot;&lt;/span&gt; + result
TypeError: must be str, not int
Command exited with non-zero status &lt;span class="m"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Vậy ta chỉ biết, khi chạy thật, mà lúc ấy mới biết thì "toang" rồi.
Có cách nào &lt;strong&gt;biết trước&lt;/strong&gt; khi chạy không? Mypy sẽ giúp làm chuyện ấy:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mypy mypy_simple.py
mypy_simple.py:8: error: Unsupported operand types &lt;span class="k"&gt;for&lt;/span&gt; + &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;str&amp;quot;&lt;/span&gt; and &lt;span class="s2"&gt;&amp;quot;int&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
Found &lt;span class="m"&gt;1&lt;/span&gt; error in &lt;span class="m"&gt;1&lt;/span&gt; file &lt;span class="o"&gt;(&lt;/span&gt;checked &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="nb"&gt;source&lt;/span&gt; file&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chú ý: việc phân tích function main chỉ xảy ra khi nó có type annotation:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Function main không nhận argument, trả về kiểu None. Nếu bỏ &lt;code&gt;-&amp;gt; None&lt;/code&gt; đi,
mypy sẽ không kiểm tra function main.&lt;/p&gt;
&lt;h4&gt;Ví dụ 2 - các containers: list, tuple, dict, set&lt;/h4&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;typing&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Tuple&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;with_index&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;names&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Tuple&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;]]:&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;names&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;

    &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;with_index&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Corona&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Tiger Nau&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;TrucBach&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;result&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chỉ có str, int, float, bool, None là các kiểu dùng ngay.
Với list, tuple, set, dict, cần phải import type tương ứng
từ standard lib &lt;code&gt;typing&lt;/code&gt;, các type viết Hoa chữ cái đầu.
Có thể khai báo qua loa
&lt;code&gt;def with_index(names: List) -&amp;gt; List:&lt;/code&gt;
hoặc chi tiết như trong ví dụ 2.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mypy mypy_simple.py
mypy_simple.py:11: error: Incompatible types in assignment &lt;span class="o"&gt;(&lt;/span&gt;expression has &lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;List[Tuple[int, str]]&amp;quot;&lt;/span&gt;, variable has &lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;int&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Lỗi này thường gặp, do chuyện dùng chung tên &lt;code&gt;result&lt;/code&gt;,
mypy lần đầu gặp sẽ nghĩ &lt;code&gt;result&lt;/code&gt; là kiểu &lt;code&gt;int&lt;/code&gt;, qua dòng tiếp
theo lại suy luận nó được gán giá trị kiểu &lt;code&gt;List[Tuple[int, str]]&lt;/code&gt;. Việc dùng
một biến để chỉ tới nhiều kiểu khác nhau không hiếm trong dynamic typing, nhưng
là chuyện không thể trong các ngôn ngữ static typing. Cách giải quyết chuẩn
nhất là đổi tên biến.&lt;/p&gt;
&lt;h4&gt;Ví dụ 3 - các object phức tạp, thư viện bên ngoài&lt;/h4&gt;
&lt;p&gt;Với các lập trình viên Python, type là một thứ lạ, vậy nên không phải dẽ gì ngồi đọc ngay ra kiểu của &lt;code&gt;resp&lt;/code&gt; sau đây là gì mà gõ vào:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;typing&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Any&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;requests&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;process_response&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Any&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;msg&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;From: &amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;msg&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="p"&gt;()[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;origin&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;https://httpbin.org/ip&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;output&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;process_response&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="c1"&gt;# + 10&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;Any&lt;/code&gt; giúp điền vào chỗ trống khi không biết kiểu gì, đồng nghĩa
với việc mất đi một chút bảo vệ của mypy do mypy sẽ cho phép gọi
function &lt;code&gt;process_response&lt;/code&gt; với argument đầu tiên thuộc bất kỳ kiểu nào.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;msg: str = 'From: '&lt;/code&gt; là argument &lt;code&gt;msg&lt;/code&gt;, kiểu &lt;code&gt;str&lt;/code&gt;, với giá trị
default &lt;code&gt;From:&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python mypy_simple.py
From: &lt;span class="m"&gt;111&lt;/span&gt;.212.107.29
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Có một cách khác để nhờ mypy tìm giúp kiểu của &lt;code&gt;resp&lt;/code&gt;, đó là khai báo sai kiểu,
thay &lt;code&gt;Any&lt;/code&gt; thành &lt;code&gt;int&lt;/code&gt;, chạy mypy sẽ thấy:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mypy mypy_simple.py
mypy_simple.py:5: error: &lt;span class="s2"&gt;&amp;quot;int&amp;quot;&lt;/span&gt; has no attribute &lt;span class="s2"&gt;&amp;quot;json&amp;quot;&lt;/span&gt;
mypy_simple.py:8: error: Argument &lt;span class="m"&gt;1&lt;/span&gt; to &lt;span class="s2"&gt;&amp;quot;process_response&amp;quot;&lt;/span&gt; has incompatible &lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Response&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; expected &lt;span class="s2"&gt;&amp;quot;int&amp;quot;&lt;/span&gt;
Found &lt;span class="m"&gt;2&lt;/span&gt; errors in &lt;span class="m"&gt;1&lt;/span&gt; file &lt;span class="o"&gt;(&lt;/span&gt;checked &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="nb"&gt;source&lt;/span&gt; file&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Vậy kiểu của &lt;code&gt;resp&lt;/code&gt; cần khai báo là Response, đầy đủ là &lt;code&gt;requests.models.Response&lt;/code&gt;
có thể tìm ra bằng cách &lt;code&gt;print(type(r))&lt;/code&gt;&lt;/p&gt;
&lt;h4&gt;Ví dụ 4 - function nhận vào nhiều kiểu&lt;/h4&gt;
&lt;p&gt;Cũng có lúc, ta muốn chủ ý nhận vào nhiều loại input khác kiểu,
nhưng chỉ giới hạn trong 1 nhóm, ví dụ như int, str, float, chứ không phải dict
hay list, nếu dùng &lt;code&gt;Any&lt;/code&gt; thì dễ dãi quá:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;any_number&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;This is {}&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;any_number&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;any_number&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;9&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;### mypy check&lt;/span&gt;
&lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Argument&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;any_number&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;has&lt;/span&gt; &lt;span class="n"&gt;incompatible&lt;/span&gt; &lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;str&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;expected&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;int&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Giải pháp là dùng Union.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;typing&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Union&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;any_number&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Union&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Các kiểu type khác: &lt;a href="https://mypy.readthedocs.io/en/stable/kinds_of_types.html"&gt;https://mypy.readthedocs.io/en/stable/kinds_of_types.html&lt;/a&gt; đáng chú ý như Optional khi có thể trả về None, hay Callable là kiểu cho
function.&lt;/p&gt;
&lt;h3&gt;Stub&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;boto3&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mypy mypy_simple.py
mypy_simple.py:1: error: No library stub file for module &amp;#39;boto3&amp;#39;
mypy_simple.py:1: note: (Stub files are from https://github.com/python/typeshed)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Sau khi Python chính thức thêm type notation, không có nghĩa là các core developer sẽ đi sửa hàng loạt các file thư viện đã chạy ổn định vài chục năm để
thêm type. Thay vào đó, họ tạo ra các stub file.
stub file là file chứa type annotation của các function trong library. Nó tương tự header file trong C/C++.&lt;/p&gt;
&lt;p&gt;Ví dụ &lt;a href="https://github.com/python/typeshed/blob/master/stdlib/3/itertools.pyi"&gt;itertools&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Các stub file của Python standard lib được gom lại tại &lt;a href="https://github.com/python/typeshed"&gt;python/typeshed&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Các thư viện bên ngoài thường ít khi có sẵn stub file,
Ví dụ như &lt;code&gt;boto3&lt;/code&gt; - thư viện cực kỳ phổ biến - và chính thức để làm việc với
API của AWS, tới nay vẫn chưa có stub file chính thức từ AWS.
Nên để đơn giản, thay vì phải chiến đấu với type, ta có thể bỏ qua:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;mypy&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;ignore&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;missing&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;hay tự tạo stub như &lt;a href="https://github.com/htlcnn/autocad_objectarx_python_stubs"&gt;htlcnn&lt;/a&gt;.
Xem hướng dẫn tự tạo stub file tại &lt;a href="https://github.com/python/mypy/wiki/Creating-Stubs-For-Python-Modules"&gt;mypy wiki&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Những vấn đề type giúp giải quyết&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Kiểm tra kiểu, đảm bảo function trả về thống nhất một kiểu, nhận được đúng
  kiểu đầu vào.&lt;/li&gt;
&lt;li&gt;Giúp nhìn vào dòng def (thuật ngữ chính xác: function signature) là biết luôn
  cần gọi với argument nào, trả về kiểu gì.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Những vấn đề type KHÔNG giúp giải quyết&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;Thay cho unittest: unittest dùng để kiểm tra logic chứ không phải để kiểm tra kiểu. Do không có ràng buộc về kiểu, nên trong unittest thường kiểm tra cả kiều của đầu ra function, việc này hoàn toàn bị loại bỏ khi dùng mypy.&lt;/li&gt;
&lt;li&gt;Làm việc nhóm không hiệu quả: type chỉ là một phần giải pháp giúp xóa bớt sự
chênh lệch trình độ giữa các lập trình viên. Bạn nên tìm cách đào tạo, chia sẻ
kinh nghiệm, luyện tập cùng các đồng nghiệp thì hơn.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Hành động của chúng ta&lt;/h3&gt;
&lt;p&gt;Thêm ngay dòng sau vào Makefile, hay hệ thống CI của bạn, ngay sau pep8, flake8 hay pylint:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;mypy&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;ignore&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;missing&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Type là một công cụ tốt cho các Pythonista như pylint pep8, giúp phát triển các dự án lớn hơn,
nhiều người tham gia một cách dễ dàng hơn, trong khi việc đầu tư thì không có
gì to tát cả - chỉ việc share bài viết này.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="mypy"></category></entry><entry><title>C thật là đơn giản</title><link href="http://pp.pymi.vn/article/cde/" rel="alternate"></link><published>2020-02-19T00:00:00+07:00</published><updated>2020-02-19T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2020-02-19:/article/cde/</id><summary type="html">&lt;p&gt;C đơn giản hơn Python?&lt;/p&gt;</summary><content type="html">&lt;p&gt;Đơn giản, nhanh, chậm, xinh, cao, thấp, giỏi, xịn... đều là những khái niệm
mang tính chất tương đối. Có cái hơn khi so sánh ở góc độ này, nhưng lại kém
khi so sánh ở góc độ khác. Trong ngành lập trình, mọi thứ đều là sự đánh đổi
(trade off),
không có giải pháp nào thỏa mãn tất cả mọi nhu cầu (silver bullet) - hoặc có
nhưng chưa ai tìm ra.&lt;/p&gt;
&lt;p&gt;Không cần bàn cãi, ai cũng đồng ý code Python dễ đọc, viết hơn C, hay... đơn
giản hơn. Nhưng cái đơn giản đó, là đơn giản với con người, với lập trình viên,
còn với máy tính thì hoàn toàn ngược lại.&lt;/p&gt;
&lt;p&gt;Ta sẽ thử nghiệm chương trình đơn giản nhất trái đất: hello world viết bằng C
và Python rồi so sánh dùng &lt;code&gt;strace&lt;/code&gt; - một công cụ debug "cao cấp" thường
dùng bởi các SysAdmin.&lt;/p&gt;
&lt;h3&gt;strace&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ whatis strace
strace &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;           - trace system calls and signals
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Bài viết thực hiện trên Ubuntu 18.04, &lt;code&gt;cc&lt;/code&gt; - C compiler có lẽ là có sẵn.
Hoặc nếu không có, hãy cài bằng &lt;code&gt;sudo apt-get install -y  build-essential strace&lt;/code&gt;&lt;/p&gt;
&lt;h3&gt;C Programming language&lt;/h3&gt;
&lt;p&gt;4 dòng code C&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;puts&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hello world!&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Compile rồi chạy - yeah, cực đơn giản, không cần gì khác cả, cũng không cần
làm việc đơn giản này trở thành rắc rôi.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cc hello.c -o hello  &lt;span class="c1"&gt;# compile, sinh ra file hello&lt;/span&gt;
$ ./hello  &lt;span class="c1"&gt;# chạy file hello&lt;/span&gt;
Hello world!
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Giờ chạy với &lt;code&gt;strace&lt;/code&gt; để xem chương trình siêu đơn giản này gọi những system call
nào, &lt;code&gt;-C&lt;/code&gt; sẽ hiển thị bảng thống kê, &lt;code&gt;-S calls&lt;/code&gt; sẽ sắp xếp thống kê này
theo cột &lt;code&gt;calls&lt;/code&gt;, giảm dần.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ strace -CScalls ./hello
execve&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;./hello&amp;quot;&lt;/span&gt;, &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;./hello&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;, 0x7fff1e9af718 /* &lt;span class="m"&gt;68&lt;/span&gt; vars */&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
brk&lt;span class="o"&gt;(&lt;/span&gt;NULL&lt;span class="o"&gt;)&lt;/span&gt;                               &lt;span class="o"&gt;=&lt;/span&gt; 0x56174aa4e000
access&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/etc/ld.so.nohwcap&amp;quot;&lt;/span&gt;, F_OK&lt;span class="o"&gt;)&lt;/span&gt;      &lt;span class="o"&gt;=&lt;/span&gt; -1 ENOENT &lt;span class="o"&gt;(&lt;/span&gt;No such file or directory&lt;span class="o"&gt;)&lt;/span&gt;
access&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/etc/ld.so.preload&amp;quot;&lt;/span&gt;, R_OK&lt;span class="o"&gt;)&lt;/span&gt;      &lt;span class="o"&gt;=&lt;/span&gt; -1 ENOENT &lt;span class="o"&gt;(&lt;/span&gt;No such file or directory&lt;span class="o"&gt;)&lt;/span&gt;
openat&lt;span class="o"&gt;(&lt;/span&gt;AT_FDCWD, &lt;span class="s2"&gt;&amp;quot;/etc/ld.so.cache&amp;quot;&lt;/span&gt;, O_RDONLY&lt;span class="p"&gt;|&lt;/span&gt;O_CLOEXEC&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;3&lt;/span&gt;
fstat&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="nv"&gt;st_mode&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;S_IFREG&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="m"&gt;0644&lt;/span&gt;, &lt;span class="nv"&gt;st_size&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;106420&lt;/span&gt;, ...&lt;span class="o"&gt;})&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
mmap&lt;span class="o"&gt;(&lt;/span&gt;NULL, &lt;span class="m"&gt;106420&lt;/span&gt;, PROT_READ, MAP_PRIVATE, &lt;span class="m"&gt;3&lt;/span&gt;, &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 0x7f867f8fc000
close&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;                                &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
access&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/etc/ld.so.nohwcap&amp;quot;&lt;/span&gt;, F_OK&lt;span class="o"&gt;)&lt;/span&gt;      &lt;span class="o"&gt;=&lt;/span&gt; -1 ENOENT &lt;span class="o"&gt;(&lt;/span&gt;No such file or directory&lt;span class="o"&gt;)&lt;/span&gt;
openat&lt;span class="o"&gt;(&lt;/span&gt;AT_FDCWD, &lt;span class="s2"&gt;&amp;quot;/lib/x86_64-linux-gnu/libc.so.6&amp;quot;&lt;/span&gt;, O_RDONLY&lt;span class="p"&gt;|&lt;/span&gt;O_CLOEXEC&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;3&lt;/span&gt;
read&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;\177ELF\2\1\1\3\0\0\0\0\0\0\0\0\3\0&amp;gt;\0\1\0\0\0\260\34\2\0\0\0\0\0&amp;quot;&lt;/span&gt;..., &lt;span class="m"&gt;832&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;832&lt;/span&gt;
fstat&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="nv"&gt;st_mode&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;S_IFREG&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="m"&gt;0755&lt;/span&gt;, &lt;span class="nv"&gt;st_size&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2030544&lt;/span&gt;, ...&lt;span class="o"&gt;})&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
mmap&lt;span class="o"&gt;(&lt;/span&gt;NULL, &lt;span class="m"&gt;8192&lt;/span&gt;, PROT_READ&lt;span class="p"&gt;|&lt;/span&gt;PROT_WRITE, MAP_PRIVATE&lt;span class="p"&gt;|&lt;/span&gt;MAP_ANONYMOUS, -1, &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 0x7f867f8fa000
mmap&lt;span class="o"&gt;(&lt;/span&gt;NULL, &lt;span class="m"&gt;4131552&lt;/span&gt;, PROT_READ&lt;span class="p"&gt;|&lt;/span&gt;PROT_EXEC, MAP_PRIVATE&lt;span class="p"&gt;|&lt;/span&gt;MAP_DENYWRITE, &lt;span class="m"&gt;3&lt;/span&gt;, &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 0x7f867f2fe000
mprotect&lt;span class="o"&gt;(&lt;/span&gt;0x7f867f4e5000, &lt;span class="m"&gt;2097152&lt;/span&gt;, PROT_NONE&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
mmap&lt;span class="o"&gt;(&lt;/span&gt;0x7f867f6e5000, &lt;span class="m"&gt;24576&lt;/span&gt;, PROT_READ&lt;span class="p"&gt;|&lt;/span&gt;PROT_WRITE, MAP_PRIVATE&lt;span class="p"&gt;|&lt;/span&gt;MAP_FIXED&lt;span class="p"&gt;|&lt;/span&gt;MAP_DENYWRITE, &lt;span class="m"&gt;3&lt;/span&gt;, 0x1e7000&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 0x7f867f6e5000
mmap&lt;span class="o"&gt;(&lt;/span&gt;0x7f867f6eb000, &lt;span class="m"&gt;15072&lt;/span&gt;, PROT_READ&lt;span class="p"&gt;|&lt;/span&gt;PROT_WRITE, MAP_PRIVATE&lt;span class="p"&gt;|&lt;/span&gt;MAP_FIXED&lt;span class="p"&gt;|&lt;/span&gt;MAP_ANONYMOUS, -1, &lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 0x7f867f6eb000
close&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;                                &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
arch_prctl&lt;span class="o"&gt;(&lt;/span&gt;ARCH_SET_FS, 0x7f867f8fb4c0&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
mprotect&lt;span class="o"&gt;(&lt;/span&gt;0x7f867f6e5000, &lt;span class="m"&gt;16384&lt;/span&gt;, PROT_READ&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
mprotect&lt;span class="o"&gt;(&lt;/span&gt;0x56174a941000, &lt;span class="m"&gt;4096&lt;/span&gt;, PROT_READ&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
mprotect&lt;span class="o"&gt;(&lt;/span&gt;0x7f867f916000, &lt;span class="m"&gt;4096&lt;/span&gt;, PROT_READ&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
munmap&lt;span class="o"&gt;(&lt;/span&gt;0x7f867f8fc000, &lt;span class="m"&gt;106420&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;          &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
fstat&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="nv"&gt;st_mode&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;S_IFCHR&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="m"&gt;0620&lt;/span&gt;, &lt;span class="nv"&gt;st_rdev&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;makedev&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;136&lt;/span&gt;, &lt;span class="m"&gt;5&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;, ...&lt;span class="o"&gt;})&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
brk&lt;span class="o"&gt;(&lt;/span&gt;NULL&lt;span class="o"&gt;)&lt;/span&gt;                               &lt;span class="o"&gt;=&lt;/span&gt; 0x56174aa4e000
brk&lt;span class="o"&gt;(&lt;/span&gt;0x56174aa6f000&lt;span class="o"&gt;)&lt;/span&gt;                     &lt;span class="o"&gt;=&lt;/span&gt; 0x56174aa6f000
write&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;, &lt;span class="s2"&gt;&amp;quot;Hello world!\n&amp;quot;&lt;/span&gt;, 13Hello world!
     &lt;span class="o"&gt;)&lt;/span&gt;          &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="m"&gt;13&lt;/span&gt;
exit_group&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;                           &lt;span class="o"&gt;=&lt;/span&gt; ?
+++ exited with &lt;span class="m"&gt;0&lt;/span&gt; +++
% &lt;span class="nb"&gt;time&lt;/span&gt;     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;5&lt;/span&gt;           mmap
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;4&lt;/span&gt;           mprotect
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;3&lt;/span&gt;           fstat
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;3&lt;/span&gt;           brk
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;3&lt;/span&gt;         &lt;span class="m"&gt;3&lt;/span&gt; access
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;2&lt;/span&gt;           close
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;2&lt;/span&gt;           openat
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           &lt;span class="nb"&gt;read&lt;/span&gt;
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           write
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           munmap
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           execve
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           arch_prctl
------ ----------- ----------- --------- --------- ----------------
&lt;span class="m"&gt;100&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000                    &lt;span class="m"&gt;27&lt;/span&gt;         &lt;span class="m"&gt;3&lt;/span&gt; total
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Có tổng cộng 27 syscall được thực hiện, 3 fail.&lt;/p&gt;
&lt;h3&gt;Python&lt;/h3&gt;
&lt;p&gt;Một chương trình Python 3.6 in ra màn hình dòng chữ &lt;code&gt;hello world&lt;/code&gt; tương tự:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ strace -cScalls python3 -c &lt;span class="s1"&gt;&amp;#39;print(&amp;quot;Hello world!&amp;quot;)&amp;#39;&lt;/span&gt;
Hello world!
% &lt;span class="nb"&gt;time&lt;/span&gt;     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
  &lt;span class="m"&gt;9&lt;/span&gt;.22    &lt;span class="m"&gt;0&lt;/span&gt;.000277           &lt;span class="m"&gt;2&lt;/span&gt;       &lt;span class="m"&gt;166&lt;/span&gt;        &lt;span class="m"&gt;32&lt;/span&gt; stat
  &lt;span class="m"&gt;7&lt;/span&gt;.96    &lt;span class="m"&gt;0&lt;/span&gt;.000239           &lt;span class="m"&gt;3&lt;/span&gt;        &lt;span class="m"&gt;94&lt;/span&gt;           fstat
  &lt;span class="m"&gt;7&lt;/span&gt;.19    &lt;span class="m"&gt;0&lt;/span&gt;.000216           &lt;span class="m"&gt;3&lt;/span&gt;        &lt;span class="m"&gt;79&lt;/span&gt;           &lt;span class="nb"&gt;read&lt;/span&gt;
  &lt;span class="m"&gt;7&lt;/span&gt;.19    &lt;span class="m"&gt;0&lt;/span&gt;.000216           &lt;span class="m"&gt;3&lt;/span&gt;        &lt;span class="m"&gt;68&lt;/span&gt;           rt_sigaction
  &lt;span class="m"&gt;8&lt;/span&gt;.09    &lt;span class="m"&gt;0&lt;/span&gt;.000243           &lt;span class="m"&gt;4&lt;/span&gt;        &lt;span class="m"&gt;58&lt;/span&gt;           close
 &lt;span class="m"&gt;10&lt;/span&gt;.25    &lt;span class="m"&gt;0&lt;/span&gt;.000308           &lt;span class="m"&gt;5&lt;/span&gt;        &lt;span class="m"&gt;57&lt;/span&gt;         &lt;span class="m"&gt;2&lt;/span&gt; openat
  &lt;span class="m"&gt;1&lt;/span&gt;.63    &lt;span class="m"&gt;0&lt;/span&gt;.000049           &lt;span class="m"&gt;1&lt;/span&gt;        &lt;span class="m"&gt;43&lt;/span&gt;         &lt;span class="m"&gt;6&lt;/span&gt; lseek
 &lt;span class="m"&gt;17&lt;/span&gt;.78    &lt;span class="m"&gt;0&lt;/span&gt;.000534          &lt;span class="m"&gt;16&lt;/span&gt;        &lt;span class="m"&gt;34&lt;/span&gt;           mmap
  &lt;span class="m"&gt;0&lt;/span&gt;.43    &lt;span class="m"&gt;0&lt;/span&gt;.000013           &lt;span class="m"&gt;1&lt;/span&gt;        &lt;span class="m"&gt;18&lt;/span&gt;           getdents
 &lt;span class="m"&gt;12&lt;/span&gt;.62    &lt;span class="m"&gt;0&lt;/span&gt;.000379          &lt;span class="m"&gt;24&lt;/span&gt;        &lt;span class="m"&gt;16&lt;/span&gt;           mprotect
  &lt;span class="m"&gt;2&lt;/span&gt;.43    &lt;span class="m"&gt;0&lt;/span&gt;.000073           &lt;span class="m"&gt;6&lt;/span&gt;        &lt;span class="m"&gt;12&lt;/span&gt;           brk
  &lt;span class="m"&gt;1&lt;/span&gt;.66    &lt;span class="m"&gt;0&lt;/span&gt;.000050           &lt;span class="m"&gt;4&lt;/span&gt;        &lt;span class="m"&gt;12&lt;/span&gt;         &lt;span class="m"&gt;2&lt;/span&gt; ioctl
  &lt;span class="m"&gt;5&lt;/span&gt;.03    &lt;span class="m"&gt;0&lt;/span&gt;.000151          &lt;span class="m"&gt;17&lt;/span&gt;         &lt;span class="m"&gt;9&lt;/span&gt;         &lt;span class="m"&gt;9&lt;/span&gt; access
  &lt;span class="m"&gt;0&lt;/span&gt;.37    &lt;span class="m"&gt;0&lt;/span&gt;.000011           &lt;span class="m"&gt;1&lt;/span&gt;         &lt;span class="m"&gt;8&lt;/span&gt;           lstat
  &lt;span class="m"&gt;2&lt;/span&gt;.46    &lt;span class="m"&gt;0&lt;/span&gt;.000074          &lt;span class="m"&gt;19&lt;/span&gt;         &lt;span class="m"&gt;4&lt;/span&gt;           munmap
  &lt;span class="m"&gt;0&lt;/span&gt;.30    &lt;span class="m"&gt;0&lt;/span&gt;.000009           &lt;span class="m"&gt;3&lt;/span&gt;         &lt;span class="m"&gt;3&lt;/span&gt;           dup
  &lt;span class="m"&gt;0&lt;/span&gt;.27    &lt;span class="m"&gt;0&lt;/span&gt;.000008           &lt;span class="m"&gt;3&lt;/span&gt;         &lt;span class="m"&gt;3&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt; readlink
  &lt;span class="m"&gt;0&lt;/span&gt;.23    &lt;span class="m"&gt;0&lt;/span&gt;.000007           &lt;span class="m"&gt;2&lt;/span&gt;         &lt;span class="m"&gt;3&lt;/span&gt;           sigaltstack
  &lt;span class="m"&gt;0&lt;/span&gt;.63    &lt;span class="m"&gt;0&lt;/span&gt;.000019          &lt;span class="m"&gt;19&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           write
  &lt;span class="m"&gt;0&lt;/span&gt;.53    &lt;span class="m"&gt;0&lt;/span&gt;.000016          &lt;span class="m"&gt;16&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           rt_sigprocmask
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           getpid
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           execve
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           fcntl
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           sysinfo
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           getuid
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           getgid
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           geteuid
  &lt;span class="m"&gt;0&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.000000           &lt;span class="m"&gt;0&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           getegid
  &lt;span class="m"&gt;0&lt;/span&gt;.43    &lt;span class="m"&gt;0&lt;/span&gt;.000013          &lt;span class="m"&gt;13&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           arch_prctl
  &lt;span class="m"&gt;0&lt;/span&gt;.80    &lt;span class="m"&gt;0&lt;/span&gt;.000024          &lt;span class="m"&gt;24&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           futex
  &lt;span class="m"&gt;0&lt;/span&gt;.60    &lt;span class="m"&gt;0&lt;/span&gt;.000018          &lt;span class="m"&gt;18&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           set_tid_address
  &lt;span class="m"&gt;0&lt;/span&gt;.63    &lt;span class="m"&gt;0&lt;/span&gt;.000019          &lt;span class="m"&gt;19&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           set_robust_list
  &lt;span class="m"&gt;0&lt;/span&gt;.53    &lt;span class="m"&gt;0&lt;/span&gt;.000016          &lt;span class="m"&gt;16&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           prlimit64
  &lt;span class="m"&gt;0&lt;/span&gt;.73    &lt;span class="m"&gt;0&lt;/span&gt;.000022          &lt;span class="m"&gt;22&lt;/span&gt;         &lt;span class="m"&gt;1&lt;/span&gt;           getrandom
------ ----------- ----------- --------- --------- ----------------
&lt;span class="m"&gt;100&lt;/span&gt;.00    &lt;span class="m"&gt;0&lt;/span&gt;.003004                   &lt;span class="m"&gt;703&lt;/span&gt;        &lt;span class="m"&gt;52&lt;/span&gt; total
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Do output quá dài nên ở đây thay đổi câu lệnh, để có đầy đủ output hãy chạy
với option C hoa:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ strace -CScalls python -c &lt;span class="s1"&gt;&amp;#39;print(&amp;quot;hello world&amp;quot;)&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chương trình Python đơn giản này thực hiện tới 703 syscall, 52 fail.&lt;/p&gt;
&lt;h3&gt;Kết luận&lt;/h3&gt;
&lt;p&gt;27 với 703 thì cái nào "hơn"?&lt;/p&gt;
&lt;p&gt;27 nhỏ hơn 703, còn 703 thì lớn hơn 27. Lập trình C cũng rất đơn giản, đúng
không!&lt;/p&gt;
&lt;p&gt;Vậy nên khi lập trình, luôn nhớ rằng mọi thứ đều là tương đôi, đều phải đánh
đổi. Mấy em gái đã xinh mà code Python lại giỏi, chỉ có 2 khả năng xảy ra:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;1 là thiếu cái gì đó&lt;/li&gt;
&lt;li&gt;2 là học Python ở &lt;a href="https://pymi.vn"&gt;PYMI&lt;/a&gt; rõ ràng &amp;lt;3.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Đọc thêm&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;System call: https://hvnsweeting.github.io/syscall.html&lt;/li&gt;
&lt;/ul&gt;</content><category term="Trang chủ"></category><category term="C"></category><category term="Python"></category><category term="strace"></category><category term="syscall"></category><category term="UNIX"></category><category term="sysadmin"></category></entry><entry><title>Crawl dữ liệu bằng JavaScript ngay trên trình duyệt</title><link href="http://pp.pymi.vn/article/jsdom/" rel="alternate"></link><published>2020-02-09T00:00:00+07:00</published><updated>2020-02-09T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2020-02-09:/article/jsdom/</id><summary type="html">&lt;p&gt;trở thành hacker ngay trên trình duyệt - hay tại sao không nên tin vào ảnh chụp màn hình.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Năm 2020, bên cạnh cuộc chiến khốc liệt với virus Novel Corona (nCov), vẫn dai dẳng và mãnh liệt cuộc chiến chống tin giả, tin quá sốc, tràn lan trên các mạng xã hội.&lt;/p&gt;
&lt;p&gt;Trong các loại tin giả, có không ít tin được đưa theo hình thức chụp ảnh màn hình điện thoại, chụp trình duyệt trên máy tính để làm bằng chứng. Ảnh màn hình điện thoại dễ dàng làm giả với một lập trình viên mobile, còn với ảnh trình duyệt, ai cũng làm được, không cần tới trình độ PhotoShop đỉnh cao hay kỹ thuật lập trình chuyên nghiệp cỡ như các Pymiers.&lt;/p&gt;
&lt;p&gt;Bài viết sẽ vạch trần kỹ thuật làm giả này, đồng thời lợi dụng nó để crawl dữ liệu ngay trên trang web, dùng chính trình duyệt mà không cần thêm gì khác như BeautifulSoup4 hay &lt;a href="/article/requests-bs4-requests-html/"&gt;requests-html&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Web page là gì&lt;/h2&gt;
&lt;p&gt;Web page là trang web, sử dụng HTML để biểu diễn cấu trúc.&lt;/p&gt;
&lt;h2&gt;HTML là gì&lt;/h2&gt;
&lt;p&gt;HTML là một ngôn ngữ markup (đánh dấu), dùng để mô tả cấu trúc một web page. Nó sử dụng các tag (thẻ) để đánh dấu.
Chuột phải vào màn hình, chọn "View page source" để xem code HTML của web page.&lt;/p&gt;
&lt;p&gt;HTML không phải một ngôn ngữ lập trình (programming language).&lt;/p&gt;
&lt;h3&gt;HTML tag&lt;/h3&gt;
&lt;p&gt;Mỗi bộ phận của web page được đánh dấu sử dụng một cặp thẻ tương ứng, &lt;code&gt;&amp;lt;a ...&amp;gt; &amp;lt;/a&amp;gt;&lt;/code&gt; để đánh dấu một web link, &lt;code&gt;&amp;lt;table&amp;gt; ... &amp;lt;/table&amp;gt;&lt;/code&gt; để đánh dấu một bảng ...
Xem đầy đủ các tag tại &lt;a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Element"&gt;đây&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Document Object Model (DOM)&lt;/h2&gt;
&lt;p&gt;Document Object Model (DOM) biểu diễn HTML ở dạng cây (tree structure).
DOM là programming interface cho HTML (và XML) documents.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/Document_Object_Model"&gt;&lt;img alt="DOM wiki" src="http://pp.pymi.vn/images/220px-DOM-model.svg.png"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Sử dụng cây này có thể dễ dàng truy cập (query) các thành phần của web page, thay đổi chúng (manipulate).&lt;/p&gt;
&lt;p&gt;Mỗi web page là một document.&lt;/p&gt;
&lt;h3&gt;Truy cập &amp;amp; thay đổi DOM trên trình duyệt&lt;/h3&gt;
&lt;p&gt;Mở một web site ra, rồi bật web console lên, hoặc đọc bài &lt;a href="https://www.familug.org/2017/04/hoc-javascript-1.html"&gt;này&lt;/a&gt; nếu chưa biết cách.&lt;/p&gt;
&lt;h3&gt;Document, Window &amp;amp; DOM Elements&lt;/h3&gt;
&lt;p&gt;Mỗi web page là một &lt;code&gt;document&lt;/code&gt;, mỗi "cửa sổ" (thời nay là 1 tab trình duyệt), là một &lt;code&gt;window&lt;/code&gt;, đại diện cho cửa sổ đó. Mỗi document là một tree, với các node gọi là các Element.&lt;/p&gt;
&lt;p&gt;Gõ vào web console &lt;code&gt;document&lt;/code&gt;, đây chính là DOM của web page đang truy cập, thông qua object này, ta có thể làm đủ trò với những gì đang hiện trên trình duyệt.&lt;/p&gt;
&lt;h3&gt;Get element&lt;/h3&gt;
&lt;p&gt;Có vài cách để truy cập element, trong đó kể tới 2 methods:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;document.getElementsByTagName&lt;/code&gt;: lấy các elements theo HTML tag của chúng&lt;/li&gt;
&lt;li&gt;&lt;code&gt;document.querySelectorAll&lt;/code&gt;: lấy các elements theo &lt;a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors"&gt;CSS selectors&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;innerText&lt;/code&gt; là thuộc tính (attribute) của một element, chứa nội dung text của nó. Ví dụ sau sẽ thay đổi tiêu đề của bài viết, đây là cách làm tin giả rồi chụp mành hình, không cần dùng PhotoShop:&lt;/p&gt;
&lt;p&gt;Vào web page: &lt;a href="https://www.familug.org/2020/02/vagrant.html"&gt;https://www.familug.org/2020/02/vagrant.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Trước" src="http://pp.pymi.vn/images/vagrant.png"&gt;&lt;/p&gt;
&lt;p&gt;Sau khi "hack"&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;titleTag&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;getElementsByTagName&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;h3&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;titleTag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;innerText&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nx"&gt;titleTag&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;innerText&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Happy birthday!&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="Hack FAMILUG" src="http://pp.pymi.vn/images/happybirthday.png"&gt;&lt;/p&gt;
&lt;h3&gt;Query element&lt;/h3&gt;
&lt;p&gt;Thay vì dùng HTML tags, có thể dùng CSS class để tìm ra các element, ví dụ sau đây tìm các tin tuyển dụng trên trang &lt;a href="https://news.ycombinator.com/item?id=22225314"&gt;HackerNews&lt;/a&gt; có chứa từ khóa Python và Remote, rồi hiển thị lên màn hình - có thể xem như crawl dữ liệu ngay trên trình duyệt:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nx"&gt;allcomms&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;Array&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;from&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;querySelectorAll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;.comment-tree .comtr&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="nx"&gt;topcoms&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;allcomms&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;querySelector&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;img[width=&amp;quot;0&amp;quot;]&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="nx"&gt;pys&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;topcoms&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sr"&gt;/\bpython\b/i&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;innerText&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="nx"&gt;pyremotes&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nx"&gt;pys&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;i&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="nx"&gt;i&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;innerText&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt; &lt;span class="p"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sr"&gt;/\bremote\b/i&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="nx"&gt;test&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;e&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="nx"&gt;alert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;pyremotes&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Đoạn code trên học theo &lt;a href="https://news.ycombinator.com/item?id=22231675"&gt;một comment trên HackerNews&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Đọc thêm về map/filter tại &lt;a href="https://gist.github.com/hvnsweeting/e26b6367bb0144d4ce3eaa04cfe3b94d"&gt;đây&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="remote python job" src="http://pp.pymi.vn/images/hackernews_py_remote_jobs.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/\bpython\b/i&lt;/code&gt; là Regex Object, dùng để tìm các đoạn text chứa từ khóa Python, chữ &lt;code&gt;\b&lt;/code&gt; để đánh dấu boundary, tức kết quả sẽ không chứa &lt;code&gt;pikapython&lt;/code&gt; mà chỉ chứa &lt;code&gt;pika python&lt;/code&gt;, &lt;code&gt;i&lt;/code&gt; để không phân biệt chữ hoa chữ thường.&lt;/p&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;DOM là khái niệm cơ bản về web page, là nền tảng để lập trình JavaScript ở phía client (trên trình duyệt), dù không phải Front-end developer, cũng nên biết dùng DOM, để automate, để "hack".&lt;/p&gt;
&lt;p&gt;Happy new year 2020!&lt;/p&gt;</content><category term="Trang chủ"></category><category term="JavaScript"></category><category term="JS"></category><category term="crawl"></category><category term="scraping"></category></entry><entry><title>Sử dụng xlwings tương tác với MS Excel</title><link href="http://pp.pymi.vn/article/xlwings-named-range/" rel="alternate"></link><published>2019-12-08T00:00:00+07:00</published><updated>2018-12-08T00:00:00+07:00</updated><author><name>htlcnn</name></author><id>tag:pp.pymi.vn,2019-12-08:/article/xlwings-named-range/</id><summary type="html">&lt;p&gt;Giới thiệu thư viện xlwings dùng để tương tác với MS Excel&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="https://github.com/xlwings/xlwings"&gt;xlwings&lt;/a&gt; là 1 thư viện Python dùng để tương tác giữa Python và MS Excel. Hoạt động được trên Windows và Mac. xlwings có các tính năng:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Scripting&lt;/strong&gt;: Tự động hóa/tương tác với Excel từ môi trường Python, sử dụng cú pháp gần với VBA mà vẫn "Pythonic".&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Macros&lt;/strong&gt;: Viết các script python thay thế cho VBA macros, giúp code dễ đọc hơn. Sau khi viết script python xong, chỉ cần gọi 1 hàm trong VBA là script chạy.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;UDFs&lt;/strong&gt;: Viết hàm người dùng tự định nghĩa bằng ngôn ngữ Python và sử dụng được hàm đó trong excel (Windows only).&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;REST API&lt;/strong&gt;: cung cấp REST API cho Excel workbook.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Cài đặt:&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;pip&lt;/span&gt; &lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="n"&gt;xlwings&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Sử dụng:&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;Một số thao tác cơ bản:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;xlwings&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;xw&lt;/span&gt;

&lt;span class="c1"&gt;# mở workbook mới&lt;/span&gt;
&lt;span class="n"&gt;new_wb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;xw&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Book&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="c1"&gt;# hoặc&lt;/span&gt;
&lt;span class="n"&gt;opening_wb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;xw&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Book&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;name_of_opening_workbook&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c1"&gt;# hoặc&lt;/span&gt;
&lt;span class="n"&gt;open_new_workbook&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;xw&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Book&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;full/relaive_path_to_xls&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# Lấy các sheets có trong file excel &lt;/span&gt;
&lt;span class="n"&gt;xw&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sheets&lt;/span&gt;

&lt;span class="c1"&gt;# Làm việc với dữ liệu trong 1 sheet&lt;/span&gt;
&lt;span class="n"&gt;sht&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;xw&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sheets&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sht&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;A1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;sht&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;A1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;xxx&amp;#39;&lt;/span&gt;

&lt;span class="c1"&gt;# tự động tìm bảng&lt;/span&gt;
&lt;span class="c1"&gt;# https://docs.xlwings.org/en/stable/datastructures.html#range-expanding&lt;/span&gt;
&lt;span class="n"&gt;sht&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;A1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;expand&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="c1"&gt;# ...&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;Ngoài ra, &lt;a href="https://docs.xlwings.org/en/stable/datastructures.html#pandas-dataframes"&gt;xlwings còn tích hợp pandas&lt;/a&gt;.&lt;/strong&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Xử lý trường hợp cụ thể:
Trong video &lt;a href="https://www.youtube.com/watch?v=wm7RNejVh8E"&gt;này&lt;/a&gt;, xlwings được dùng để tự động tạo các named range cho hàng loạt file có cấu trúc tương tự. Mục đích là để làm bước tiếp theo: link giá trị từ nhiều file vào 1 file tổng hợp, dựa vào named range trong từng file chi tiết. Tham khảo &lt;a href="https://gist.github.com/htlcnn/0ddd4e0023e0b623bc0e6006a9f9520c"&gt;script&lt;/a&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Trong script này còn sử dụng Excel VBA API: &lt;a href="https://docs.microsoft.com/en-us/office/vba/api/excel.names.add"&gt;WorkBook.Names.Add&lt;/a&gt; (tra cứu toàn bộ ở &lt;a href="https://docs.microsoft.com/en-us/office/vba/api/overview/excel/object-model"&gt;đây&lt;/a&gt;, được cung cấp qua &lt;code&gt;xw_object.api&lt;/code&gt;). Tức là những gì không được cung cấp sẵn cú pháp Pythonic, ta sẽ sử dụng VBA API.&lt;/p&gt;
&lt;p&gt;Hạn chế: range expand chỉ ứng dụng được cho vùng dữ liệu liên tục. Với "bảng" có các dòng/cột trống (để "format" cho đẹp) thì sẽ bị ngắt tại chỗ có dòng/cột trống. Vì vậy, thường sẽ phải chọn 1 range khá lớn/1 magic number để lấy được toàn bộ vùng dữ liệu cần xử lý.&lt;/p&gt;
&lt;p&gt;Mọi việc phải xử lý trong video demo sẽ đơn giản hơn nếu có 1 file excel mẫu ban đầu, được định nghĩa sẵn các named range, sau đó mới duplicate ra để điền dữ liệu vào. Tuy nhiên, thực tế không như thế, ta phải xử lý lỗi một cách nhanh nhất, cũng giống như khi tập chép phạt: &lt;code&gt;"Anh xin lỗi\n" * 100&lt;/code&gt;&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="xlwings"></category><category term="excel"></category><category term="vba"></category></entry><entry><title>Biết Python - quen ngay Julia</title><link href="http://pp.pymi.vn/article/julia_intro/" rel="alternate"></link><published>2019-04-11T00:00:00+07:00</published><updated>2019-04-11T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2019-04-11:/article/julia_intro/</id><summary type="html">&lt;p&gt;Giống Python, mà nhanh gấp 2++, cũng rất gì và này nọ.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Julia là ngôn ngữ lập trình mới, trông rất giống code Python, chạy nhanh hơn Python3 &lt;a href="https://benchmarksgame-team.pages.debian.net/benchmarksgame/faster/julia-python3.html"&gt;ít nhất 2 lần&lt;/a&gt;
và có nhiều tính năng hấp dẫn. Bạn không cần phải từ bỏ Python hay ngôn ngữ XYZ để học Julia, Julia chỉ đơn giản là một bông hoa đẹp mà ai thích... thì múc.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Julia" src="https://docs.julialang.org/en/v1/assets/logo.png"&gt;&lt;/p&gt;
&lt;p&gt;Julia là ngôn ngữ lập trình "làm gì cũng được", nhưng được tập trung vào lĩnh vực tính toán khoa học và muốn
thế chỗ Python (nhưng đường còn dài, và còn nhiều hơn chông gai).&lt;/p&gt;
&lt;h3&gt;Cài đặt&lt;/h3&gt;
&lt;p&gt;Xem https://docs.julialang.org/en/v1/&lt;/p&gt;
&lt;p&gt;Tại thời điểm viết bài (2019 tháng 4), Julia ở bản 1.1.0 - đã ổn định hơn trước rất nhiều, ít bug hơn, chạy nhanh hơn.&lt;/p&gt;
&lt;h3&gt;Từ Python ngó sang&lt;/h3&gt;
&lt;p&gt;Julia trông rất giống Python, cách dùng các học, cách code cũng tương tự, nên nếu biết Python thì 
việc viết được code để làm công việc thường ngày (của 1 DevOps) chỉ trong vòng vài tiếng.&lt;/p&gt;
&lt;h4&gt;REPL&lt;/h4&gt;
&lt;p&gt;Gõ lệnh trực tiếp bằng lệnh &lt;code&gt;julia&lt;/code&gt; trên Linux/MacOS&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt; &lt;span class="n"&gt;julia&lt;/span&gt;
               &lt;span class="n"&gt;_&lt;/span&gt;
   &lt;span class="n"&gt;_&lt;/span&gt;       &lt;span class="n"&gt;_&lt;/span&gt; &lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="n"&gt;Documentation&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="o"&gt;://&lt;/span&gt;&lt;span class="n"&gt;docs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;julialang&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;org&lt;/span&gt;
  &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;     &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;    &lt;span class="o"&gt;|&lt;/span&gt;
   &lt;span class="n"&gt;_&lt;/span&gt; &lt;span class="n"&gt;_&lt;/span&gt;   &lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="n"&gt;_&lt;/span&gt;  &lt;span class="n"&gt;__&lt;/span&gt; &lt;span class="n"&gt;_&lt;/span&gt;   &lt;span class="o"&gt;|&lt;/span&gt;  &lt;span class="kt"&gt;Type&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;?&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;help&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;]?&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;Pkg&lt;/span&gt; &lt;span class="n"&gt;help&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
  &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="o"&gt;|/&lt;/span&gt; &lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="sb"&gt;` |  |&lt;/span&gt;
&lt;span class="sb"&gt;  | | |_| | | | (_| |  |  Version 1.1.0 (2019-01-21)&lt;/span&gt;
&lt;span class="sb"&gt; _/ |\__&amp;#39;_|_|_|\__&amp;#39;_|  |  Official https://julialang.org/ release&lt;/span&gt;
&lt;span class="sb"&gt;|__/                   |&lt;/span&gt;

&lt;span class="sb"&gt;julia&amp;gt; 1 + 1&lt;/span&gt;
&lt;span class="sb"&gt;2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Đây gọi là chế độ "REPL" (Read-Eval-Print-Loop) == (gõ vào - chạy - in ra kết quả - cứ thế mà làm).&lt;/p&gt;
&lt;h4&gt;IPython&lt;/h4&gt;
&lt;p&gt;Không cần cài thêm gì, Julia REPL tự có đủ các tính năng thiết yếu của IPython.&lt;/p&gt;
&lt;p&gt;Đọc document của 1 function? Gõ ?  rồi gõ bất cứ cái gì cần hỏi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="c"&gt;###### gõ ? xong , biến từ julia&amp;gt; thành help?&amp;gt;&lt;/span&gt;
&lt;span class="n"&gt;help&lt;/span&gt;&lt;span class="o"&gt;?&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;sum&lt;/span&gt;
&lt;span class="n"&gt;search&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;sum&lt;/span&gt; &lt;span class="n"&gt;sum!&lt;/span&gt; &lt;span class="n"&gt;summary&lt;/span&gt; &lt;span class="n"&gt;cumsum&lt;/span&gt; &lt;span class="n"&gt;cumsum!&lt;/span&gt; &lt;span class="n"&gt;isnumeric&lt;/span&gt; &lt;span class="kt"&gt;VersionNumber&lt;/span&gt; &lt;span class="n"&gt;issubnormal&lt;/span&gt; &lt;span class="n"&gt;get_zero_subnormals&lt;/span&gt;

&lt;span class="o"&gt;...&lt;/span&gt;
 &lt;span class="n"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;itr&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

  &lt;span class="n"&gt;Returns&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;sum&lt;/span&gt; &lt;span class="n"&gt;of&lt;/span&gt; &lt;span class="n"&gt;all&lt;/span&gt; &lt;span class="n"&gt;elements&lt;/span&gt; &lt;span class="kp"&gt;in&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;collection&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Màu mè (syntax highlight) cũng tự có sẵn rồi.&lt;/p&gt;
&lt;h4&gt;Chạy file code&lt;/h4&gt;
&lt;p&gt;File code Julia có đuôi &lt;code&gt;.jl&lt;/code&gt;, ví dụ &lt;code&gt;hello.jl&lt;/code&gt;.
Chạy file code bằng cách gõ lệnh: &lt;code&gt;julia hello.jl&lt;/code&gt;&lt;/p&gt;
&lt;h4&gt;Cài đặt package&lt;/h4&gt;
&lt;p&gt;Để cài các package trên mạng, sử dụng package manager CÓ SẴN của Julia.
Chuyện về &lt;code&gt;virtualenv&lt;/code&gt; tạm chưa bàn tới ở đây vì khá rõ ràng là không cần thiết (cài package 
&lt;a href="http://pymi.vn/blog/virtualenv/"&gt;không cần gõ sudo gì cả&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;Việc cài đặt package trong Julia thực hiện hơi khác so với Python Pip hay NodeJS NPM một chút.
Sẽ không có câu lệnh nào để gõ cả, không có chương trình thêm nào hết.
Julia thực hiện cài đặt package khi một đoạn code Julia được chạy (gọi function thực hiện cài đặt).&lt;/p&gt;
&lt;p&gt;Ví dụ một file tên (tuỳ ý) như sau:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;# gicungduoc.jl&lt;/span&gt;
&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="n"&gt;Pkg&lt;/span&gt;
&lt;span class="n"&gt;Pkg&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;HTTP&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Pkg&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;JSON&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Pkg&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;DocOpt&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chạy code này: &lt;code&gt;julia gicungduoc.jl&lt;/code&gt; sẽ cài đặt các package, sau đó cứ thế mà dùng các thư viện này.&lt;/p&gt;
&lt;h3&gt;The good, the OK, the ugly&lt;/h3&gt;
&lt;h4&gt;The good - phần tốt&lt;/h4&gt;
&lt;h5&gt;Pipe operator&lt;/h5&gt;
&lt;p&gt;Tốt hay xấu là tuỳ do từng người tự phán xét.
Hãy xem đoạn code sau:&lt;/p&gt;
&lt;p&gt;Python: &lt;code&gt;''.join("  Py thon    ".strip().split())&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Julia: &lt;code&gt;"  Py thon    " |&amp;gt; strip |&amp;gt; split |&amp;gt; xs -&amp;gt; join(xs, "")&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Python&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;double&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;incr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;

&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;incr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;double&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;incr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;double&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="n"&gt;incr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;|&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;incr&lt;/span&gt; &lt;span class="o"&gt;|&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;double&lt;/span&gt; &lt;span class="o"&gt;|&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;incr&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c"&gt;# 7&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;|&amp;gt;&lt;/code&gt; gọi là &lt;code&gt;Piping operator&lt;/code&gt;, lấy đầu ra của function này làm đầu vào cho function khác.
Giúp việc goi funciton liên tục (và đọc nó) dễ dàng hơn.
Giống UNIX command.&lt;/p&gt;
&lt;h5&gt;Nhanh&lt;/h5&gt;
&lt;p&gt;Julia thường nhanh hơn Python &lt;a href="https://benchmarksgame-team.pages.debian.net/benchmarksgame/faster/julia-python3.html"&gt;ít nhất 2 lần&lt;/a&gt;&lt;/p&gt;
&lt;h5&gt;Không quan trọng indentation&lt;/h5&gt;
&lt;p&gt;Dù bạn thụt ra thụt vào 2 3 4 5 ký tự, hay dùng tab đều không quan trọng.
Chuyện này vốn gây đau đầu cho không ít người dùng Python.&lt;/p&gt;
&lt;p&gt;Python&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Julia&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="kp"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;999&lt;/span&gt;
 &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
   &lt;span class="kd"&gt;global&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;
 &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="c"&gt;# 233168&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Julia dùng từ &lt;code&gt;end&lt;/code&gt; để kết thúc &lt;code&gt;if&lt;/code&gt; hay &lt;code&gt;for&lt;/code&gt;, nên không cần thiết sử dụng dấu cách hay tab để thụt dòng.
Thậm chí có thể dùng &lt;code&gt;;&lt;/code&gt; để phân cách các phần, và viết trên 1 dòng (bạn KHÔNG THỂ làm điều này với Python khi có for):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="kp"&gt;in&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;999&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="kd"&gt;global&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;end&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;end&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mi"&gt;233168&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;Range bao gồm cả số kết thúc&lt;/h5&gt;
&lt;p&gt;Một điều gây khó chịu với người mới code Python là phần kết thúc của range không được tính.
Tức nếu viết &lt;code&gt;range(1,1000)&lt;/code&gt; thì chỉ có từ 1 đến 999. Trong đầu luôn phải nhớ bớt đi 1.
Julia &lt;code&gt;1:999&lt;/code&gt; nghĩa là 1 đến 999, không thêm bớt gì.&lt;/p&gt;
&lt;h5&gt;Không bị "leak" biến i trong vòng lặp ra ngoài&lt;/h5&gt;
&lt;p&gt;Đây là &lt;a href="https://stackoverflow.com/questions/3611760/scoping-in-python-for-loops"&gt;1 bug của Python&lt;/a&gt;, do sau này quá muộn để sửa, &lt;a href="https://www.wired.com/story/its-not-a-bug-its-a-feature/"&gt;người ta coi nó như 1 tính năng&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;  &lt;span class="c1"&gt;# i vốn ở trong vòng lặp for, nay thoát ra ngoài với giá trị = 3&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h5&gt;Hỗ trợ functional&lt;/h5&gt;
&lt;p&gt;Viết map trong Julia rất dễ chịu - dễ đọc:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;map([1,2,3]) do x
  x + 1
end
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Cách viết dùng lambda: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;sẽ tạo array chứa &lt;code&gt;[2,3,4]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Python&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;map&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h4&gt;The OK - ổn&lt;/h4&gt;
&lt;h5&gt;Index from 1&lt;/h5&gt;
&lt;p&gt;Chuyện này gây sốc với lập trình viên lâu năm C, Java, PHP, Python ...
Nhưng không phải là hiếm có. Lua, MatLab, R đều dùng index từ 1.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt; &lt;span class="n"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Trong Julia code này sẽ in ra số 4 nhưng Python sẽ xảy ra exception do Python index đếm từ 0&lt;/p&gt;
&lt;p&gt;Dùng nhiều sẽ quen và cũng không ghê gớm lắm, do Julia sử dụng cả phần cuối của range.&lt;/p&gt;
&lt;p&gt;Ví dụ slice: Python lấy 3 số đầu tiên của list:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Julia: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Đều kết thúc là 3 - đều là số phần tử cần lấy.&lt;/p&gt;
&lt;p&gt;Nhưng tệ hơn khi cần lấy 2 phần tử cuối:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ns&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;end&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="k"&gt;end&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;end&lt;/code&gt; là một index magic (tự xuất hiện), đại diện cho index của phần tử cuối cùng.&lt;/p&gt;
&lt;p&gt;Trong ví dụ này gõ số 4 thay end cũng được.&lt;/p&gt;
&lt;h4&gt;The ugly - thảm hại&lt;/h4&gt;
&lt;p&gt;Unicode string - sẽ rất đau đầu khi chuyển từ Python sang.&lt;/p&gt;
&lt;p&gt;Index của string (mặc định Unicode) trong Julia là byte index, không phải index theo thứ tự của ký tự.&lt;/p&gt;
&lt;p&gt;Python&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Điêu&amp;quot;&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Đ&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;i&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Julia &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ulia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Điêu&amp;quot;&lt;/span&gt;
&lt;span class="s"&gt;&amp;quot;Điêu&amp;quot;&lt;/span&gt;

&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="sc"&gt;&amp;#39;Đ&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Unicode&lt;/span&gt; &lt;span class="n"&gt;U&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;0110&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;category&lt;/span&gt; &lt;span class="n"&gt;Lu&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Letter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;uppercase&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;ERROR&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;StringIndexError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Điêu&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Stacktrace&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
 &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;string_index_err&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="kt"&gt;Int64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nix&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="n"&gt;fmf5sqi0jx5zdlqx0gpw2m6nrsbcch2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dylib&lt;/span&gt;&lt;span class="o"&gt;:?&lt;/span&gt;
 &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;getindex_continued&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="kt"&gt;Int64&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="kt"&gt;UInt32&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nix&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="n"&gt;fmf5sqi0jx5zdlqx0gpw2m6nrsbcch2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dylib&lt;/span&gt;&lt;span class="o"&gt;:?&lt;/span&gt;
 &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;getindex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="kt"&gt;Int64&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;nix&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;store&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="n"&gt;fmf5sqi0jx5zdlqx0gpw2m6nrsbcch2&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;lib&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dylib&lt;/span&gt;&lt;span class="o"&gt;:?&lt;/span&gt;
 &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;top&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;level&lt;/span&gt; &lt;span class="n"&gt;scope&lt;/span&gt; &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;none&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="n"&gt;julia&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="sc"&gt;&amp;#39;i&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ASCII&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;Unicode&lt;/span&gt; &lt;span class="n"&gt;U&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;0069&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;category&lt;/span&gt; &lt;span class="n"&gt;Ll&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Letter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lowercase&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Do chữ &lt;code&gt;Đ&lt;/code&gt; trong Unicode UTF-8 được biểu diễn bằng 2 byte, ta chỉ có thể truy cập 
được index 1, không truy cập được index 2. Và chữ &lt;code&gt;i&lt;/code&gt; ngay sau &lt;code&gt;Đ&lt;/code&gt; sẽ là index 3.&lt;/p&gt;
&lt;h4&gt;Exception&lt;/h4&gt;
&lt;p&gt;TBD&lt;/p&gt;
&lt;h4&gt;Chú ý&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;Julia khởi động mất 0.2-0.4 giây, Python khởi động nhanh gấp 10.&lt;/li&gt;
&lt;li&gt;String trong Julia phải dùng double quote &lt;code&gt;""&lt;/code&gt;, single quote &lt;code&gt;''&lt;/code&gt; dành cho ký tự (Char).&lt;/li&gt;
&lt;li&gt;Nối string dùng &lt;code&gt;*&lt;/code&gt; chứ không phải &lt;code&gt;+&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Sẽ không có method gắn liền vào các object như string hay list trong Python,
  thay vào đó là các function có sẵn (thường không cần import, gọi là trong &lt;a href="https://docs.julialang.org/en/v1/base/base/"&gt;Base&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Ví dụ 1 chương trình CLI nhận argument, gọi HTTP với JSON&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;HTTP&lt;/span&gt;
&lt;span class="k"&gt;import&lt;/span&gt; &lt;span class="n"&gt;JSON&lt;/span&gt;
&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="n"&gt;DocOpt&lt;/span&gt;  &lt;span class="c"&gt;# import docopt function&lt;/span&gt;

&lt;span class="k"&gt;function&lt;/span&gt; &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;doc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&amp;quot;Fist Julia program which makes HTTP requests to httpbin endpoint&lt;/span&gt;

&lt;span class="s"&gt;    Usage:&lt;/span&gt;
&lt;span class="s"&gt;      main.jl request &amp;lt;endpoint&amp;gt;&lt;/span&gt;

&lt;span class="s"&gt;    Options:&lt;/span&gt;
&lt;span class="s"&gt;      -h --help     Show this screen.&lt;/span&gt;
&lt;span class="s"&gt;      --version     Show version.&lt;/span&gt;
&lt;span class="s"&gt;    &amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;

    &lt;span class="n"&gt;args&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;docopt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;0.0.1&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;endpoint&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;lt;endpoint&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
    &lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;https://httpbin.org/&lt;/span&gt;&lt;span class="si"&gt;$endpoint&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;
    &lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Accessing &lt;/span&gt;&lt;span class="si"&gt;$url&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;resp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;HTTP&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;JSON&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Parser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;body&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;My IP is &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;origin&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

    &lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Now also send post&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;HTTP&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;POST&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;https://httpbin.org/post&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Content-Type&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;application/json&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="n"&gt;JSON&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;Dict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;a&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;b&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
            &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;JSON&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Parser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;body&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/tmp/data.json&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;w&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;
        &lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;JSON&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;json&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
    &lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/tmp/data.json&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;r&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;
        &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;JSON&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Parser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
        &lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;

    &lt;span class="n"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sb"&gt;`ls -l`&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="n"&gt;io&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="kp"&gt;in&lt;/span&gt; &lt;span class="n"&gt;eachline&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;io&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;isa&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;match&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sr"&gt;r&amp;quot;.*\.jl&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;Nothing&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="n"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="k"&gt;end&lt;/span&gt;
        &lt;span class="k"&gt;end&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chạy&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ julia  main.jl  -h
Fist Julia program which makes HTTP requests to httpbin endpoint

Usage:
  main.jl request &amp;lt;endpoint&amp;gt;

Options:
  -h --help     Show this screen.
  --version     Show version.

$ julia main.jl request ip
Accessing https://httpbin.org/ip
My IP is &lt;span class="m"&gt;3&lt;/span&gt;.117.2.254, &lt;span class="m"&gt;3&lt;/span&gt;.117.2.254
Now also send post
Dict&lt;span class="o"&gt;{&lt;/span&gt;String,Any&lt;span class="o"&gt;}(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;b&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;3,&lt;span class="s2"&gt;&amp;quot;a&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&amp;gt;2&lt;span class="o"&gt;)&lt;/span&gt;
-rw-r--r-- &lt;span class="m"&gt;1&lt;/span&gt; viethung.nguyen viethung.nguyen &lt;span class="m"&gt;1189&lt;/span&gt; Apr &lt;span class="m"&gt;12&lt;/span&gt; &lt;span class="m"&gt;08&lt;/span&gt;:38 main.jl
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Code hoàn toàn tương đương với code Python.&lt;/p&gt;
&lt;h3&gt;Kết luận&lt;/h3&gt;
&lt;p&gt;Còn chờ gì nữa?
Làm tí Julia thôi.&lt;/p&gt;
&lt;p&gt;Phần tiếp theo (nếu có) sẽ đi vào các tính năng của Julia sử dụng trong tính toán khoa học.&lt;/p&gt;
&lt;h3&gt;Tham khảo&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://docs.julialang.org/en/v1/"&gt;https://docs.julialang.org/en/v1/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://en.wikibooks.org/wiki/Introducing_Julia"&gt;https://en.wikibooks.org/wiki/Introducing_Julia&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://lectures.quantecon.org/jl/"&gt;https://lectures.quantecon.org/jl/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><category term="Trang chủ"></category><category term="julia"></category><category term="python"></category></entry><entry><title>Dùng MicroPython với wifi board ESP-8266</title><link href="http://pp.pymi.vn/article/micropython/" rel="alternate"></link><published>2018-10-21T00:00:00+07:00</published><updated>2018-10-21T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-10-21:/article/micropython/</id><summary type="html">&lt;p&gt;Chạy code Python trên thiết bị với chỉ 96KB RAM và 4MB bộ nhớ flash.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Khi trở thành một trong những ngôn ngữ lập trình phổ biến nhất thế giới,
Python không chỉ được dùng trong làm web, data science, hay sysadmin tool mà
nó còn đá sang cả một lĩnh vực vốn giới hạn về tài nguyên: nhúng.&lt;/p&gt;
&lt;p&gt;Bình thường khi bật Python lên để in ra màn hình dòng "hello, world" ta đã
dùng tới 8MB bộ nhớ. Vậy nên việc dùng Python cho lập trình nhúng thường nghe
có vẻ không phù hợp.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://micropython.org"&gt;MicroPython&lt;/a&gt; ra đời, là một bản thu gọn của Python, tối ưu chạy trên các vi xử
lý cũng như các môi trường giới hạn về tài nguyên.
Bài này khám phá việc chạy MicroPython trên một thiết bị tí hon
có tên WEMOS D1 mini.&lt;/p&gt;
&lt;h2&gt;WEMOS D1 mini&lt;/h2&gt;
&lt;p&gt;Là 1 bảng mạch điện có khả năng thu phát sóng wifi (wifi board) có kích thước
nhỏ hơn ngón chân cái của người lớn, thiết bị này có giá 2 USD.&lt;/p&gt;
&lt;p&gt;&lt;img alt="WEMOS D1 Mini" src="http://pp.pymi.vn/images/wemos1.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Bảng mạch này sử dụng vi điều khiển (microcontroller) ESP-8266, với xung nhịp
80MHz/160MHz, 96KB RAM và 4 MB Flash.&lt;/p&gt;
&lt;h3&gt;Microcontroller&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;A microcontroller is a small computer on a single integrated circuit. In modern
terminology, it is similar to, but less sophisticated than, a system on a chip
or SoC; an SoC may include a microcontroller as one of its components. A
microcontroller contains one or more CPUs along with memory and programmable
input/output peripherals.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Một vi điều khiển là một máy tính nhỏ, trên một mạch điện tử (P/S: SoC là khái
        niệm tương tự, nhưng phức tạp hơn). Nó có một hoặc nhiều CPU, memory và
chỗ để thực hiện vào ra dữ liệu.&lt;/p&gt;
&lt;p&gt;Hãy nhìn vào chiếc máy bàn hay laptop bạn đang dùng, nó có 1 cục CPU to bằng
lòng bàn tay, vài thanh RAM dài như bàn tay, các cổng vào ra đều to bằng ngón
tay. Mỗi cục CPU đều từ 2-3 GHz (so với 80MHz), ổ cứng vài trăm GB (so với 4MB),
1-16 GB RAM (so với 96KB RAM).
Ta sẽ thấy microcontroller nhỏ bé và "yếu ớt" đến chừng nào.&lt;/p&gt;
&lt;p&gt;&lt;img alt="WEMOS D1 Mini" src="http://pp.pymi.vn/images/esp8266.jpg"&gt;&lt;/p&gt;
&lt;h3&gt;MicroPython&lt;/h3&gt;
&lt;p&gt;Phiên bản Python dành riêng cho các thiết bị tí hon này nhỏ tới mức chỉ cần
256kB không gian chứa code, và 16kB RAM.&lt;/p&gt;
&lt;h2&gt;Cài đặt MicroPython lên WEMOS D1 Mini trên Ubuntu 16.04&lt;/h2&gt;
&lt;p&gt;(Windows hay OSX cần cài driver, hãy lên trang chủ của WEMOS để tải và xem
 hướng dẫn).&lt;/p&gt;
&lt;p&gt;Cắm thiết bị vào máy tính sử dụng dây micro USB (dây sạc điện thoại android),
sẽ thấy nháy đèn trên thiết bị, gõ lệnh &lt;code&gt;dmesg&lt;/code&gt; để xem Linux kernel báo nhận
thiết bị:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ dmesg
...
&lt;span class="o"&gt;[&lt;/span&gt;  &lt;span class="m"&gt;992&lt;/span&gt;.253009&lt;span class="o"&gt;]&lt;/span&gt; usb &lt;span class="m"&gt;2&lt;/span&gt;-1: new full-speed USB device number &lt;span class="m"&gt;5&lt;/span&gt; using xhci_hcd
&lt;span class="o"&gt;[&lt;/span&gt;  &lt;span class="m"&gt;992&lt;/span&gt;.402181&lt;span class="o"&gt;]&lt;/span&gt; usb &lt;span class="m"&gt;2&lt;/span&gt;-1: New USB device found, &lt;span class="nv"&gt;idVendor&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;1a86, &lt;span class="nv"&gt;idProduct&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;7523&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;  &lt;span class="m"&gt;992&lt;/span&gt;.402185&lt;span class="o"&gt;]&lt;/span&gt; usb &lt;span class="m"&gt;2&lt;/span&gt;-1: New USB device strings: &lt;span class="nv"&gt;Mfr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;, &lt;span class="nv"&gt;Product&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;, &lt;span class="nv"&gt;SerialNumber&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="o"&gt;[&lt;/span&gt;  &lt;span class="m"&gt;992&lt;/span&gt;.402187&lt;span class="o"&gt;]&lt;/span&gt; usb &lt;span class="m"&gt;2&lt;/span&gt;-1: Product: USB2.0-Serial
&lt;span class="o"&gt;[&lt;/span&gt;  &lt;span class="m"&gt;992&lt;/span&gt;.402757&lt;span class="o"&gt;]&lt;/span&gt; ch341 &lt;span class="m"&gt;2&lt;/span&gt;-1:1.0: ch341-uart converter detected
&lt;span class="o"&gt;[&lt;/span&gt;  &lt;span class="m"&gt;992&lt;/span&gt;.403119&lt;span class="o"&gt;]&lt;/span&gt; usb &lt;span class="m"&gt;2&lt;/span&gt;-1: ch341-uart converter now attached to ttyUSB0
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ file /dev/ttyUSB0
/dev/ttyUSB0: character special &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;188&lt;/span&gt;/0&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ta có thấy xuất hiện 1 file mới gọi là &lt;code&gt;/dev/ttyUSB0&lt;/code&gt;, đây chính là thiết bị
vừa kết nối.&lt;/p&gt;
&lt;h3&gt;Cài đặt MicroPython sử dụng esptool&lt;/h3&gt;
&lt;p&gt;Cài đặt esptool dùng pip:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ pip install esptool
Collecting esptool
...
Successfully installed ecdsa-0.13 esptool-2.5.1 pyaes-1.6.1 pyserial-3.4
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Xóa nội dung hiện tại trong flash memory&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo /home/hvn/py36/bin/esptool.py --port /dev/ttyUSB0 erase_flash
esptool.py v2.5.1
Serial port /dev/ttyUSB0
Connecting....
Detecting chip type... ESP8266
Chip is ESP8266EX
Features: WiFi
MAC: b4:e6:2d:3b:22:1b
Uploading stub...
Running stub...
Stub running...
Erasing flash &lt;span class="o"&gt;(&lt;/span&gt;this may take a &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;...
Chip erase completed successfully in &lt;span class="m"&gt;1&lt;/span&gt;.6s
Hard resetting via RTS pin...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Tải MicroPython bản dành cho ESP8266: bản mới nhất tại thời điểm viết bài
http://micropython.org/resources/firmware/esp8266-20180511-v1.9.4.bin&lt;/p&gt;
&lt;p&gt;Ghi micropython lên flash memory:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo /home/hvn/py36/bin/esptool.py --port /dev/ttyUSB0 --baud &lt;span class="m"&gt;460800&lt;/span&gt; write_flash --flash_size&lt;span class="o"&gt;=&lt;/span&gt;detect -fm dio &lt;span class="m"&gt;0&lt;/span&gt; ~/esp8266-20180511-v1.9.4.bin
esptool.py v2.5.1
Serial port /dev/ttyUSB0
Connecting....
Detecting chip type... ESP8266
Chip is ESP8266EX
Features: WiFi
MAC: b4:e6:2d:3b:22:1b
Uploading stub...
Running stub...
Stub running...
Changing baud rate to &lt;span class="m"&gt;460800&lt;/span&gt;
Changed.
Configuring flash size...
Auto-detected Flash size: 4MB
Flash params &lt;span class="nb"&gt;set&lt;/span&gt; to 0x0240
Compressed &lt;span class="m"&gt;604872&lt;/span&gt; bytes to &lt;span class="m"&gt;394893&lt;/span&gt;...
Wrote &lt;span class="m"&gt;604872&lt;/span&gt; bytes &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;394893&lt;/span&gt; compressed&lt;span class="o"&gt;)&lt;/span&gt; at 0x00000000 in &lt;span class="m"&gt;9&lt;/span&gt;.0 seconds &lt;span class="o"&gt;(&lt;/span&gt;effective &lt;span class="m"&gt;536&lt;/span&gt;.4 kbit/s&lt;span class="o"&gt;)&lt;/span&gt;...
Hash of data verified.

Leaving...
Hard resetting via RTS pin...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Sau khi cài đặt xong, bấm nút "reset" trên thiết bị để khởi động lại, ngay sau
đó bật WIFI của laptop hay điện thoại lên ta sẽ thấy một mạng WIFI có tên
&lt;code&gt;MicroPython-xxxxxx&lt;/code&gt;, có thể kết nối vào WIFI này với password &lt;code&gt;micropythoN&lt;/code&gt;.
Ở đây ta không cần làm việc này. Tiếp tục cài đặt để kết nối với thiết bị qua
cổng COM:&lt;/p&gt;
&lt;p&gt;Cài &lt;code&gt;picocom&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt install -y picocom
$ sudo picocom /dev/ttyUSB0 --baud &lt;span class="m"&gt;115200&lt;/span&gt;
picocom v1.7

port is        : /dev/ttyUSB0
flowcontrol    : none
baudrate is    : &lt;span class="m"&gt;115200&lt;/span&gt;
parity is      : none
databits are   : &lt;span class="m"&gt;8&lt;/span&gt;
escape is      : C-a
&lt;span class="nb"&gt;local&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; is  : no
noinit is      : no
noreset is     : no
nolock is      : no
send_cmd is    : sz -vv
receive_cmd is : rz -vv
imap is        :
omap is        :
emap is        : crcrlf,delbs,

Terminal ready

&amp;gt;&amp;gt;&amp;gt; &lt;span class="m"&gt;2&lt;/span&gt;**1000
&lt;span class="m"&gt;10715086071862673209484250490600018105614048117055336074437503883703510511249361224931983788156958581275946729175531468251871452856923140435984577574698574803934567774824230985421074605062371141877954182153046474983581941267398767559165543946077062914571196477686542167660429831652624386837205668069376&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Sau khi kết nối, ta lập tức sử dụng Python interpreter như bình thường.&lt;/p&gt;
&lt;p&gt;Python interpreter đóng vai trò như 1 hệ điều hành ở đây, mỗi lần reset thiết bị,
nó sẽ lại bật lại Python interpreter.
Mọi tương tác với thiết bị (đọc/ghi file) đều thực hiện qua code python.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getcwd&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;listdir&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;boot.py&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;main.py&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Hai file này được chạy mỗi lần thiết bị khởi động.&lt;/p&gt;
&lt;p&gt;Xem nội dung file &lt;code&gt;boot.py&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;boot.py&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
&lt;span class="c1"&gt;# This file is executed on every boot (including wake-boot from deepsleep)&lt;/span&gt;
&lt;span class="c1"&gt;#import esp&lt;/span&gt;
&lt;span class="c1"&gt;#esp.osdebug(None)&lt;/span&gt;
    &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;gc&lt;/span&gt;
&lt;span class="c1"&gt;#import webrepl&lt;/span&gt;
&lt;span class="c1"&gt;#webrepl.start()&lt;/span&gt;
    &lt;span class="n"&gt;gc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;collect&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;File &lt;code&gt;main.py&lt;/code&gt; chứa code của người dùng muốn chạy mỗi lần bật thiết bị. Ví dụ ta muốn hiển thị dòng hello PyMi:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;main.py&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;wt&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;print(&amp;quot;Hello Pymi.vn&amp;quot;)&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mi"&gt;22&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Bấm nút reset sẽ thấy:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;...
ets_task(40100130, 3, 3fff83ec, 4)
Hello Pymi.vn

MicroPython v1.9.4-8-ga9a3caad0 on 2018-05-11; ESP module with ESP8266
Type &amp;quot;help()&amp;quot; for more information.
&amp;gt;&amp;gt;&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Thao tác với các chân Pin&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;machine&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Pin&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;P0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Pin&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Pin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;OUT&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;P0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="vm"&gt;__class__&lt;/span&gt;       &lt;span class="n"&gt;IN&lt;/span&gt;              &lt;span class="n"&gt;IRQ_FALLING&lt;/span&gt;     &lt;span class="n"&gt;IRQ_RISING&lt;/span&gt;
&lt;span class="n"&gt;OPEN_DRAIN&lt;/span&gt;      &lt;span class="n"&gt;OUT&lt;/span&gt;             &lt;span class="n"&gt;PULL_UP&lt;/span&gt;         &lt;span class="n"&gt;init&lt;/span&gt;
&lt;span class="n"&gt;irq&lt;/span&gt;             &lt;span class="n"&gt;off&lt;/span&gt;             &lt;span class="n"&gt;on&lt;/span&gt;              &lt;span class="n"&gt;value&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;P0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;on&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;P0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;off&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Baud&lt;/h3&gt;
&lt;p&gt;Baud /ˈbɔːd/ ở câu lệnh trên là một độ đo "symbol rate" (symbol per second), để
quyết định tốc độ giao tiếp qua một kênh thông tin.&lt;/p&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Với MicroPython trên thiết bị, ta đã có thể thực hiện điều khiển các chân Pin hay gửi HTTP request như code Python bình thường. Giờ thì giới hạn chỉ còn là trí tưởng tượng của bạn.&lt;/p&gt;
&lt;h2&gt;Tham khảo&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;http://docs.micropython.org/en/latest/esp8266/tutorial/intro.html#intro&lt;/li&gt;
&lt;li&gt;https://wiki.wemos.cc/products:d1:d1_mini&lt;/li&gt;
&lt;/ul&gt;</content><category term="Trang chủ"></category><category term="micropython"></category><category term="embedded"></category><category term="esp8266"></category><category term="iot"></category></entry><entry><title>Dùng Raspberry Pi để gửi và nhận SMS với Sim900A</title><link href="http://pp.pymi.vn/article/raspberry-pi-sim900a/" rel="alternate"></link><published>2018-10-09T00:00:00+07:00</published><updated>2018-10-09T00:00:00+07:00</updated><author><name>tudoanh</name></author><id>tag:pp.pymi.vn,2018-10-09:/article/raspberry-pi-sim900a/</id><summary type="html">&lt;p&gt;Summary: Hướng dẫn kết nối module Sim900A với Raspberry Pi 3 B+, dùng để gửi và nhận tin nhắn SMS&lt;/p&gt;
&lt;p&gt;Dạo này vì lý do công việc nên cần phải tìm cách kết nối và sử dụng module Sim900A với con Raspberry Pi 3, dùng để nhận SMS.&lt;/p&gt;
&lt;p&gt;Tìm hiểu …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Summary: Hướng dẫn kết nối module Sim900A với Raspberry Pi 3 B+, dùng để gửi và nhận tin nhắn SMS&lt;/p&gt;
&lt;p&gt;Dạo này vì lý do công việc nên cần phải tìm cách kết nối và sử dụng module Sim900A với con Raspberry Pi 3, dùng để nhận SMS.&lt;/p&gt;
&lt;p&gt;Tìm hiểu mấy hôm, rất là cực nên hôm nay mình viết lại bài này, cho những ai cần tới sau này đỡ tốn thời gian mày mò lại từ đầu.&lt;/p&gt;
&lt;h3&gt;Chuẩn bị&lt;/h3&gt;
&lt;p&gt;Để bắt đầu, bạn cần:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Một combo &lt;strong&gt;Raspberry Pi 3 B+&lt;/strong&gt; đầy đủ nguồn, thẻ nhớ, đã cài đặt &lt;strong&gt;Raspbian&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Một module &lt;strong&gt;Sim900A&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/vvIy62p.jpg" src="https://i.imgur.com/vvIy62p.jpg"&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Dây chuyển đổi USB - UART PL2303 (Có thể không có)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/wWkr422.jpg" src="https://i.imgur.com/wWkr422.jpg"&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Đầy đủ dây nối&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/C40X3gs.png" src="https://i.imgur.com/C40X3gs.png"&gt;&lt;/p&gt;
&lt;h3&gt;Kết nối&lt;/h3&gt;
&lt;p&gt;Chỉ cần bạn kết nối đúng các cổng &lt;em&gt;Tx, Rx, Gnd và nguồn 5v&lt;/em&gt; vào Pi là xong. Tham khảo ảnh dưới:&lt;/p&gt;
&lt;p&gt;&lt;img alt="https://i.ytimg.com/vi/louSyBRkvO4/maxresdefault.jpg" src="https://i.ytimg.com/vi/louSyBRkvO4/maxresdefault.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Ảnh thực tế (Nếu kết nối thẳng vào GPIO)&lt;/p&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/KRanp3y.jpg" src="https://i.imgur.com/KRanp3y.jpg"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/dQhoN8e.jpg" src="https://i.imgur.com/dQhoN8e.jpg"&gt;&lt;/p&gt;
&lt;p&gt;Còn nếu kết nối qua USB&lt;/p&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/2DHsQCx.jpg" src="https://i.imgur.com/2DHsQCx.jpg"&gt;&lt;/p&gt;
&lt;h3&gt;Cài đặt&lt;/h3&gt;
&lt;p&gt;Đầu tiên ta cần mở cổng &lt;strong&gt;ttyS0&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Bạn có thể dùng "raspi-config" để mở UART:&lt;/p&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/NVchkKl.png" src="https://i.imgur.com/NVchkKl.png"&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Trong "Interfacing Options", chọn "Serial"&lt;/li&gt;
&lt;li&gt;Chọn "No" khi được hỏi "You want a login shell over serial?".&lt;/li&gt;
&lt;li&gt;Chọn "Yes" khi được hỏi "You want the hardware enabled?"&lt;/li&gt;
&lt;li&gt;Khởi động lại&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Thực ra, bạn có thể sửa file &lt;em&gt;/boot/config.txt&lt;/em&gt; và sửa &lt;strong&gt;enable_uart=1&lt;/strong&gt;, và &lt;strong&gt;console=serial0,115200&lt;/strong&gt; (hoặc &lt;strong&gt;console=ttyS0,115200&lt;/strong&gt;) ở trong &lt;em&gt;/boot/cmdline.txt&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Và bạn có thể bật &lt;em&gt;terminal&lt;/em&gt; lên và test xem kết nối thành công chưa bằng cách gửi command &lt;strong&gt;AT\r\n&lt;/strong&gt; đến khi nào trả về &lt;strong&gt;OK&lt;/strong&gt; là thành công. (Nếu kết nối qua GPIO thì sẽ là &lt;strong&gt;/dev/ttyS0&lt;/strong&gt;, còn qua USB thì sẽ là &lt;strong&gt;/dev/ttyUSB0&lt;/strong&gt;)&lt;/p&gt;
&lt;p&gt;Ví dụ:&lt;/p&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/59K45tV.png" src="https://i.imgur.com/59K45tV.png"&gt;&lt;/p&gt;
&lt;p&gt;Link asciinema:&lt;/p&gt;
&lt;p&gt;&lt;a href="https://asciinema.org/a/U3oPOg0vX4CZ5u3mWTTIr0FTS"&gt;&lt;img alt="asciicast" src="https://asciinema.org/a/U3oPOg0vX4CZ5u3mWTTIr0FTS.png"&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Sau đó bạn có thể gửi và đọc tin nhắn bằng lib mình đã viết ở đây (Ví dụ cách sử dụng ở trong link):&lt;/p&gt;
&lt;p&gt;https://github.com/tudoanh/sim900a&lt;/p&gt;
&lt;p&gt;Ví dụ về kết quả nhận được bằng lệnh &lt;strong&gt;AT+CNMI=3,2,0,0,0&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="https://i.imgur.com/ecz65hk.png" src="https://i.imgur.com/ecz65hk.png"&gt;&lt;/p&gt;
&lt;p&gt;Về chi tiết cách sử dụng các lệnh AT và các khái niệm GPIO, UART mình sẽ để sang một bài khác.&lt;/p&gt;
&lt;p&gt;Chúc các bạn thành công.&lt;/p&gt;
&lt;p&gt;Tham khảo:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;https://pinout.xyz/&lt;/li&gt;
&lt;li&gt;http://mlab.vn/9216-huong-dan-lap-trinh-module-sim900a-va-arduino.html&lt;/li&gt;
&lt;li&gt;https://www.developershome.com/sms/checkCommandSupport3.asp&lt;/li&gt;
&lt;li&gt;https://raspberrypi.stackexchange.com/questions/82696/how-do-i-connect-gsm-sim-900a-to-a-raspberry-pi-3&lt;/li&gt;
&lt;li&gt;https://www.espruino.com/datasheets/SIM900_AT.pdf&lt;/li&gt;
&lt;li&gt;https://hristoborisov.com/index.php/projects/turning-the-raspberry-pi-into-a-sms-center-using-python/#Connecting_the_3gModem&lt;/li&gt;
&lt;/ol&gt;</content><category term="Trang chủ"></category><category term="raspberry"></category><category term="pi"></category><category term="sim"></category><category term="900a"></category><category term="sms"></category></entry><entry><title>Quản lý, sử dụng package trong CHICKEN Scheme</title><link href="http://pp.pymi.vn/article/scm_egg/" rel="alternate"></link><published>2018-10-05T00:00:00+07:00</published><updated>2018-10-05T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-10-05:/article/scm_egg/</id><summary type="html">&lt;p&gt;Con đường nhanh nhất để sử dụng 1 ngôn ngữ là dùng nó!&lt;/p&gt;</summary><content type="html">&lt;p&gt;Học và hành thường ở rất xa nhau.
Ta có thể học đủ loại khái niệm, đủ loại cú pháp, viết các thuật toán để luyện
ngôn ngữ, nhưng rồi lại mãi luẩn quẩn ở đó, không thoát ra được, không bay
lên nổi. Viết 1 vòng for, 2 câu if bằng Python, JavaScript, Golang hay
&lt;a href="https://elixir.pymi.vn/"&gt;Elixir&lt;/a&gt;
cũng không hơn nhau gì cả, chỉ thay đổi chút cú pháp thôi.&lt;/p&gt;
&lt;p&gt;Thế nên cách "tốt nhất" để học 1 ngôn ngữ lập trình, không phải là học đủ các
khái niệm, best practice, viết code chuẩn đẹp tuyệt đối, mà là việc hoàn thành
một sản phẩm từ đầu đến tận X Y Z. Đưa ra sản phẩm cuối cùng, có thể là trang
web chạy với domain hẳn hoi, có thể là chương trình đóng thành package,
thành file cài đặt, hay game có giao diện đầy đủ.&lt;/p&gt;
&lt;p&gt;Package manager giúp cài đặt các thư viện có sẵn là công cụ giúp ta đến đích
nhanh nhất. Python có pip, JavaScript có NPM, Elixir có mix, Rust có cargo ...
thì CHICKEN Scheme có &lt;code&gt;chicken-install&lt;/code&gt;, câu lệnh có sẵn khi cài CHICKEN
Scheme.&lt;/p&gt;
&lt;h2&gt;Cài đặt extension&lt;/h2&gt;
&lt;p&gt;CHICKEN Scheme gọi các gói thư viện là extension hay "egg".&lt;/p&gt;
&lt;p&gt;&lt;code&gt;chicken-install tên-extension&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Ví dụ cài &lt;code&gt;regex&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo chicken-install regex
&lt;span class="o"&gt;[&lt;/span&gt;sudo&lt;span class="o"&gt;]&lt;/span&gt; password &lt;span class="k"&gt;for&lt;/span&gt; hvn:  GO PASSWORD
retrieving ...
connecting to host &lt;span class="s2"&gt;&amp;quot;chicken.kitten-technologies.co.uk&amp;quot;&lt;/span&gt;, port &lt;span class="m"&gt;80&lt;/span&gt; ...
requesting &lt;span class="s2"&gt;&amp;quot;/henrietta.cgi?name=regex&amp;amp;mode=default&amp;quot;&lt;/span&gt; ...
reading response ...
HTTP/1.1 &lt;span class="m"&gt;200&lt;/span&gt; OK
Date: Fri, &lt;span class="m"&gt;05&lt;/span&gt; Oct &lt;span class="m"&gt;2018&lt;/span&gt; &lt;span class="m"&gt;14&lt;/span&gt;:28:32 GMT
Server: Apache/2.2.31 &lt;span class="o"&gt;(&lt;/span&gt;Unix&lt;span class="o"&gt;)&lt;/span&gt; DAV/2 PHP/5.5.36 mod_fastcgi/2.4.6
...
checking platform &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="sb"&gt;`&lt;/span&gt;regex&lt;span class="s1"&gt;&amp;#39; ...&lt;/span&gt;
&lt;span class="s1"&gt;checking dependencies for `regex&amp;#39;&lt;/span&gt; ...
install order:
&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;regex&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
installing regex:1.0 ...
changing current directory to /tmp/tempab50.21917/regex
  &lt;span class="s1"&gt;&amp;#39;/usr/bin/csi&amp;#39;&lt;/span&gt; -bnq -setup-mode -e &lt;span class="s2"&gt;&amp;quot;(require-library setup-api)&amp;quot;&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;(import setup-api)&amp;quot;&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;(setup-error-handling)&amp;quot;&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;(extension-name-and-version &amp;#39;(\&amp;quot;regex\&amp;quot; \&amp;quot;1.0\&amp;quot;))&amp;quot;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;regex.setup&amp;#39;&lt;/span&gt;
  &lt;span class="s1"&gt;&amp;#39;/usr/bin/csc&amp;#39;&lt;/span&gt; -feature compiling-extension -setup-mode    -s -O3 -d1 regex.scm -JS
  &lt;span class="s1"&gt;&amp;#39;/usr/bin/csc&amp;#39;&lt;/span&gt; -feature compiling-extension -setup-mode    -s -O3 -d0 regex.import.scm
  cp -r &lt;span class="s1"&gt;&amp;#39;regex.so&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;/var/lib/chicken/7/regex.so&amp;#39;&lt;/span&gt;
  chmod a+r &lt;span class="s1"&gt;&amp;#39;/var/lib/chicken/7/regex.so&amp;#39;&lt;/span&gt;
  cp -r &lt;span class="s1"&gt;&amp;#39;regex.import.so&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;/var/lib/chicken/7/regex.import.so&amp;#39;&lt;/span&gt;
  chmod a+r &lt;span class="s1"&gt;&amp;#39;/var/lib/chicken/7/regex.import.so&amp;#39;&lt;/span&gt;
  chmod a+r &lt;span class="s1"&gt;&amp;#39;/var/lib/chicken/7/regex.setup-info&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Bật &lt;code&gt;csi&lt;/code&gt; lên để gõ code gọi function &lt;code&gt;grep&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;$&lt;/span&gt; &lt;span class="nv"&gt;csi&lt;/span&gt;
&lt;span class="nv"&gt;/usr/bin/rlwrap&lt;/span&gt;

&lt;span class="nv"&gt;CHICKEN&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="mi"&gt;2008-2014&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;The&lt;/span&gt; &lt;span class="nv"&gt;Chicken&lt;/span&gt; &lt;span class="nv"&gt;Team&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="mi"&gt;2000-2007&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="nv"&gt;Felix&lt;/span&gt; &lt;span class="nv"&gt;L&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt; &lt;span class="nv"&gt;Winkelmann&lt;/span&gt;
&lt;span class="nv"&gt;Version&lt;/span&gt; &lt;span class="mf"&gt;4.9&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.1&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;stability/4&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;9.0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;rev&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="nv"&gt;b3189b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="nv"&gt;linux-unix-gnu-x86-64&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt; &lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="nv"&gt;bit&lt;/span&gt; &lt;span class="nv"&gt;manyargs&lt;/span&gt; &lt;span class="nv"&gt;dload&lt;/span&gt; &lt;span class="nv"&gt;ptables&lt;/span&gt; &lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="nv"&gt;bootstrapped&lt;/span&gt; &lt;span class="mi"&gt;2014-06-07&lt;/span&gt;

&lt;span class="o"&gt;#&lt;/span&gt;&lt;span class="c1"&gt;;1&amp;gt; (grep &amp;quot;[0-9]&amp;quot; (list &amp;quot;pymi&amp;quot; &amp;quot;2018&amp;quot; &amp;quot;pymi2018&amp;quot;))&lt;/span&gt;

&lt;span class="nv"&gt;Error:&lt;/span&gt; &lt;span class="nv"&gt;unbound&lt;/span&gt; &lt;span class="nv"&gt;variable:&lt;/span&gt; &lt;span class="nv"&gt;grep&lt;/span&gt;

    &lt;span class="nv"&gt;Call&lt;/span&gt; &lt;span class="nv"&gt;history:&lt;/span&gt;

    &lt;span class="nv"&gt;&amp;lt;syntax&amp;gt;&lt;/span&gt;      &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;grep&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;[0-9]&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;list &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;pymi&amp;quot;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;2018&amp;quot;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;pymi2018&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="nv"&gt;&amp;lt;syntax&amp;gt;&lt;/span&gt;      &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;list &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;pymi&amp;quot;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;2018&amp;quot;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;pymi2018&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="nv"&gt;&amp;lt;eval&amp;gt;&lt;/span&gt;    &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;grep&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;[0-9]&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;list &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;pymi&amp;quot;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;2018&amp;quot;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;pymi2018&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;    &lt;span class="nv"&gt;&amp;lt;--&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nội dung error rõ ràng: &lt;code&gt;Error: unbound variable: grep&lt;/code&gt; - không hiểu &lt;code&gt;grep&lt;/code&gt;
là cái gì - nó không phải một variable/function đã tồn tại.&lt;/p&gt;
&lt;h2&gt;Sử dụng / import extension&lt;/h2&gt;
&lt;p&gt;Dùng macro &lt;code&gt;use ten-extension&lt;/code&gt; (tại bài này cứ hiểu là function cũng tạm ổn)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;#&lt;/span&gt;&lt;span class="c1"&gt;;1&amp;gt; (use regex)&lt;/span&gt;
&lt;span class="c1"&gt;; loading /var/lib//chicken/7/regex.import.so ...&lt;/span&gt;
&lt;span class="c1"&gt;; loading /var/lib//chicken/7/chicken.import.so ...&lt;/span&gt;
&lt;span class="c1"&gt;; loading /var/lib//chicken/7/irregex.import.so ...&lt;/span&gt;
&lt;span class="c1"&gt;; loading /var/lib//chicken/7/regex.so ...&lt;/span&gt;
&lt;span class="o"&gt;#&lt;/span&gt;&lt;span class="c1"&gt;;2&amp;gt; (grep &amp;quot;[0-9]&amp;quot; (list &amp;quot;pymi&amp;quot; &amp;quot;2018&amp;quot; &amp;quot;pymi2018&amp;quot;))&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;2018&amp;quot;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;pymi2018&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ta thu được list các phần tử có chứa số, string "[0-9]" là regular expression
biểu diễn một số hệ 10.&lt;/p&gt;
&lt;h2&gt;Đọc tài liệu của module/function&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;grep&lt;/code&gt; ở trên làm gì? CHICKEN Scheme có chương trình &lt;code&gt;chicken-doc&lt;/code&gt; để tra
tài liêu, tương tự python có &lt;code&gt;pydoc&lt;/code&gt;. Để có &lt;code&gt;chicken-doc&lt;/code&gt;, cần cài extension
với lệnh: &lt;code&gt;sudo chicken-install chicken-doc&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ chicken-doc grep
path: &lt;span class="o"&gt;(&lt;/span&gt;regex grep&lt;span class="o"&gt;)&lt;/span&gt;

-- procedure: &lt;span class="o"&gt;(&lt;/span&gt;grep REGEX LIST &lt;span class="o"&gt;[&lt;/span&gt;ACCESSOR&lt;span class="o"&gt;])&lt;/span&gt;

Returns all items of &lt;span class="sb"&gt;`&lt;/span&gt;LIST&lt;span class="sb"&gt;`&lt;/span&gt; that match the regular expression &lt;span class="sb"&gt;`&lt;/span&gt;REGEX&lt;span class="sb"&gt;`&lt;/span&gt;. This procedure could be defined as follows:

  &lt;span class="o"&gt;(&lt;/span&gt;define &lt;span class="o"&gt;(&lt;/span&gt;grep regex lst&lt;span class="o"&gt;)&lt;/span&gt;
    &lt;span class="o"&gt;(&lt;/span&gt;filter &lt;span class="o"&gt;(&lt;/span&gt;lambda &lt;span class="o"&gt;(&lt;/span&gt;x&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;string-search regex x&lt;span class="o"&gt;))&lt;/span&gt; lst&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="sb"&gt;`&lt;/span&gt;ACCESSOR&lt;span class="sb"&gt;`&lt;/span&gt; is an optional accessor-procedure applied to each element before doing the match. It should take a single argument
and &lt;span class="k"&gt;return&lt;/span&gt; a string that will &lt;span class="k"&gt;then&lt;/span&gt; be used in the regular expression matching. &lt;span class="sb"&gt;`&lt;/span&gt;ACCESSOR&lt;span class="sb"&gt;`&lt;/span&gt; defaults to the identity &lt;span class="k"&gt;function&lt;/span&gt;.
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ chicken-doc -i scheme  &lt;span class="c1"&gt;# đầy đủ doc về R5RS&lt;/span&gt;
...
$ chicken-doc -c scheme  &lt;span class="c1"&gt;# danh sách các procedure trong R5RS&lt;/span&gt;
...
$ chicken-doc data-structures
path: &lt;span class="o"&gt;(&lt;/span&gt;data-structures&lt;span class="o"&gt;)&lt;/span&gt;

&lt;span class="o"&gt;==&lt;/span&gt; Unit data-structures

This unit contains a collection of procedures related to data structures. This unit is used by default, unless the
program is compiled with the &lt;span class="sb"&gt;`&lt;/span&gt;-explicit-use&lt;span class="sb"&gt;`&lt;/span&gt; option.
...


$ chicken-doc when &lt;span class="c1"&gt;# tìm từ khóa when, thấy 2 kết quả&lt;/span&gt;
Found &lt;span class="m"&gt;2&lt;/span&gt; matches:
&lt;span class="o"&gt;(&lt;/span&gt;spock when&lt;span class="o"&gt;)&lt;/span&gt;                  &lt;span class="o"&gt;(&lt;/span&gt;when X1 BODY ...&lt;span class="o"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;(&lt;/span&gt;chicken special-forms when&lt;span class="o"&gt;)&lt;/span&gt;  &lt;span class="o"&gt;(&lt;/span&gt;when TEST EXP1 EXP2 ...&lt;span class="o"&gt;)&lt;/span&gt;
$ chicken-doc chicken special-forms when &lt;span class="c1"&gt;# xem kết quả thứ 2&lt;/span&gt;

-- syntax: &lt;span class="o"&gt;(&lt;/span&gt;when TEST EXP1 EXP2 ...&lt;span class="o"&gt;)&lt;/span&gt;

Equivalent to:

  &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt; TEST &lt;span class="o"&gt;(&lt;/span&gt;begin EXP1 EXP2 ...&lt;span class="o"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Pydoc đi kèm với Python có khả năng tương tự:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ pydoc len

Help on built-in &lt;span class="k"&gt;function&lt;/span&gt; len in module builtins:

len&lt;span class="o"&gt;(&lt;/span&gt;obj, /&lt;span class="o"&gt;)&lt;/span&gt;
    Return the number of items in a container.
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Liệt kê các extension có trên "mạng"&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ chicken-install -list
2d-primitives
3viewer
9ML-toolkit
9p
AD
F-operator
R
abnf
accents-substitute
...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Tại thời điểm viết bài, có 781 egg trong kho - hơi ít.&lt;/p&gt;
&lt;h2&gt;Xem các extension library đã cài&lt;/h2&gt;
&lt;p&gt;Dùng lệnh &lt;code&gt;chicken-status&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ chicken-status
apropos ......................................... version: &lt;span class="m"&gt;2&lt;/span&gt;.1.0
check-errors .................................... version: &lt;span class="m"&gt;2&lt;/span&gt;.2.0
chicken-doc ..................................... version: &lt;span class="m"&gt;0&lt;/span&gt;.4.7
chicken-doc-cmd ................................. version: &lt;span class="m"&gt;0&lt;/span&gt;.4.7
fmt ............................................. version: &lt;span class="m"&gt;0&lt;/span&gt;.808
fmt-c ........................................... version: &lt;span class="m"&gt;0&lt;/span&gt;.808
fmt-color ....................................... version: &lt;span class="m"&gt;0&lt;/span&gt;.808
fmt-js .......................................... version: &lt;span class="m"&gt;0&lt;/span&gt;.808
fmt-unicode ..................................... version: &lt;span class="m"&gt;0&lt;/span&gt;.808
iset .............................................. version: &lt;span class="m"&gt;2&lt;/span&gt;.0
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Gỡ extension&lt;/h2&gt;
&lt;p&gt;Sử dụng câu lệnh &lt;code&gt;chicken-uninstall TEN-extension&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Danh sách với thông tin các extension&lt;/h2&gt;
&lt;p&gt;Xem online tai &lt;a href=""&gt;http://eggs.call-cc.org/4/&lt;/a&gt; cho bản CHICKEN stable hiện tại:
version 4.&lt;/p&gt;
&lt;p&gt;Bài viết thực hiện trên:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ lsb_release -r&lt;span class="p"&gt;;&lt;/span&gt; csi -version
Release:    &lt;span class="m"&gt;16&lt;/span&gt;.04

CHICKEN
&lt;span class="o"&gt;(&lt;/span&gt;c&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;2008&lt;/span&gt;-2014, The Chicken Team
&lt;span class="o"&gt;(&lt;/span&gt;c&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;2000&lt;/span&gt;-2007, Felix L. Winkelmann
Version &lt;span class="m"&gt;4&lt;/span&gt;.9.0.1 &lt;span class="o"&gt;(&lt;/span&gt;stability/4.9.0&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;rev 8b3189b&lt;span class="o"&gt;)&lt;/span&gt;
linux-unix-gnu-x86-64 &lt;span class="o"&gt;[&lt;/span&gt; 64bit manyargs dload ptables &lt;span class="o"&gt;]&lt;/span&gt;
bootstrapped &lt;span class="m"&gt;2014&lt;/span&gt;-06-07
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Hết phần 2.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="scheme"></category><category term="lisp"></category><category term="chicken"></category><category term="htdp"></category></entry><entry><title>Tuple comprehension</title><link href="http://pp.pymi.vn/article/tuple_comps/" rel="alternate"></link><published>2018-09-10T00:00:00+07:00</published><updated>2018-09-10T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-09-10:/article/tuple_comps/</id><summary type="html">&lt;p&gt;List comprehension, set/dict comprehension, còn tuple? Generator là gì?&lt;/p&gt;</summary><content type="html">&lt;p&gt;Python có sẵn (builtin) 4 kiểu dữ liệu "compound"/"container" quan trọng,
chúng dùng để chứa các giá trị. &lt;code&gt;list&lt;/code&gt;, &lt;code&gt;tuple&lt;/code&gt;, &lt;code&gt;set&lt;/code&gt;, &lt;code&gt;dict&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Một lập trình viên Python phải nắm thành thạo cả 4 kiểu dữ liệu trên và vận
dụng linh hoạt, biết điểm mạnh yếu của từng kiểu. Bàn về chuyện &lt;em&gt;ấy&lt;/em&gt; lại cần
vài bài dài dòng khác nên sẽ giữ lại "để sau"/"lúc nào rảnh".&lt;/p&gt;
&lt;h2&gt;Comprehension&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Comprehension&lt;/strong&gt; là một đặc sản của Python, một khi biết đến là hay bị nghiện,
thứ cú pháp ngắn gọn sạch sẽ ngọt như mía lùi cũng chính là vũ khí
giết những con ong ham ăn.&lt;/p&gt;
&lt;p&gt;Cú pháp này Python &lt;a href="https://docs.python.org/3/whatsnew/2.0.html"&gt;"vay mượn" mà không bao giờ trả từ
Haskell&lt;/a&gt;
 - một ngôn ngữ
vốn có tiếng khó học và vi diệu. Hãy thử xem 2 ví dụ sau:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;vuong&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tron&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tam giac&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;more_than_four_chars&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
   &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;     &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
   &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;         &lt;span class="n"&gt;more_than_four_chars&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
   &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;more_than_four_chars&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Vuong&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Tam Giac&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;4 dòng code (dòng print không tính)
trên để ta filter (lọc) từ một tập hợp đã cho, thu về các phần tử
thỏa mãn điều kiện (hơn 4 ký tự) rồi map (biến đổi) các ký tự đứng đầu thành
chữ hoa.&lt;/p&gt;
&lt;p&gt;Dù đẹp sạch dễ hiểu lắm rồi, nhưng so với list comprehension:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;vuong&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tron&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tam giac&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Vuong&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Tam Giac&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;thì sự ngắn gọn, đơn giản này đánh bại hoàn toàn cú pháp thông thường.&lt;/p&gt;
&lt;p&gt;Và ta còn làm tương tự được với &lt;code&gt;set&lt;/code&gt;, &lt;code&gt;dict&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;49&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;81&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Tuple comprehension&lt;/h2&gt;
&lt;p&gt;Dễ tưởng tượng ra là ta sẽ có luôn &lt;strong&gt;tuple comprehension&lt;/strong&gt; - vì nghe có vẻ hợp
lý mà:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="nb"&gt;type&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;span class="nc"&gt;generator&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;SAI! khái niệm &lt;strong&gt;tuple comprehension&lt;/strong&gt; không tồn tại. Cùng cú pháp nhưng kết
quả thu được là 1 &lt;strong&gt;generator&lt;/strong&gt;.&lt;/p&gt;
&lt;h2&gt;Vì sao thế?&lt;/h2&gt;
&lt;p&gt;Tuple được tạo ra, ban đầu trông như 1 phiên bản thiếu tính năng của &lt;code&gt;list&lt;/code&gt;,
nhưng mục đích tạo ra tuple là hoàn toàn khác. &lt;code&gt;tuple&lt;/code&gt; được dùng như khái
niệm &lt;code&gt;struct&lt;/code&gt; trong các ngôn ngữ khác, nó là tập hợp của các thông tin khác
nhau:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;student&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Meo&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;0699609096&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;PyMi.vn&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;và khi dùng thì unpack các giá trị ra:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;age&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;phone&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;school&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;student&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;school&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;PyMi&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;vn&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Còn list dùng để lặp qua/ duyệt qua:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;17&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;vuong&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tron&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;tam giac&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;18&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;     &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Hello các bạn mình là {}&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;()))&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;Hello&lt;/span&gt; &lt;span class="n"&gt;các&lt;/span&gt; &lt;span class="n"&gt;bạn&lt;/span&gt; &lt;span class="n"&gt;mình&lt;/span&gt; &lt;span class="n"&gt;là&lt;/span&gt; &lt;span class="n"&gt;Vuong&lt;/span&gt;
&lt;span class="n"&gt;Hello&lt;/span&gt; &lt;span class="n"&gt;các&lt;/span&gt; &lt;span class="n"&gt;bạn&lt;/span&gt; &lt;span class="n"&gt;mình&lt;/span&gt; &lt;span class="n"&gt;là&lt;/span&gt; &lt;span class="n"&gt;Tron&lt;/span&gt;
&lt;span class="n"&gt;Hello&lt;/span&gt; &lt;span class="n"&gt;các&lt;/span&gt; &lt;span class="n"&gt;bạn&lt;/span&gt; &lt;span class="n"&gt;mình&lt;/span&gt; &lt;span class="n"&gt;là&lt;/span&gt; &lt;span class="n"&gt;Tam&lt;/span&gt; &lt;span class="n"&gt;Giac&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Xem thêm tại &lt;a href="https://docs.python.org/3/faq/design.html#why-are-there-separate-tuple-and-list-data-types"&gt;FAQ của
Python&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Ok, vậy chẳng có nghĩa lý gì để "comprehension" ra tuple cả.&lt;/p&gt;
&lt;h2&gt;Lập trình viên phê list comprehension túy lúy!&lt;/h2&gt;
&lt;p&gt;Đã dùng là nghiện, mà nghiện là rất khó tỉnh. List comprehension hấp dẫn vậy
nên thường bị dùng SAI, lạm dụng. Một điều duy nhất quan trọng cần nhớ:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;List comprehension là để tạo ra list.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Thế nhưng không ít lần, nó bị lạm dụng, khi người ta không cần đến list:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;khi chỉ cần đếm "số lượng phần tử"&lt;/li&gt;
&lt;li&gt;để tính tổng&lt;/li&gt;
&lt;li&gt;để in ra màn hình&lt;/li&gt;
&lt;li&gt;để viết những vòng lặp điều kiện phức tạp.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;List comprehension tạo ra 1 list, vậy nên nếu không cần tới list kết quả đó
thì không nên dùng tới list comprehension mà hãy dùng vòng lặp for thông thường:&lt;/p&gt;
&lt;p&gt;Đừng viết:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;upper&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;VUONG&lt;/span&gt;
&lt;span class="n"&gt;TRON&lt;/span&gt;
&lt;span class="n"&gt;TAM&lt;/span&gt; &lt;span class="n"&gt;GIAC&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;19&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Hãy viết:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;names&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;     &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;upper&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;span class="n"&gt;VUONG&lt;/span&gt;
&lt;span class="n"&gt;TRON&lt;/span&gt;
&lt;span class="n"&gt;TAM&lt;/span&gt; &lt;span class="n"&gt;GIAC&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ta không tạo ra 1 cái list vô nghĩa chứa 3 phần tử &lt;code&gt;None&lt;/code&gt; - tức là tiết kiệm bộ
nhớ (memory).&lt;/p&gt;
&lt;p&gt;Đừng viết:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="mi"&gt;450&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Hãy viết:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;23&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;     &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;         &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;24&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mi"&gt;450&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;vì ta sẽ không tạo ra 1 list (tạm) chứa 450 phần tử.&lt;/p&gt;
&lt;p&gt;Và đừng viết:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5000000&lt;/span&gt;&lt;span class="p"&gt;)])&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;25&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="mi"&gt;12499997500000&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Mà hãy viết:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;sum_zero_to_5mil&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;27&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5000000&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;     &lt;span class="n"&gt;sum_zero_to_5mil&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sum_zero_to_5mil&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;28&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;sum_zero_to_5mil&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;28&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="mi"&gt;12499997500000&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;bởi ta sẽ không &lt;em&gt;vô tình&lt;/em&gt; tạo ra một list chiếm tới ~180MB bộ nhớ chỉ để tính
tổng.&lt;/p&gt;
&lt;p&gt;Cách tính&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;33&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;list_size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getsizeof&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5000000&lt;/span&gt;&lt;span class="p"&gt;)])&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;34&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;all_numbers_size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getsizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5000000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;5000000&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;35&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;list_size&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;all_numbers_size&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;list_size&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;all_numbers_size&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mi"&gt;40215168&lt;/span&gt; &lt;span class="mi"&gt;140000000&lt;/span&gt; &lt;span class="mi"&gt;180215168&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Và nếu như số vòng &lt;code&gt;for&lt;/code&gt; hay lệnh &lt;code&gt;if&lt;/code&gt; trong list comprehension nhiều hơn 2,3
nó không còn sạch sẽ và dễ đọc nữa, hãy quay trở về dùng vòng lặp &lt;code&gt;for&lt;/code&gt; thông
thường. &lt;a href="https://wikileaks.org/ciav7p1/cms/page_26607631.html"&gt;Ở CIA họ dạy thế&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;List/set/dict comprehension rất tiện để tạo list/set/dict, nhưng khi không
cần tới list/set/dict kết quả, hãy đừng lạm dụng.&lt;/p&gt;
&lt;h2&gt;Generator&lt;/h2&gt;
&lt;p&gt;Generator sinh ra các phần tử của list tương ứng, nhưng mỗi lần, chỉ có 1
phần tử được tạo ra, vì vậy thường dùng để tiết kiệm RAM. Cú pháp tạo generator
đơn giản chỉ là thay dấu &lt;code&gt;[]&lt;/code&gt; thành &lt;code&gt;()&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;36&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getsizeof&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5000000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;36&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="mi"&gt;19836760&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;37&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;getsizeof&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5000000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;37&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="mi"&gt;88&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;38&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5000000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;38&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="mi"&gt;5833329166668&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;39&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;range&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5000000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# chỗ này mượn tạm luôn dấu () của sum&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;39&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="mi"&gt;5833329166668&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Đã đến lúc lạm dụng &lt;strong&gt;generator&lt;/strong&gt;!!! nó được dùng mọi nơi trong Python3 và
là một cải tiến hấp dẫn của Python3 so với Python2.&lt;/p&gt;
&lt;h2&gt;Hết.&lt;/h2&gt;
&lt;p&gt;HVN at https://pymi.vn and http://www.familug.org&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="tuple"></category><category term="list"></category><category term="comprehension"></category><category term="memory"></category><category term="generator"></category></entry><entry><title>Bắt đầu lập trình CHICKEN Scheme</title><link href="http://pp.pymi.vn/article/scm1/" rel="alternate"></link><published>2018-09-03T00:00:00+07:00</published><updated>2018-09-03T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-09-03:/article/scm1/</id><summary type="html">&lt;p&gt;Cu Hít ở xứ sở LISP - 1 trong 2 ngôn lập trình lâu đời nhất trái đất.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Ba năm trước, khi chúng tôi bắt đầu mở khóa học đầu tiên dạy lập trình Python tại
&lt;a href="https://pymi.vn"&gt;PyMi&lt;/a&gt;, có 8 học viên đi học, hầu hết đều là sysadmin của một
công ty nào đó từng động tới OpenStack/SaltStack/Ansible.
Mới chỉ 3 năm trước, khi những người nghe tới Python tại Việt Nam
là những "hàng hiếm", thì tại thời điểm này, 2018, Python nhan nhản mọi nơi,
các trường (đại) học bắt đầu đưa Python vào chương trình giảng dạy, các
công ty tuyển Python như điên dại, làm Machine Learning, làm Odoo...
các chị em kế toán, ngân hàng bắt đầu kéo nhau đi học code Python!&lt;/p&gt;
&lt;p&gt;Hầu hết số đông đến với Python không phải vì ham mê lập trình, yêu thích những
dòng code sạch sẽ, mà đơn giản bởi (1) công việc yêu cầu (2) kiếm tiền.
Khi đạt được múc đích rồi thì sao? đơn giản là thì thôi. Việc này không có gì
sai cả.&lt;/p&gt;
&lt;p&gt;Vậy còn những người ham mê lập trình, yêu thích code thì làm gì? Họ tiếp tục
đào sâu thêm, học thêm vô vàn kiến thức trong thế giới lập trình, mở rộng
ra những ngôn ngữ mới, cách viết code mới, cách suy nghĩ mới.&lt;/p&gt;
&lt;p&gt;Python thành công bởi ngôn ngữ sạch sẽ, (dẫn tới) cộng đồng đông đảo, (dẫn
tới) các thư viện có sẵn rất nhiều, chất lượng chuẩn, cập nhật hàng ngày.
Hầu hết các ngôn ngữ bạn từng nghe tên sẽ nằm trong nhóm này, những ngôn ngữ
còn lại (có tới hàng ngàn ngôn ngữ lập trình) thường bị xem là "đã chết".
Một ngôn ngữ mã nguồn mở chỉ thực sự chết khi cộng đồng không còn một ai,
những ngôn ngữ bạn chưa nghe tên bao giờ có khi đơn giản vì bạn không quen
ai dùng ngôn ngữ đó.&lt;/p&gt;
&lt;p&gt;Python sinh năm 1991, C sinh năm 197x, thì LISP sinh ra vào năm 1958 (60 năm
trước - chỉ sau Fortran 1 năm - &lt;a href="https://www.familug.org/2016/02/python-python-tuoi-gi.html"&gt;xem bảng tuổi các ngôn
ngữ&lt;/a&gt; ).
Hẵn rất dễ cho rằng LISP đã chết, vì chẳng gặp ai ở Việt Nam dùng nó. Cho tới
khi bạn gặp một anh kỹ sư xây dựng dùng AutoCAD vẽ bản vẽ 2D thiết kế nhà,
và cộng đồng này vẫn truyền tay nhau những đoạn code LISP.&lt;/p&gt;
&lt;p&gt;Cộng đồng quốc tế rất đánh giá cao LISP, và có những thời điểm lịch sử, LISP
được gọi là ngôn ngữ của AI (một hướng phát triển AI rất khác so với
Machine Learning/Deep Learning sau này).&lt;/p&gt;
&lt;p&gt;LISP (&lt;strong&gt;LIS&lt;/strong&gt;t &lt;strong&gt;P&lt;/strong&gt;rocessor) là tên của một gia đình các ngôn ngữ lập trình,
có 2 nhánh (dialect) chính là Common Lisp và Scheme. Cả 2 dialect này đều có
đặc điểm chung sử dụng rất nhiều dấu &lt;code&gt;()&lt;/code&gt; nhưng khi thò tay vào code thì lại có
rất nhiều điểm khác. Một ví dụ viết function tính số gấp đôi của số đầu vào
bằng CHICKEN Scheme (một bản Scheme &lt;em&gt;còn sống&lt;/em&gt;):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;define &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;double&lt;/span&gt; &lt;span class="nv"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;* &lt;/span&gt;&lt;span class="nv"&gt;x&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Gọi function:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;define &lt;/span&gt;&lt;span class="nv"&gt;n&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;double&lt;/span&gt; &lt;span class="nv"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;So với Python:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;double&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;

&lt;span class="n"&gt;n&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;21&lt;/span&gt;
&lt;span class="n"&gt;double&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;n&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nếu xét kỹ, cú pháp của Scheme (&lt;code&gt;define&lt;/code&gt;) ít khái niệm/ký tự/nhất quán hơn
Python (&lt;code&gt;:&lt;/code&gt;, &lt;code&gt;def&lt;/code&gt;, &lt;code&gt;=&lt;/code&gt;, &lt;code&gt;return&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Một khái niệm khác rất quan trọng/phổ biến/nổi bật của LISP là sử dụng
macro (cùng khái niệm Macro trong C - nhưng mạnh mẽ hơn, ở một đẳng cấp hoàn
toàn khác).&lt;/p&gt;
&lt;h2&gt;Các dialect của LISP&lt;/h2&gt;
&lt;h3&gt;Common Lisp&lt;/h3&gt;
&lt;p&gt;Common Lisp để tồn tại sau nhiều năm lịch sử với sự cạnh tranh của hàng ngàn ngôn
ngữ lập trình khác, đã tự biến đổi mình như một sinh vật tiến hóa. Nó gom vào
mình cả lịch sử lẫn những mảnh ghép của cộng đồng, khiến cho Common Lisp khá
đồ sộ, thực dụng. Những từ khóa cơ bản trong Common Lisp như &lt;code&gt;cdr&lt;/code&gt;, &lt;code&gt;car&lt;/code&gt;
là viết tắt của những khái niệm phổ biến những năm 195x nhưng ngày nay không
còn được nhắc tới, cho nên Common Lisp hơi khó đọc đối với dân ngoại đạo.
Bộ tiêu chuẩn Common Lisp dài &lt;a href="https://www.techstreet.com/standards/incits-226-1994-r1999?product_id=56214"&gt;hơn 1000 trang
giấy&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Bản chạy opensource phổ biến nhất của CL là : &lt;a href="http://www.sbcl.org/"&gt;SBCL&lt;/a&gt;
một số bản thương mại rất đắt tiền.&lt;/p&gt;
&lt;h3&gt;Scheme&lt;/h3&gt;
&lt;p&gt;Scheme ra đời vào những năm 197X, với mong muốn có một bản LISP trong sạch,
dễ đọc, nhỏ gọn, không còn chứa những di tích lịch sử, không còn những từ khóa
khó hiểu như &lt;code&gt;cdr&lt;/code&gt;, &lt;code&gt;car&lt;/code&gt;. Scheme được dùng làm ngôn ngữ chính
để dạy học lập trình tại đại học danh giá MIT - nổi tiếng theo đó là SICP
- cuốn sách luôn nằm trong top 10 các cuốn sách về lập trình (xem cuối bài).&lt;/p&gt;
&lt;p&gt;NOTE: sau này vì lý do thực dụng, MIT dạy SICP bằng Python, không dùng Scheme
nữa.&lt;/p&gt;
&lt;p&gt;Scheme được thống nhất thành tiêu chuẩn viết tắt là R5RS, R6RS, R7RS
hay đầy đủ là &lt;strong&gt;Revised^5 Report on the Algorithmic Language Scheme&lt;/strong&gt; -
&lt;strong&gt;R&lt;/strong&gt;evised Revised Revised Revised Revised &lt;strong&gt;R&lt;/strong&gt;eport ... &lt;strong&gt;S&lt;/strong&gt;cheme.
Mỗi lần "revised" như vậy (tăng lên 1 số),
tiêu chuẩn lại thêm bớt gì đó, và chuyện này không phải ai cũng đồng ý, nên
nhiều bản chạy (implementation) quyết định chỉ
hỗ trợ R5RS mà ko chịu lên R6.&lt;/p&gt;
&lt;p&gt;Các bản Scheme nổi bật:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CHICKEN scheme&lt;/li&gt;
&lt;li&gt;Guile (cài sẵn trên các máy Ubuntu)&lt;/li&gt;
&lt;li&gt;Chez scheme&lt;/li&gt;
&lt;li&gt;Gambit&lt;/li&gt;
&lt;li&gt;MIT Scheme&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Clojure&lt;/h3&gt;
&lt;p&gt;Clojure nổi bật là 1 LISP-dialect HIỆN ĐẠI. Nó chạy trên JVM (như Java)
và được dùng phổ biến trong các doanh nghiệp công nghệ - tại thời điểm
năm 2018. Xem thêm tại &lt;a href="https://clojure.org/about/lisp"&gt;trang chủ của Clojure&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Racket&lt;/h3&gt;
&lt;p&gt;Racket từng là PLT Scheme, từng tuân theo tiêu chuẩn Scheme (S_RS) cho tới khi
nó tiến hóa thành một thứ khác rất nhiều. Racket cũng là một ngôn
ngữ hiện đại trong gia đình LISP.&lt;/p&gt;
&lt;h3&gt;Emacs Lisp&lt;/h3&gt;
&lt;p&gt;LISP dialect dùng để phát triển các tính năng cho editor Emacs - một chương
trình chỉnh sửa code lâu đời, được ưa thích trong giới lập trình viên.&lt;/p&gt;
&lt;h2&gt;Học để làm gì?&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Vui&lt;/li&gt;
&lt;li&gt;Mở mang suy nghĩ, thay đổi cách nghĩ - khi trên tay bạn chỉ có một cái búa
thì mọi thứ bạn thấy đều là cái đinh.&lt;/li&gt;
&lt;li&gt;Để thực hành khi đọc những cuốn sách hay nổi tiếng: SICP, HTDP&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Có để làm được không?&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Cái này tùy vào chuyện bạn làm gì. Nếu lập trình nhúng có thể bạn sẽ dùng 1
LISP dialect X, nhưng viết micro service tại các doanh nghiệp dùng Java,
Clojure lại là lựa chọn hấp dẫn hơn. Có thể tham khảo hướng dẫn học
Common Lisp năm 2018 &lt;a href="http://stevelosh.com/blog/2018/08/a-road-to-common-lisp/"&gt;A road to Common
Lisp&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Những người học dùng LISP thường đã có công việc ổn định, không còn lo học
ngôn ngữ đầu tiên để xin việc - vậy nên chuyện có mang đi làm được hay không
không quá quan trọng ở đây. Học LISP xong, theo một cách nào đó, sẽ khiến
bạn trở thành lập trình viên Python giỏi hơn.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Loạt bài này sử dụng &lt;a href="http//call-cc.org"&gt;CHICKEN scheme&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Cài đặt&lt;/h2&gt;
&lt;p&gt;Trên trang chủ của các bản LISP đều có hướng dẫn cài đặt chi tiết.
Trên ubuntu 16.04, &lt;code&gt;guile&lt;/code&gt; có sẵn, cài CHICKEN scheme chỉ bằng một câu lệnh:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo apt install -y chicken-bin
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Lệnh này cài bản &lt;code&gt;Version: 4.9.X&lt;/code&gt;, cài xong bật lên để gõ code như python
interpreter:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ csi
CHICKEN
&lt;span class="o"&gt;(&lt;/span&gt;c&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;2008&lt;/span&gt;-2014, The Chicken Team
&lt;span class="o"&gt;(&lt;/span&gt;c&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="m"&gt;2000&lt;/span&gt;-2007, Felix L. Winkelmann
Version &lt;span class="m"&gt;4&lt;/span&gt;.9.0.1 &lt;span class="o"&gt;(&lt;/span&gt;stability/4.9.0&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;rev 8b3189b&lt;span class="o"&gt;)&lt;/span&gt;
    linux-unix-gnu-x86-64 &lt;span class="o"&gt;[&lt;/span&gt; 64bit manyargs dload ptables &lt;span class="o"&gt;]&lt;/span&gt;
    bootstrapped &lt;span class="m"&gt;2014&lt;/span&gt;-06-07

&lt;span class="c1"&gt;#;1&amp;gt; (+ 1 2 3 4 5)&lt;/span&gt;
    &lt;span class="m"&gt;15&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Để hỗ trợ chỉnh sửa tiện hơn, trên Ubuntu nên cài thêm &lt;code&gt;rl-wrap&lt;/code&gt; và chạy
&lt;code&gt;rl-wrap csi&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;Tài liệu&lt;/h2&gt;
&lt;p&gt;Sách free online thì có 2 cuốn đã lừng danh&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://mitpress.mit.edu/sites/default/files/sicp/index.html"&gt;SICP -  Structure and Interpretation of Computer Programs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://htdp.org/2018-01-06/Book/"&gt;HTDP - How to Design Programs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Các bài viết&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://www.draketo.de/proj/py2guile/"&gt;"Nhật ký" từ Python qua Guile Scheme&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Lập trình viên Python có thể xem phần hướng dẫn cơ bản dành riêng cho Python
developer trên &lt;a href="http://wiki.call-cc.org/chicken-for-python-programmers"&gt;wiki của CHICKEN&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.artima.com/weblogs/viewpost.jsp?thread=251474"&gt;Hành trình của Python dev vào thế giới Scheme&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Trên đây là tài liệu về Scheme, tài liệu Common Lisp cũng không thiếu,
và đều online/free - xem tại &lt;a href="http://stevelosh.com/blog/2018/08/a-road-to-common-lisp/"&gt;A road to Common
Lisp&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;Emacs&lt;/h2&gt;
&lt;p&gt;Khi lập trình LISP, người dùng được khuyên sử dụng Emacs đặc biệt là
common lisp với SLIME. Đây không phải điều bắt buộc, nhưng nếu chưa từng dùng
Emacs, đây là một cơ hội tuyệt vời để trải nghiệm (vì emacs dùng Emacs Lisp).&lt;/p&gt;
&lt;p&gt;Hết phần 1.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="scheme"></category><category term="lisp"></category><category term="chicken"></category><category term="htdp"></category></entry><entry><title>Làm app giao diện đồ hoạ với Python</title><link href="http://pp.pymi.vn/article/gui/" rel="alternate"></link><published>2018-08-18T00:00:00+07:00</published><updated>2018-08-18T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-08-18:/article/gui/</id><summary type="html">&lt;p&gt;Không gì là không thể - đã dễ, lại còn đẹp&lt;/p&gt;</summary><content type="html">&lt;p&gt;Giao diện đồ hoạ (GUI - Graphic User Interface) vốn từng là một phần không thể thiếu khi nói về lập trình. Dù học ngôn ngữ lập trình nào, người ta cũng nghĩ tới chuyện "làm sao để có giao diện đồ hoạ".&lt;/p&gt;
&lt;p&gt;Thế giới thay đổi, thứ từng quan trọng của ngày hôm qua thì hôm nay chưa chắc đã cần tới. Thời đại tất cả mọi thứ đều chuyển lên web, thì web/app mobile trở thành giao diện để tương tác với người dùng, chứ không phải các phần mềm có giao diện chạy trên máy tính như trước kia.
Giờ đây người ta: nghe nhạc trên web, xem film trên web, chơi game trên web, soạn thảo văn bản trên web... khó còn ứng dụng nào không đưa lên web nữa. Vậy nên về mặt "sự nghiệp", có vẻ như bạn nên đầu tư vào kỹ năng làm web thay vì học để tạo một app trên desktop như cách đây chục năm.&lt;/p&gt;
&lt;p&gt;Dĩ nhiên, GUI không ngay lập tức biến mất, vẫn có nhu cầu sử dụng, vẫn có người dùng, vẫn có hàng tá thư viện đồ hoạ tồn tại từ lâu (và vẫn tiếp tục phát triển), vẫn có những game mà chỉ chơi được trên máy tính do yêu cầu về hiệu năng mà web không đáp ứng nổi (như Half-Life/ đế chế / đua xe ...).&lt;/p&gt;
&lt;p&gt;Python hỗ trợ không ít các thư viện làm GUI app, có thể kể tới: Qt, WxWidgets, Tkinter, &lt;a href="https://kivy.org/"&gt;Kivy (làm cả app mobile)&lt;/a&gt;... xem đầy đủ tại:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=""&gt;https://docs.python.org/3/faq/gui.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=""&gt;https://www.python.org/about/apps/#desktop-guis&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=""&gt;https://docs.python-guide.org/scenarios/gui/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/Qt_(software)"&gt;Qt&lt;/a&gt; là nền tảng phát triển ứng dụng dùng trong công nghiệp, hỗ trợ mọi hệ điều hành phổ biến, và rất "xịn". Nếu có nhu cầu làm ứng dụng desktop với Python, hãy đầu tư vào Qt để có một sản phẩm đẳng cấp, không kém bất kỳ nền tảng nào khác.&lt;/p&gt;
&lt;p&gt;Tk là hệ thống thư viện đồ hoạ đơn giản, dễ dùng, chạy trên cả 3 hệ điều hành phổ biến: Windows, Ubuntu, OSX/MacOS và điều quan trọng nhất: thư viện &lt;code&gt;tkinter&lt;/code&gt; đi kèm mọi bộ cài Python, nên muốn dùng không cần phải cài đặt gì thêm.&lt;/p&gt;
&lt;p&gt;Bài viết hướng dẫn tạo một chương trình đồ hoạ sử dụng &lt;code&gt;tkinter&lt;/code&gt; với Python 3.6, thực hiện trên MacOS Sierra (10.12.6).&lt;/p&gt;
&lt;h2&gt;Khái niệm cơ bản về một chương trình giao diện đồ hoạ.&lt;/h2&gt;
&lt;p&gt;Một chương trình có giao diện đồ hoạ là một chương trình luôn chạy cho tới khi người dùng thoát chương trình. Dễ suy ra ở đây có chạy 1 vòng lặp vô hạn để luôn hiển thị giao diện (gọi là main loop). Chương trình này hoạt động dựa trên những tương tác của người dùng và phản ứng với các tương tác đó (bấm nút này thì chạy cái kia). Loại chương trình như vậy thuộc loại mô hình "Event-driven programming".&lt;/p&gt;
&lt;p&gt;Các thao tác của người dùng được gọi là các &lt;strong&gt;event&lt;/strong&gt;,
các hành động tương ứng của chương trình (các function) được gọi là các &lt;strong&gt;callback&lt;/strong&gt;, gắn vào các bộ phận giao diện. Gắn callback vào nút bấm thì khi ta bấm nút, callback sẽ được gọi.&lt;/p&gt;
&lt;p&gt;Các bộ phận giao diện như nút bấm, chữ, ô nhập ký tự ... được gọi là các &lt;strong&gt;widget&lt;/strong&gt;.&lt;/p&gt;
&lt;h2&gt;Lập trình GUI với Tkinter&lt;/h2&gt;
&lt;p&gt;Code gõ trực tiếp trên IPython:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;tkinter&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;tk&lt;/span&gt;

&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Frame&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Tk&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mainloop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Nếu Tk hoat động trên máy bạn, ngay lập tức một cửa sổ trắng tinh sẽ hiện ra.&lt;/p&gt;
&lt;p&gt;&lt;img alt="emptygui" src="http://pp.pymi.vn/images/gui.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Tk()&lt;/code&gt; tạo một cửa sổ chính  (main window), &lt;code&gt;Frame&lt;/code&gt; là một widget có khả năng chứa các widget khác. Gọi function &lt;code&gt;mainloop()&lt;/code&gt; để chạy giao diện mãi mãi cho tới khi người dùng đóng lại.&lt;/p&gt;
&lt;h3&gt;Các widget&lt;/h3&gt;
&lt;p&gt;Tkinter có sẵn 17 widget:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Button&lt;/code&gt; &lt;code&gt;Canvas&lt;/code&gt; &lt;code&gt;Checkbutton&lt;/code&gt; &lt;code&gt;Entry&lt;/code&gt; &lt;code&gt;Frame&lt;/code&gt; &lt;code&gt;Label&lt;/code&gt; &lt;code&gt;Listbox&lt;/code&gt; &lt;code&gt;Menu&lt;/code&gt; &lt;code&gt;Menubutton&lt;/code&gt; &lt;code&gt;Message&lt;/code&gt; &lt;code&gt;Radiobutton&lt;/code&gt; &lt;code&gt;Scale&lt;/code&gt; &lt;code&gt;Scrollbar&lt;/code&gt; &lt;code&gt;Text&lt;/code&gt; &lt;code&gt;Spinbox&lt;/code&gt; &lt;code&gt;LabelFrame&lt;/code&gt; &lt;code&gt;PanedWindow&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Sau đây ta viết một GUI app có hiển thị tiêu đề (Label), có một ô nhập địa chỉ trang web (Entry), có một nút bấm để kiểm tra status của trang web (Button).&lt;/p&gt;
&lt;p&gt;Bài viết sử dụng thư viện &lt;code&gt;requests&lt;/code&gt; (cài bằng &lt;code&gt;pip install requests&lt;/code&gt;), nếu chưa biết dùng &lt;a href="http://pymi.vn/blog/virtualenv/"&gt;pip&lt;/a&gt; hay không cài được, hãy xem ví dụ tương tự mà không kết nối internet tại &lt;a href="https://docs.python.org/3/library/tkinter.html#a-simple-hello-world-program"&gt;đây&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# on Ubuntu, requires install: `sudo apt-get install -y python3-tk`&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;tkinter&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;tk&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;requests&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Application&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Frame&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;master&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="nb"&gt;super&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="fm"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;master&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pack&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;create_widgets&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;create_widgets&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;label&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Label&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;PyMi.vn checker&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;label&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pack&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;entrythingy&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Entry&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;entrythingy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pack&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;StringVar&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;entrythingy&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;textvariable&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;entrythingy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bind&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&amp;lt;Key-Return&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;check_site&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hi_there&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Button&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hi_there&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;text&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Check web site up/down. Enter URL:&amp;quot;&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hi_there&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;command&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;check_site&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;hi_there&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pack&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;quit&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Button&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;QUIT&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;destroy&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;quit&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pack&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;check_site&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;None&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;contents&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;https://pymi.vn&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;startswith&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;http&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
            &lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;http://{}&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="n"&gt;resp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;requests&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;timeout&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;{} response: {}&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;resp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;status_code&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;


&lt;span class="n"&gt;root&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tk&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Tk&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Application&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;master&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;root&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;master&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;My checker app&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;master&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;minsize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;300&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;200&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mainloop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Code trên:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;phần init chỉ là thủ tục&lt;/li&gt;
&lt;li&gt;tạo một label với text cần hiển thị&lt;/li&gt;
&lt;li&gt;tạo entry để người dùng nhập nội dung, gán giá trị người dùng nhập vào &lt;code&gt;self.contents&lt;/code&gt;, bind widget entry với phím Enter (trên MacOS gọi là return), và chạy method &lt;code&gt;check_site&lt;/code&gt; khi người dùng gõ enter.&lt;/li&gt;
&lt;li&gt;tạo nút bấm với dòng chữ "Check site", gọi method &lt;code&gt;check_site&lt;/code&gt; khi người dùng bấm nút&lt;/li&gt;
&lt;li&gt;tạo nút bấm "Quit" để thoát chương trình&lt;/li&gt;
&lt;li&gt;set thanh tiêu đề &lt;code&gt;title&lt;/code&gt; và kích thước cho chương trình qua &lt;code&gt;app.master&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Kết quả:&lt;/p&gt;
&lt;p&gt;&lt;img alt="checker" src="http://pp.pymi.vn/images/checker.png"&gt;&lt;/p&gt;
&lt;p&gt;Danh sách đầy đủ các widget xem tại &lt;a href="https://github.com/python/cpython/blob/3.6/Lib/tkinter/__init__.py"&gt;https://github.com/python/cpython/blob/3.6/Lib/tkinter/&lt;strong&gt;init&lt;/strong&gt;.py&lt;/a&gt;  - search &lt;code&gt;(Widget&lt;/code&gt; (các subclass của class Widget).&lt;/p&gt;
&lt;p&gt;Tk nhẹ gọn, có sẵn, dễ dùng, đủ dùng khi bạn thấy đủ. Bao giờ thấy ngột ngạt, có lẽ lại chuyển sang Qt, các khái niệm lập trình giao diện dù dùng library/framework nào cũng đều tương tự nhau.&lt;/p&gt;
&lt;h2&gt;Tham khảo&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Tkinter: https://docs.python.org/3/library/tkinter.html&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Hết.
HVN @ &lt;a href=""&gt;https://pymi.vn&lt;/a&gt; and &lt;a href=""&gt;https://www.familug.org/&lt;/a&gt;&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="gui"></category><category term="tk"></category></entry><entry><title>Viết một chatbot đơn giản với Python3</title><link href="http://pp.pymi.vn/article/viet-mot-chatbot-don-gian-voi-python3/" rel="alternate"></link><published>2018-06-05T00:00:00+07:00</published><updated>2018-06-05T00:00:00+07:00</updated><author><name>tung491</name></author><id>tag:pp.pymi.vn,2018-06-05:/article/viet-mot-chatbot-don-gian-voi-python3/</id><summary type="html">&lt;p&gt;Làm FaceBook chatbot còn dễ hơn rủ em gái bàn bên đi xem phim...&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Chatbot là gì?&lt;/h2&gt;
&lt;p&gt;Trước khi thò tay vào hì hục code, ta cần hiểu chatbot là gì đã?&lt;/p&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/Chatbot"&gt;Chatbot&lt;/a&gt; là một chương trình thực hiện cuộc hội thoại qua phương pháp gửi nhận văn bản hoặc các object như hình ảnh, file, ... Chú ý Chatbot không nhất thiết là phải thông minh, là phải dùng trí tuệ nhân tạo, etc ...&lt;/p&gt;
&lt;p&gt;Có bao giờ sắp đến giao thừa hay một dịp mà bạn muốn nhắn tin cho nhiều người vào 12h đêm mà bạn không thể dậy được, hoặc bạn quá lười để làm một việc lặp đi lặp lại? Câu trả lời là viết một chatbot và hẹn giờ cho nó.&lt;/p&gt;
&lt;h2&gt;Viết chatbot&lt;/h2&gt;
&lt;p&gt;Trong bài viết này mình sử dụng 2 thư viện có sẵn trên mạng là &lt;a href="https://fbchat.readthedocs.io/en/master/"&gt;fbchat&lt;/a&gt;, &lt;a href="https://schedule.readthedocs.io/en/stable/"&gt;schedule&lt;/a&gt; do đó bạn cần tạo &lt;a href="http://pymi.vn/blog/virtualenv/"&gt;virtualenv&lt;/a&gt; trước tiên, sau đó dùng pip để cài 2 lib trên rồi tạo một file code python tùy ý, ở đây mình dùng &lt;code&gt;chatbot.py&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Đầu tiên, import những lib mình cần 🎉&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;logging&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;threading&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Thread&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;fbchat&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Client&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;fbchat.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Message&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ThreadType&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;schedule&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Sau đó tạo một class &lt;code&gt;Bot&lt;/code&gt; kế thừa &lt;code&gt;Client&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Bot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Client&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Tạo 1 function trong class &lt;code&gt;Bot&lt;/code&gt; để thực hiện gửi tin nhắn, dưới đây là code của mình:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Bot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Client&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;do_something&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="c1"&gt;#Đổi tên function cho phù hợp&lt;/span&gt;
        &lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;basicConfig&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;level&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;INFO&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;lst_id&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;# List chứa fb id của những người bạn muốn gửi&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;user_id&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;lst_id&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Message&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Chúc mừng năm mới&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                      &lt;span class="n"&gt;thread_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ThreadType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;USER&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sendLocalImage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/home/dosontung007/Pictures/wallpaper.png&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Message&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Chúc mừng năm mới&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                                &lt;span class="n"&gt;thread_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ThreadType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;USER&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Sent success to &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Và để nhận được tin nhắn từ những người gửi cho mình cho mình , ta viết function &lt;code&gt;onMessage&lt;/code&gt; trong class &lt;code&gt;Bot&lt;/code&gt; và xử lí các tin nhắn đó:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;onMessage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;message_object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;author_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;thread_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;lst_msg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Chúc mừng năm mới&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;author_id&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;uid&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;message_object&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;lst_msg&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Message&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Năm mới chúc .....&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                  &lt;span class="n"&gt;thread_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;author_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                  &lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Tham khảo thêm tại https://fbchat.readthedocs.io/en/master/&lt;/p&gt;
&lt;p&gt;Job thực hiện việc gửi tin nhắn trong này đó là:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Bot(os.environ['USERNAME_'], os.environ['PASSWORD']).do_something()&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Class &lt;code&gt;Bot&lt;/code&gt; kế thừa &lt;code&gt;Client&lt;/code&gt;, khi tạo một Bot object, ta cần truyền 2 tham số là username và password của Facebook của bạn. Do đó bạn cần set value cho 2 var &lt;code&gt;USERNAME_&lt;/code&gt; và &lt;code&gt;PASSWORD&lt;/code&gt; bằng câu lệnh &lt;code&gt;export var=value&lt;/code&gt; trong bash trước khi chạy chương trình (vì ta không muốn ghi trực tiếp password vào file code - lộ mật khẩu nếu up lên GitHub). Lưu ý &lt;code&gt;USERNAME_&lt;/code&gt; chứ không phải &lt;code&gt;USERNAME&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Bây giờ còn một công việc duy nhất là hẹn giờ cho job làm việc thôi!&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;job&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;Bot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;USERNAME_&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;PASSWORD&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;do_something&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;send_msg&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;schedule&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;every&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;day&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;00:00&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;do&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;job_that_executes_once&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;schedule&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run_pending&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Thay đổi &lt;code&gt;00:00&lt;/code&gt; bằng thời gian mà bạn muốn hẹn giờ.&lt;/p&gt;
&lt;p&gt;Để nhận được message, ta sử dụng function &lt;code&gt;listen&lt;/code&gt; từ &lt;code&gt;Client&lt;/code&gt; , về cơ bản &lt;code&gt;listen&lt;/code&gt; khi chạy sẽ truyền các arguments vào &lt;code&gt;onMessage&lt;/code&gt; mỗi lần Facebook bạn có event mới (VD: có người nhắn cho bạn, bạn nhắn cho người khác hoặc tin nhắn trong nhóm, ...):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;reply_msg&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;Bot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;USERNAME_&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;PASSWORD&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;listen&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ở function main, mình sử dụng lib threading để chạy song song 2 job là reply_msg và send_msg :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;send_msg&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;reply_msg&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Cuối cùng cũng xong 🎉.Sau tất cả, đây là một con chatbot hoàn chỉnh :&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;logging&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;threading&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Thread&lt;/span&gt;

&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;fbchat&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Client&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;fbchat.models&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Message&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ThreadType&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;schedule&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Bot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Client&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;onMessage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;message_object&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;author_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;thread_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;kwargs&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;lst_msg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Chúc mừng năm mới&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;author_id&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;uid&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;message_object&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;lst_msg&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Message&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Năm mới chúc .....&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                      &lt;span class="n"&gt;thread_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;author_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                      &lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ThreadType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;USER&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;do_something&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;basicConfig&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;level&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;INFO&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;user_ids&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;100012610305665&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;user_id&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;user_ids&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Message&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Chúc mừng năm mới&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                      &lt;span class="n"&gt;thread_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ThreadType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;USER&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sendLocalImage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/home/dosontung007/Pictures/wallpaper.png&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;message&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;Message&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Chúc mừng năm mới&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
                                &lt;span class="n"&gt;thread_id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;user_id&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;thread_type&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;ThreadType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;USER&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;logging&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Sent success to &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;100012610305665&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;job_that_executes_once&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;Bot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;USERNAME_&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;PASSWORD&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;something&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;schedule&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CancelJob&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;reply_msg&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;Bot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;USERNAME_&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;PASSWORD&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;listen&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;send_msg&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;schedule&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;every&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;day&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;00:00&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;do&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;job_that_executes_once&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;schedule&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;run_pending&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;thread1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;send_msg&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;thread2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;target&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;reply_msg&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;thread1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;thread2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="n"&gt;thread1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;thread2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;


&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Bây giờ export username, password rồi chạy thôi. Và đây là thành quả:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Imgur" src="https://i.imgur.com/VldjbDi.png"&gt;&lt;/p&gt;
&lt;p&gt;Nếu bạn muốn chạy luôn mà không cần hẹn giờ thì chỉ cần xoá function &lt;code&gt;job_that_executes_once&lt;/code&gt; và thay function &lt;code&gt;send_msg&lt;/code&gt; bằng:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;send_msg&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;Bot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;USERNAME_&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;environ&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;PASSWORD&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;do_something&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;HẾT.&lt;/p&gt;
&lt;p&gt;TUNG491 at http://pymi.vn/&lt;/p&gt;</content><category term="Trang chủ"></category><category term="Python"></category><category term="chatbot"></category><category term="facebook"></category><category term="bot"></category><category term="thread"></category></entry><entry><title>Dùng .NET Framework với IronPython</title><link href="http://pp.pymi.vn/article/ironpython-addreference/" rel="alternate"></link><published>2018-06-02T00:00:00+07:00</published><updated>2018-06-04T00:00:00+07:00</updated><author><name>htlcnn</name></author><id>tag:pp.pymi.vn,2018-06-02:/article/ironpython-addreference/</id><summary type="html">&lt;p&gt;Giới thiệu cách thêm các công cụ của .NET Framework vào IronPython.&lt;/p&gt;</summary><content type="html">&lt;h2&gt;Assembly là gì&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://msdn.microsoft.com/en-us/library/ms973231.aspx#assenamesp_topic4"&gt;Assembly&lt;/a&gt; (số nhiều: assemblies) là một file được tạo ra bởi quá trình compile một ứng dụng .NET. Nó có thể có đuôi &lt;code&gt;.dll&lt;/code&gt; hoặc &lt;code&gt;.exe&lt;/code&gt;. .NET Framework có sẵn rất nhiều assemblies (chính là thành phần &lt;a href="https://msdn.microsoft.com/en-us/library/gg145045.aspx"&gt;Class Library trong .NET Framework&lt;/a&gt;), cũng tương tự như Python có sẵn rất nhiều &lt;a href="https://docs.python.org/3/library/index.html"&gt;standard libraries&lt;/a&gt; vậy.&lt;/p&gt;
&lt;h2&gt;AddReference .NET Assemblies&lt;/h2&gt;
&lt;p&gt;Khi lập trình các ngôn ngữ .NET khác như C# hay VB.NET, dùng Visual Studio, muốn sử dụng các công cụ trong .NET Framework thì bạn phải thêm "Reference" vào project browser. IronPython có 1 module hỗ trợ "Add Reference" vào script là &lt;code&gt;clr&lt;/code&gt;. Các methods Add Reference trong IronPython:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Sử dụng một trong các methods sau&lt;/span&gt;
&lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReference&lt;/span&gt;
&lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReferenceByName&lt;/span&gt;
&lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReferenceByPartialName&lt;/span&gt;
&lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReferenceToFile&lt;/span&gt;
&lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReferenceToFileAndPath&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;clr.AddReference&lt;/code&gt; nhận vào 1 đối tượng &lt;a href="https://msdn.microsoft.com/en-us/library/system.reflection.assembly(v=vs.110).aspx"&gt;System.Reflection.Assembly&lt;/a&gt;, hoặc &lt;strong&gt;full name&lt;/strong&gt; của assembly (vd &lt;code&gt;clr.AddReference("System.Drawing, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a")&lt;/code&gt;), hoặc &lt;strong&gt;partial name&lt;/strong&gt; của assembly (vd &lt;code&gt;clr.AddReference("System.Drawing")&lt;/code&gt;). Khi dùng partial name, IronPython sẽ tìm file dll ở trong &lt;a href="https://docs.microsoft.com/en-us/dotnet/framework/app-domains/gac"&gt;Global Assembly Cache (GAC)&lt;/a&gt;. Mình thường dùng cách thứ 3: truyền vào partial name cho ngắn gọn.
Xem các assemblies đã add ở &lt;code&gt;clr.References&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;\&lt;span class="n"&gt;Users&lt;/span&gt;\&lt;span class="n"&gt;HTL&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;c:\Program Files (x86)\IronPython 2.7\ipy.exe&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;IronPython&lt;/span&gt; &lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.40&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;NET&lt;/span&gt; &lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;30319.42000&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;copyright&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;credits&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;license&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;clr&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;System.Drawing&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;References&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;mscorlib&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Culture&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;neutral&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PublicKeyToken&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;b77a5c561934e089&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Culture&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;neutral&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PublicKeyToken&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;b77a5c561934e089&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SQLite&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.40&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Culture&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;neutral&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PublicKeyToken&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="n"&gt;f709c5b71&lt;/span&gt;
&lt;span class="mf"&gt;3576e1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Wpf&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.40&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Culture&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;neutral&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PublicKeyToken&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="n"&gt;f709c5b713576e1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Drawing&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Version&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Culture&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;neutral&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PublicKeyToken&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;b03f5f7f11d50a3a&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Sau khi &lt;code&gt;AddReference&lt;/code&gt;, phải &lt;code&gt;import&lt;/code&gt; các namespaces có trong assemblies để sử dụng trong IronPython. Cú pháp import như bình thường:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;System&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Drawing&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Drawing&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Actions&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;NamespaceTracker&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Drawing&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Thắc mắc hay gặp: Mình muốn sử dụng 1 công cụ trong .NET Framework thì biết tên assembly là gì để &lt;code&gt;AddReference&lt;/code&gt;, biết namespace nào để &lt;code&gt;import&lt;/code&gt;? Trả lời với từ khóa tìm kiếm: &lt;code&gt;Tên_công_cụ msdn&lt;/code&gt; (VD &lt;a href="http://lmgtfy.com/?s=d&amp;amp;q=System+Environment+msdn"&gt;System Environment msdn&lt;/a&gt;). Dùng phần &lt;strong&gt;Assembly&lt;/strong&gt; để &lt;code&gt;AddReference&lt;/code&gt;, phần &lt;strong&gt;Namespace&lt;/strong&gt; để &lt;code&gt;import&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Khi chạy ipy.exe, IronPython đã AddReference sẵn tới mscorlib.dll và System.dll &lt;a href="http://ironpython.net/documentation/dotnet/dotnet.html#assemblies-loaded-by-default"&gt;&lt;sup&gt;[1]&lt;/sup&gt;&lt;/a&gt;. Khi đó chỉ việc &lt;code&gt;import&lt;/code&gt; các namespaces có trong 2 assemblies này mà không phải AddRerence.&lt;/p&gt;
&lt;h2&gt;AddReference các Assemblies khác&lt;/h2&gt;
&lt;p&gt;Ngoài các assemblies có trong .NET Framework, còn có các assemblies khác đi kèm với các phần mềm cài vào Windows, hoặc assemblies được compiled từ chính IronPython. Cú pháp AddReference tương tự như trên, với lưu ý là &lt;code&gt;AddReference&lt;/code&gt; khi đó sẽ tìm assemblies trong GAC hoặc &lt;code&gt;sys.path&lt;/code&gt;. Nếu không muốn append đường dẫn tới folder chứa file .dll thì có thể dùng &lt;code&gt;AddReferenceToFileAndPath&lt;/code&gt;. Phải chạy đúng phiên bản IronPython 32bit/64bit tương ứng với &lt;a href="https://msdn.microsoft.com/en-us/library/hh264221.aspx#Target%20Platform"&gt;Target Platform&lt;/a&gt; mà file assembly được compiled.&lt;/p&gt;
&lt;p&gt;Ví dụ file &lt;code&gt;RevitAPI.dll&lt;/code&gt; được compiled với Target Platform là x64 (64-bit), nếu chạy &lt;code&gt;ipy.exe&lt;/code&gt; (32-bit) sẽ không &lt;code&gt;AddReference&lt;/code&gt; được:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;\&lt;span class="n"&gt;Users&lt;/span&gt;\&lt;span class="n"&gt;HTL&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;C:\Program Files (x86)\IronPython 2.7\ipy.exe&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;IronPython&lt;/span&gt; &lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.40&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;NET&lt;/span&gt; &lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;30319.42000&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;copyright&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;credits&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;license&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;clr&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;C:\Program Files\Autodesk\Revit 2018&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;RevitAPI&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Traceback&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;most&lt;/span&gt; &lt;span class="n"&gt;recent&lt;/span&gt; &lt;span class="n"&gt;call&lt;/span&gt; &lt;span class="n"&gt;last&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="n"&gt;File&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&amp;lt;stdin&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;module&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="ne"&gt;IOError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Could&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt; &lt;span class="n"&gt;reference&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;assembly&lt;/span&gt; &lt;span class="n"&gt;RevitAPI&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Runtime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ClrModule&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CodeContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;name&lt;/span&gt;
&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Runtime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ClrModule&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CodeContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;refe&lt;/span&gt;
&lt;span class="n"&gt;rence&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Runtime&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ClrModule&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CodeContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;
&lt;span class="n"&gt;ferences&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ActionCallInstruction&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="mf"&gt;2.&lt;/span&gt;&lt;span class="n"&gt;Run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterpretedFra&lt;/span&gt;
&lt;span class="n"&gt;me&lt;/span&gt; &lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterpretedFrame&lt;/span&gt; &lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LightLambda&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Run4&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;T0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;TRet&lt;/span&gt;&lt;span class="p"&gt;](&lt;/span&gt;&lt;span class="n"&gt;T0&lt;/span&gt; &lt;span class="n"&gt;arg0&lt;/span&gt;
&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T1&lt;/span&gt; &lt;span class="n"&gt;arg1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T2&lt;/span&gt; &lt;span class="n"&gt;arg2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T3&lt;/span&gt; &lt;span class="n"&gt;arg3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Dynamic&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;UpdateDelegates&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;UpdateAndExecute3&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;T0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;TRet&lt;/span&gt;&lt;span class="p"&gt;](&lt;/span&gt;&lt;span class="n"&gt;CallSite&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;
&lt;span class="n"&gt;ite&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T0&lt;/span&gt; &lt;span class="n"&gt;arg0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T1&lt;/span&gt; &lt;span class="n"&gt;arg1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T2&lt;/span&gt; &lt;span class="n"&gt;arg2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FuncCallInstruction&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="mf"&gt;6.&lt;/span&gt;&lt;span class="n"&gt;Run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterpretedFrame&lt;/span&gt;
 &lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterpretedFrame&lt;/span&gt; &lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LightLambda&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Run4&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;T0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;TRet&lt;/span&gt;&lt;span class="p"&gt;](&lt;/span&gt;&lt;span class="n"&gt;T0&lt;/span&gt; &lt;span class="n"&gt;arg0&lt;/span&gt;
&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T1&lt;/span&gt; &lt;span class="n"&gt;arg1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T2&lt;/span&gt; &lt;span class="n"&gt;arg2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T3&lt;/span&gt; &lt;span class="n"&gt;arg3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Compiler&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Ast&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CallExpression&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Invoke1Instruction&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterpretedF&lt;/span&gt;
&lt;span class="n"&gt;rame&lt;/span&gt; &lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;InterpretedFrame&lt;/span&gt; &lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Scripting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Interpreter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LightLambda&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Run2&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;T0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;T1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;TRet&lt;/span&gt;&lt;span class="p"&gt;](&lt;/span&gt;&lt;span class="n"&gt;T0&lt;/span&gt; &lt;span class="n"&gt;arg0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T1&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;
&lt;span class="n"&gt;rg1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Compiler&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PythonScriptCode&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RunWorker&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CodeContext&lt;/span&gt; &lt;span class="n"&gt;ctx&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Compiler&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PythonScriptCode&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Scope&lt;/span&gt; &lt;span class="n"&gt;scope&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
   &lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;IronPython&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Hosting&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PythonCommandLine&lt;/span&gt;&lt;span class="o"&gt;.&amp;lt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;c__DisplayClass1&lt;/span&gt;&lt;span class="o"&gt;.&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;RunOneInteraction&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;b__0&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Mà phải dùng &lt;code&gt;ipy64.exe&lt;/code&gt; để &lt;code&gt;AddReference&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;\&lt;span class="n"&gt;Users&lt;/span&gt;\&lt;span class="n"&gt;HTL&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;C:\Program Files (x86)\IronPython 2.7\ipy64.exe&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;IronPython&lt;/span&gt; &lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.40&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;NET&lt;/span&gt; &lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;30319.42000&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;64&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;copyright&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;credits&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;license&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;clr&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;C:&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;Program Files (x86)&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;IronPython 2.7&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;Lib&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
 &lt;span class="s1"&gt;&amp;#39;C:&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;Program Files (x86)&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;IronPython 2.7&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;DLLs&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
 &lt;span class="s1"&gt;&amp;#39;C:&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;Program Files (x86)&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;IronPython 2.7&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
 &lt;span class="s1"&gt;&amp;#39;C:&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;Program Files (x86)&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;IronPython 2.7&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;lib&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s1"&gt;site-packages&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;C:\Program Files\Autodesk\Revit 2018&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;RevitAPI&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;Autodesk.Revit.DB&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Wall&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Wall&lt;/span&gt;
&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nb"&gt;type&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Wall&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;AddReference các assemblies được compiled bằng IronPython&lt;/h2&gt;
&lt;p&gt;Nếu như bạn chưa biết, IronPython có thể compile python script thành các file assemblies (&lt;code&gt;.dll&lt;/code&gt; hoặc &lt;code&gt;.exe&lt;/code&gt;) sử dụng công cụ kèm theo là &lt;code&gt;pyc.py&lt;/code&gt; (sẽ có bài viết riêng về &lt;strong&gt;Compile python script dùng IronPython&lt;/strong&gt;).&lt;/p&gt;
&lt;p&gt;Một lưu ý quan trọng khi AddReference các file assemblies này là: &lt;strong&gt;phải dùng đúng phiên bản IronPython tương ứng với phiên bản đã dùng để compile ra file assembly đó thì mới AddReference được&lt;/strong&gt;. Ví dụ: file assembly được compiled bằng IronPython 2.7.3 thì khi AddReference ta phải dùng IronPython 2.7.3. Sẽ có ví dụ cụ thể trong bài &lt;strong&gt;Compile python script dùng IronPython&lt;/strong&gt;.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="ironpython"></category><category term="windows"></category><category term="dotnet"></category><category term="reference"></category><category term="dll"></category></entry><entry><title>IronPython</title><link href="http://pp.pymi.vn/article/ironpython/" rel="alternate"></link><published>2018-05-30T00:00:00+07:00</published><updated>2018-05-31T00:00:00+07:00</updated><author><name>htlcnn</name></author><id>tag:pp.pymi.vn,2018-05-30:/article/ironpython/</id><summary type="html">&lt;p&gt;Hướng dẫn cài đặt, chạy IronPython trên Windows. Ví dụ cơ bản về cách sử dụng .NET Framework và các thư viện có sẵn với IronPython.&lt;/p&gt;</summary><content type="html">&lt;h2&gt;IronPython là gì?&lt;/h2&gt;
&lt;p&gt;Theo giới thiệu ở &lt;a href="http://ironpython.net/"&gt;trang chủ IronPython&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;IronPython is an open-source implementation of the Python programming language which is tightly integrated with the .NET Framework. IronPython can use the .NET Framework and Python libraries, and other .NET languages can use Python code just as easily.&lt;/p&gt;
&lt;p&gt;Ironpython là 1 "implementation" mã nguồn mở của ngôn ngữ lập trình Python, tích hợp chặt chẽ với .NET Framework. IronPython có thể sử dụng .NET Framework và các thư viện Python, các ngôn ngữ .NET khác cũng có thể đọc và chạy code Python dễ dàng.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2&gt;Cài đặt IronPython&lt;/h2&gt;
&lt;p&gt;Vào trang chủ download bộ cài đặt về (link download ở trang chủ là link github). Thời điểm viết bài, IronPython đang ở &lt;a href="https://github.com/IronLanguages/ironpython2/releases/tag/ipy-2.7.8"&gt;phiên bản 2.7.8&lt;/a&gt;. IronPython 3 đang trong quá trình phát triển, chưa có bản chính thức.&lt;/p&gt;
&lt;h2&gt;Sử dụng&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Bật IronPython interpreter bằng cách chạy (bấm đúp - double click) vào file ở đường dẫn: &lt;code&gt;C:\Program Files (x86)\IronPython 2.7\ipy.exe&lt;/code&gt; hoặc &lt;code&gt;C:\Program Files (x86)\IronPython 2.7\ipy64.exe&lt;/code&gt;. Hoặc bấm nút Start -&amp;gt; gõ cmd -&amp;gt; Enter, sau khi cửa sổ Command Prompt hiện lên thì gõ đường dẫn file: &lt;code&gt;C:\Program Files (x86)\IronPython 2.7\ipy.exe&lt;/code&gt; hoặc &lt;code&gt;C:\Program Files (x86)\IronPython 2.7\ipy64.exe&lt;/code&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Microsoft&lt;/span&gt; &lt;span class="n"&gt;Windows&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;Version&lt;/span&gt; &lt;span class="mf"&gt;6.1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;7601&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;Copyright&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="mi"&gt;2009&lt;/span&gt; &lt;span class="n"&gt;Microsoft&lt;/span&gt; &lt;span class="n"&gt;Corporation&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;  &lt;span class="n"&gt;All&lt;/span&gt; &lt;span class="n"&gt;rights&lt;/span&gt; &lt;span class="n"&gt;reserved&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;\&lt;span class="n"&gt;Users&lt;/span&gt;\&lt;span class="n"&gt;HTL&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;c:\Program Files (x86)\IronPython 2.7\ipy.exe&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;IronPython&lt;/span&gt; &lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.40&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;NET&lt;/span&gt; &lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;30319.42000&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;copyright&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;credits&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;license&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Hello from IronPython&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Hello&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;IronPython&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;Chạy 1 python script đã viết sẵn bằng cách gõ vào Command Prompt: &lt;code&gt;C:\Program Files (x86)\IronPython 2.7\ipy.exe đường_dẫn\đến\script.py&lt;/code&gt;. Ví dụ nội dung file &lt;code&gt;D:\HTL\Desktop\script.py&lt;/code&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Hello from inside a Python script&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;C:\Users\HTL&amp;gt;&amp;quot;c:\Program Files (x86)\IronPython 2.7\ipy.exe&amp;quot; D:\HTL\Desktop\script.py
Hello from inside a Python script
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Sử dụng .NET Framework và Python libraries&lt;/h2&gt;
&lt;p&gt;IronPython có sẵn thư viện &lt;code&gt;clr&lt;/code&gt; hỗ trợ load các .NET Assemblies (VD như các file .dll) và sử dụng các công cụ trong đó. IronPython cũng có các libraries kèm theo tương tự như CPython:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;\&lt;span class="n"&gt;Users&lt;/span&gt;\&lt;span class="n"&gt;HTL&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;c:\Program Files (x86)\IronPython 2.7\ipy.exe&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;IronPython&lt;/span&gt; &lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;2.7&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;0.40&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;on&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;NET&lt;/span&gt; &lt;span class="mf"&gt;4.0&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mf"&gt;30319.42000&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;bit&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Type&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;help&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;copyright&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;credits&amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;license&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;more&lt;/span&gt; &lt;span class="n"&gt;information&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;clr&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AddReference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;System&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;System&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Environment&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Environment&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SystemDirectory&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;\&lt;span class="n"&gt;Windows&lt;/span&gt;\&lt;span class="n"&gt;system32&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;math&lt;/span&gt;
&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pi&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="mf"&gt;3.14159265359&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Tài liệu IronPython&lt;/h2&gt;
&lt;p&gt;Tương tự câu hỏi khi học Python thì dùng tài liệu nào, đối với IronPython thì cũng lấy tài liệu ở trang chủ. IronPython Documentation có 2 phần: phần 1 chính là &lt;a href="https://docs.python.org/2.7/"&gt;Python 2.7 documentation&lt;/a&gt;, phần 2 là &lt;a href="http://ironpython.net/documentation/dotnet/"&gt;hướng dẫn tích hợp .NET với IronPython&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Học ngôn ngữ Python là có thể sử dụng trên nhiều môi trường, với nhiều implementation khác nhau (CPython, IronPython, Jython...).&lt;/li&gt;
&lt;li&gt;IronPython là sự lựa chọn hợp lý khi làm việc với môi trường Windows và các phần mềm chạy trên Windows.&lt;/li&gt;
&lt;li&gt;Alternative: Trả lời cho câu hỏi "Mình vẫn muốn dùng CPython và vẫn muốn sử dụng .NET Framework thì làm như thế nào?" -&amp;gt; Tìm hiểu &lt;a href="http://pythonnet.github.io/"&gt;pythonnet&lt;/a&gt; nhé. Tuy nhiên mình khuyến khích dùng IronPython để làm việc trên Windows và các phần mềm chạy trên Windows.&lt;/li&gt;
&lt;/ul&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="ironpython"></category><category term="windows"></category><category term="implementation"></category><category term="dotnet"></category></entry><entry><title>Awk siêu tốc</title><link href="http://pp.pymi.vn/article/awk/" rel="alternate"></link><published>2018-05-27T00:00:00+07:00</published><updated>2018-05-27T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-05-27:/article/awk/</id><summary type="html">&lt;p&gt;học và dùng luôn trong 20 phút - yêu cầu dùng Ubuntu/OSX hay các hệ điều hành UNIX-like.&lt;/p&gt;</summary><content type="html">&lt;p&gt;Nếu bạn đã biết 1 scripting language như Python hay Perl việc học AWK sẽ có vẻ hơi
thừa/ hơi ngần ngại. Nhưng AWK - ngôn ngữ lập trình sinh ra từ những năm 1970 luôn
có chỗ dùng, và sức mạnh đáng gờm.&lt;/p&gt;
&lt;p&gt;Bài này giới thiệu các khái niệm cơ bản của ngôn ngữ lập trình AWK, một số cách dùng thông dụng, học xong có thể dùng ngay và vô cùng hữu ích với những người xử lý dữ liệu dạng cột/ bảng mà không biết Python.&lt;/p&gt;
&lt;p&gt;Các lệnh trong bài này dùng &lt;code&gt;mawk&lt;/code&gt; vì nó được biết là nhanh hơn các bản awk khác, nhưng về tính năng cơ bản là giống nhau, người đọc dùng bản nào cũng được, VD gawk&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ whatis awk
awk &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;              - pattern scanning and processing language
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;Dùng trong các câu lệnh hàng ngày&lt;/h3&gt;
&lt;p&gt;AWK rất thích hợp để nhét vào 1 pipe các câu lệnh UNIX, việc mà Python vốn không sinh ra để làm&lt;/p&gt;
&lt;p&gt;Ví dụ: đếm số dòng trong file /etc/passwd&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ wc /etc/passwd
  &lt;span class="m"&gt;57&lt;/span&gt;   &lt;span class="m"&gt;95&lt;/span&gt; &lt;span class="m"&gt;3193&lt;/span&gt; /etc/passwd
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Lệnh &lt;code&gt;wc&lt;/code&gt; vốn sinh ra để đếm: dòng, số từ, số ký tự. Bạn có thể viết 1 script Python 5-7 dòng
làm chuyện này, nhưng 1 dòng? Hãy thử và nếu thành công, hãy comment!&lt;/p&gt;
&lt;p&gt;Với AWK, làm việc này không khó khăn gì. Hãy bỏ qua nếu không hiểu gì, phần giải thích sẽ theo sau&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ cat /etc/passwd &lt;span class="p"&gt;|&lt;/span&gt; mawk &lt;span class="s1"&gt;&amp;#39;{ words += NF; chars += length($0) + 1;} END { print NR, words, chars}&amp;#39;&lt;/span&gt;
&lt;span class="m"&gt;57&lt;/span&gt; &lt;span class="m"&gt;95&lt;/span&gt; &lt;span class="m"&gt;3193&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Một pipe (&lt;code&gt;cmd1 | cmd2 | cmd3&lt;/code&gt;) thường bắt đầu bằng &lt;code&gt;cat file&lt;/code&gt;, mặc dù nó không phải cách làm tốt (tốn thêm 1 câu lệnh cat - khi mà hầu hết các câu lệnh đều hỗ trợ đầu vào là 1 file), nhưng tiện, nên ta cứ bắt đầu với cat, khi nào cần tối ưu ta sẽ bỏ nó đi. Ở đây, &lt;code&gt;mawk&lt;/code&gt; có thể nhận file để xử lý, ta viết lại:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mawk &lt;span class="s1"&gt;&amp;#39;{ words += NF; chars += length($0) + 1;} END { print NR, words, chars}&amp;#39;&lt;/span&gt; /etc/passwd
&lt;span class="m"&gt;57&lt;/span&gt; &lt;span class="m"&gt;95&lt;/span&gt; &lt;span class="m"&gt;3193&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Một ví dụ khác&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ head /etc/passwd
root:x:0:0:root:/root:/bin/bash
daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
bin:x:2:2:bin:/bin:/usr/sbin/nologin
sys:x:3:3:sys:/dev:/usr/sbin/nologin
sync:x:4:65534:sync:/bin:/bin/sync
games:x:5:60:games:/usr/games:/usr/sbin/nologin
man:x:6:12:man:/var/cache/man:/usr/sbin/nologin
lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin
mail:x:8:8:mail:/var/mail:/usr/sbin/nologin
news:x:9:9:news:/var/spool/news:/usr/sbin/nologin
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Một yêu cầu quái dị có thể xuất hiện như: hãy tính tổng các số ở cột số 3, với các câu lệnh CLI truyền thống, ta làm như sau&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="k"&gt;$(&lt;/span&gt;cat /etc/passwd &lt;span class="p"&gt;|&lt;/span&gt; cut -d: -f3 &lt;span class="p"&gt;|&lt;/span&gt; xargs &lt;span class="nb"&gt;printf&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;%s +&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; bc
&lt;span class="m"&gt;75624&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;cut&lt;/code&gt; giúp lấy cột thứ 3, phân cách bằng dấu &lt;code&gt;:&lt;/code&gt;, dùng &lt;code&gt;printf&lt;/code&gt; để nối các số lại bằng dấu &lt;code&gt;+&lt;/code&gt;, vì thừa 1 dấu &lt;code&gt;+&lt;/code&gt; ở đuôi nên ta &lt;code&gt;echo&lt;/code&gt; thêm số 0 để cho hợp lệ rồi đưa vào lệnh &lt;code&gt;bc&lt;/code&gt; để tính.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mawk -F: &lt;span class="s1"&gt;&amp;#39;{sum += $3} END { print sum }&amp;#39;&lt;/span&gt; /etc/passwd
&lt;span class="m"&gt;75624&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Tương tự &lt;code&gt;cut&lt;/code&gt;, ta dùng &lt;code&gt;-F:&lt;/code&gt; để chỉ ra sẽ dùng &lt;code&gt;:&lt;/code&gt; để phân cách cột, lấy cột số 3 &lt;code&gt;$3&lt;/code&gt;, cộng
lần lượt các giá trị vào biến &lt;code&gt;sum&lt;/code&gt; - khi ta không khai báo, AWK mặc định đó là số 0 nếu thực hiện phép toán với số. Làm như vậy với mỗi dòng (gọi là &lt;em&gt;record&lt;/em&gt; trong AWK):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;{ sum += $3 }
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Và khi hết các dòng (đánh dấu bằng END), ta print ra kết quả&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;END { print sum }
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Khó có thể đánh bại sự ngắn gọn, sạch sẽ này.&lt;/p&gt;
&lt;h2&gt;Record và field&lt;/h2&gt;
&lt;p&gt;AWK đọc text vào, mặc định sẽ cắt tại các dấu xuống dòng, tạo thành các record,
sau đó mặc định cắt tại dấu space (khoảng trắng), tạo thành các field.
Ta hoàn toàn có thể chỉ định AWK cắt ở ký tự khác.&lt;/p&gt;
&lt;h2&gt;Cấu tạo một chương trình AWK&lt;/h2&gt;
&lt;p&gt;Một chương trình AWK cấu tạo bởi các câu lệnh (statements) với cú pháp:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;              pattern   { action statements }
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chỉ có vậy.
Khi viết vào file thì viết mỗi câu lệnh 1 dòng, nhưng hoàn toàn có thể viết trên 1 dòng.&lt;/p&gt;
&lt;h3&gt;partern&lt;/h3&gt;
&lt;p&gt;Có nhiều partern, nhưng 3 partern phổ biến và hữu ích nhất là:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;BEGIN: theo sau là hành động / câu lệnh khi chương trình bắt đầu&lt;/li&gt;
&lt;li&gt;END: theo sau là câu lệnh được chạy khi chương trình kết thúc&lt;/li&gt;
&lt;li&gt;KHÔNG GHI PATTERN: thực hiện câu lệnh này cho mỗi record&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ví dụ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;#39;{sum += $3} END { print sum }&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Ví dụ sau không có BEGIN, với mỗi record ta sẽ cộng dồn, và khi đọc hết các record, ta print ra tổng. Chú ý: dấu &lt;code&gt;\&lt;/code&gt; ở cuối dòng là cú pháp trong shell cho phép viết 1 dòng thành nhiều dòng, khi chạy AWK chỉ xem toàn bộ chương trình là 1 dòng.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;$&lt;/span&gt; &lt;span class="nx"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;pymi\npython\nfamilug&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nx"&gt;mawk&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;\&lt;/span&gt;
&lt;span class="s1"&gt; BEGIN { print &amp;quot;the begin&amp;quot; } \&lt;/span&gt;
&lt;span class="s1"&gt; { printf &amp;quot;got line: %s has length %d\n&amp;quot;, $0, length($0) }\&lt;/span&gt;
&lt;span class="s1"&gt; { print &amp;quot;done process line &amp;quot;, NR }\&lt;/span&gt;
&lt;span class="s1"&gt; END {print &amp;quot;DONE&amp;quot;}&amp;#39;&lt;/span&gt;

&lt;span class="nx"&gt;the&lt;/span&gt; &lt;span class="nx"&gt;begin&lt;/span&gt;
&lt;span class="nx"&gt;got&lt;/span&gt; &lt;span class="nx"&gt;line&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;pymi&lt;/span&gt; &lt;span class="nx"&gt;has&lt;/span&gt; &lt;span class="kr"&gt;length&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;
&lt;span class="nx"&gt;done&lt;/span&gt; &lt;span class="nx"&gt;process&lt;/span&gt; &lt;span class="nx"&gt;line&lt;/span&gt;  &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;span class="nx"&gt;got&lt;/span&gt; &lt;span class="nx"&gt;line&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;python&lt;/span&gt; &lt;span class="nx"&gt;has&lt;/span&gt; &lt;span class="kr"&gt;length&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;
&lt;span class="nx"&gt;done&lt;/span&gt; &lt;span class="nx"&gt;process&lt;/span&gt; &lt;span class="nx"&gt;line&lt;/span&gt;  &lt;span class="mi"&gt;2&lt;/span&gt;
&lt;span class="nx"&gt;got&lt;/span&gt; &lt;span class="nx"&gt;line&lt;/span&gt;&lt;span class="err"&gt;:&lt;/span&gt; &lt;span class="nx"&gt;familug&lt;/span&gt; &lt;span class="nx"&gt;has&lt;/span&gt; &lt;span class="kr"&gt;length&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;
&lt;span class="nx"&gt;done&lt;/span&gt; &lt;span class="nx"&gt;process&lt;/span&gt; &lt;span class="nx"&gt;line&lt;/span&gt;  &lt;span class="mi"&gt;3&lt;/span&gt;
&lt;span class="nx"&gt;DONE&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;parttern tìm kiếm&lt;/h2&gt;
&lt;p&gt;parttern này giúp tìm kiếm các record có chứa một regular expression (hoặc string cố định) và xử lý record đó.&lt;/p&gt;
&lt;p&gt;Đếm số dòng chứa từ &lt;code&gt;print&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;printf print \nprintf&amp;quot;&lt;/span&gt;
&lt;span class="nb"&gt;printf&lt;/span&gt; print
&lt;span class="nb"&gt;printf&lt;/span&gt;
$ &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;printf print \nprintf&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; grep -c print
&lt;span class="m"&gt;2&lt;/span&gt;
$ &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s2"&gt;&amp;quot;printf print \nprintf&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; mawk &lt;span class="s1"&gt;&amp;#39;/print/ { count += 1 } END { print count }&amp;#39;&lt;/span&gt;
&lt;span class="m"&gt;2&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;print&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;print&lt;/code&gt;  và &lt;code&gt;printf&lt;/code&gt; là 2 output statements (câu lệnh xử lý đầu ra), không phải function nên
không sử dụng cú pháp gọi function &lt;code&gt;print(thing)&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ mawk &lt;span class="s1"&gt;&amp;#39;BEGIN { print &amp;quot;hello&amp;quot; }&amp;#39;&lt;/span&gt;
hello
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;variable và field variable&lt;/h2&gt;
&lt;p&gt;Mỗi record chứa nhiều field, hãy tưởng tượng như 1 dòng spreadsheet/excel có nhiều ô ứng với các cột.
Các variable có sẵn:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;$0&lt;/code&gt; - toàn bộ 1 record (dòng) - chú ý dấu $ dùng để truy cập giá trị của field&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$1&lt;/code&gt; - field 1 (hay có thể nghĩ là cột số 1)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$2&lt;/code&gt; - field 2&lt;/li&gt;
&lt;li&gt;...&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$(NF - 1)&lt;/code&gt; - field trước cuối cùng&lt;/li&gt;
&lt;li&gt;&lt;code&gt;$NF&lt;/code&gt; - field cuối cùng&lt;/li&gt;
&lt;li&gt;NF - số field&lt;/li&gt;
&lt;li&gt;NR - thứ tự của record, tăng dần sau khi xử lý xong mỗi record (số dòng hiện tại)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Khi truy cập biến, không sử dụng thêm bất cứ ký tự nào (khác với bash, bash phải thêm $varname).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;1, Le Van Xe, 27, Ha Noi, 0990090090&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; mawk -F, &lt;span class="s1"&gt;&amp;#39;{ print $NF}&amp;#39;&lt;/span&gt;
 &lt;span class="m"&gt;0990090090&lt;/span&gt;
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;1, Le Van Xe, 27, Ha Noi, 0990090090&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; mawk -F, &lt;span class="s1"&gt;&amp;#39;{ print $0}&amp;#39;&lt;/span&gt;
&lt;span class="m"&gt;1&lt;/span&gt;, Le Van Xe, &lt;span class="m"&gt;27&lt;/span&gt;, Ha Noi, &lt;span class="m"&gt;0990090090&lt;/span&gt;
$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;1, Le Van Xe, 27, Ha Noi, 0990090090&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; mawk -F, &lt;span class="s1"&gt;&amp;#39;{ print NF }&amp;#39;&lt;/span&gt;
&lt;span class="m"&gt;5&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chỉ cần nắm rõ tên các variable có sẵn này, ta đã có một tool cực mạnh để xử lý dữ liệu dạng bảng như Excel/CSV/SQL.&lt;/p&gt;
&lt;h2&gt;Các kiểu dữ liệu&lt;/h2&gt;
&lt;p&gt;AWK có string, số (chia làm float và integer), và array.
Ta không bàn tới array ở đây, vì nếu cần lập trình gì phức tạp hơn một câu lệnh AWK đơn giản, ta  có thể sử dụng Python cho sạch sẽ, gọn gàng, tiện lợi.&lt;/p&gt;
&lt;h2&gt;Control flow&lt;/h2&gt;
&lt;p&gt;Là ngôn ngữ lập trình đầy đủ, AWK có if/else/for/while như các ngôn ngữ lập trình "giống C" khác. Ví dụ đếm số chẵn và số lẻ&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;echo&lt;/span&gt; -e &lt;span class="s1"&gt;&amp;#39;1\n2\n3\n4\n20\n30&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; mawk &lt;span class="s1"&gt;&amp;#39;\&lt;/span&gt;
&lt;span class="s1"&gt;{ if ($1 % 2 == 0) \&lt;/span&gt;
&lt;span class="s1"&gt;     { chan += 1 } \&lt;/span&gt;
&lt;span class="s1"&gt;  else { le += 1 } \&lt;/span&gt;
&lt;span class="s1"&gt;} \&lt;/span&gt;
&lt;span class="s1"&gt;END { print chan, le }&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;5&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Function&lt;/h2&gt;
&lt;p&gt;AWK có sẵn các funtion xử lý string, số thì đủ các phép toán, các function sin cos ..., người dùng cũng có thể định nghĩa function của họ. Xem thêm ở &lt;a href="https://www.gnu.org/software/gawk/manual/gawk.html#Functions"&gt;đây&lt;/a&gt;.&lt;/p&gt;
&lt;h3&gt;Bonus - giải bài projecteuler 1&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://projecteuler.net/problem=1"&gt;Tính tổng các số nhỏ hơn 1000 chia hết cho 3 hoặc 5&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ seq &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="m"&gt;999&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; mawk &lt;span class="s1"&gt;&amp;#39;{ if ($1 % 3 == 0 || $i % 5 == 0) sum += $1 } END { print sum }&amp;#39;&lt;/span&gt;
&lt;span class="m"&gt;233168&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Tham khảo&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://invisible-island.net/mawk/manpage/mawk.txt"&gt;mawk homepage manpage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://manpages.ubuntu.com/manpages/xenial/en/man1/mawk.1.html"&gt;ubuntu 16.04 man 1 mawk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.gnu.org/software/gawk/manual/gawk.html#Top"&gt;GNU awk&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://adamdrake.com/command-line-tools-can-be-235x-faster-than-your-hadoop-cluster.html"&gt;AWK on big data&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Hết&lt;/p&gt;
&lt;p&gt;HVN at &lt;a href="http://pymi.vn"&gt;http://pymi.vn&lt;/a&gt; and &lt;a href="https://www.familug.org"&gt;https://www.familug.org&lt;/a&gt;.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="awk"></category><category term="sysadmin"></category><category term="linux"></category><category term="csv"></category><category term="bigdata"></category></entry><entry><title>In ra màn hình số 1 - ngôn ngữ nào nhẹ nhất?</title><link href="http://pp.pymi.vn/article/dynamic/" rel="alternate"></link><published>2018-05-27T00:00:00+07:00</published><updated>2018-05-27T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-05-27:/article/dynamic/</id><summary type="html">&lt;p&gt;dash, bash, awk, perl, ruby, nodejs, python, elixir, guile - tất cả lên thớt!&lt;/p&gt;</summary><content type="html">&lt;p&gt;Nếu chỉ cần in ra mà hình số 1, ngôn ngữ lập trình nào sẽ chạy tốn ít RAM nhất?&lt;/p&gt;
&lt;p&gt;Thí nghiệm sau sẽ cho ta thấy các chương trình cần bao nhiêu RAM để chạy và in
ra số 1, kết thúc dòng bằng một dấu xuống dòng (newline &lt;code&gt;\n&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Ta dùng chương trình &lt;code&gt;/usr/bin/time&lt;/code&gt; để có cả thông số về RAM (&lt;code&gt;RSS&lt;/code&gt;) thay vì chỉ gõ time - lệnh builtin của bash.&lt;/p&gt;
&lt;h2&gt;bash4.3&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time bash -c &lt;span class="s1"&gt;&amp;#39;echo 1&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.00user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.00elapsed &lt;span class="m"&gt;100&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 3064maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+136minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;dash&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time /bin/dash -c &lt;span class="s1"&gt;&amp;#39;echo 1&amp;#39;&lt;/span&gt;
&lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="m"&gt;0&lt;/span&gt;.00user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.00elapsed ?%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 1492maxresident&lt;span class="o"&gt;)&lt;/span&gt;k
0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+67minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;mawk&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time mawk &lt;span class="s1"&gt;&amp;#39;BEGIN {print 1}&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.00user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.00elapsed &lt;span class="m"&gt;100&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 1932maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+86minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;gawk 4.1.3&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time gawk &lt;span class="s1"&gt;&amp;#39;BEGIN {print 1}&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.00user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.00elapsed &lt;span class="m"&gt;42&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 3632maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

552inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;2major+173minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Python3.5.2&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time python3 -c &lt;span class="s1"&gt;&amp;#39;print(1)&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.03user &lt;span class="m"&gt;0&lt;/span&gt;.01system &lt;span class="m"&gt;0&lt;/span&gt;:00.05elapsed &lt;span class="m"&gt;98&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 9292maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+1100minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Python2.7.12&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time python2 -c &lt;span class="s1"&gt;&amp;#39;print(1)&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.01user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.01elapsed &lt;span class="m"&gt;94&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 6640maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+819minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Ruby 2.3.1&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time ruby -e &lt;span class="s1"&gt;&amp;#39;puts 1&amp;#39;&lt;/span&gt;
&lt;span class="m"&gt;1&lt;/span&gt;
&lt;span class="m"&gt;0&lt;/span&gt;.03user &lt;span class="m"&gt;0&lt;/span&gt;.01system &lt;span class="m"&gt;0&lt;/span&gt;:00.04elapsed &lt;span class="m"&gt;100&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 10336maxresident&lt;span class="o"&gt;)&lt;/span&gt;k
0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+1595minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Perl v5.22.1&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time perl -e &lt;span class="s1"&gt;&amp;#39;print &amp;quot;1\n&amp;quot;&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.00user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.00elapsed &lt;span class="m"&gt;100&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 4144maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+176minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;NodeJS 6.11.2&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time node -p &lt;span class="s1"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.09user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.10elapsed &lt;span class="m"&gt;100&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 24080maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+2920minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Elixir 1.6.3&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time elixir -e &lt;span class="s1"&gt;&amp;#39;IO.puts 1&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.17user &lt;span class="m"&gt;0&lt;/span&gt;.04system &lt;span class="m"&gt;0&lt;/span&gt;:00.16elapsed &lt;span class="m"&gt;137&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 29268maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

16inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;1major+7837minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Guile 2.0.11&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time guile -c &lt;span class="s1"&gt;&amp;#39;(display 1) (newline)&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;1&lt;/span&gt;

&lt;span class="m"&gt;0&lt;/span&gt;.02user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.01elapsed &lt;span class="m"&gt;115&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 7720maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+976minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;printf 8.25 - chương trình viết bằng C&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ /usr/bin/time &lt;span class="nb"&gt;printf&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;

&lt;span class="m"&gt;10&lt;/span&gt;.00user &lt;span class="m"&gt;0&lt;/span&gt;.00system &lt;span class="m"&gt;0&lt;/span&gt;:00.00elapsed &lt;span class="m"&gt;100&lt;/span&gt;%CPU &lt;span class="o"&gt;(&lt;/span&gt;0avgtext+0avgdata 1844maxresident&lt;span class="o"&gt;)&lt;/span&gt;k

0inputs+0outputs &lt;span class="o"&gt;(&lt;/span&gt;0major+72minor&lt;span class="o"&gt;)&lt;/span&gt;pagefaults 0swaps
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;Làm lại toàn bộ bằng Python&lt;/h2&gt;
&lt;p&gt;Tạo một dictionary, chứa các tên ngôn ngữ - kèm với câu lệnh sẽ dùng để thử nghiệm&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;shlex&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;subprocess&lt;/span&gt;


&lt;span class="n"&gt;programs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;bash&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;bash -c &amp;quot;echo 1&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;dash&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;dash -c &amp;quot;echo 1&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;mawk&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;mawk &amp;#39;BEGIN {print 1}&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;gawk&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;gawk &amp;#39;BEGIN {print 1}&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;python2.7&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;python2 -c &amp;quot;print(1)&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;python3.5&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;python3 -c &amp;quot;print(1)&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;ruby2.3&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;ruby -e &amp;quot;puts 1&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;node6&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;node -p 1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;perl5&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;perl -e &lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;print &amp;#39;1&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;elixir&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;elixir -e &amp;quot;IO.puts 1&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;guile&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;guile -c &amp;quot;(display 1) (newline)&amp;quot;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="s1"&gt;&amp;#39;printf&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;printf &amp;quot;1&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;quot;&amp;#39;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;


&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;re&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_rss_from_stderr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;stderr&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;match&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;re&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;(?P&amp;lt;rss&amp;gt;\d+)maxresident&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;search&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;err&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utf-8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;match&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;group&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;rss&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;


&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;pandas&lt;/span&gt; &lt;span class="kn"&gt;as&lt;/span&gt; &lt;span class="nn"&gt;pd&lt;/span&gt;

&lt;span class="n"&gt;languages&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="n"&gt;rsses&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;language&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cmd&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;programs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;cmd&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/usr/bin/time&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;shlex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;process&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Popen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cmd&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;stdout&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PIPE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;stderr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PIPE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;communicate&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;assert&lt;/span&gt; &lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;utf-8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;1&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;rss&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_rss_from_stderr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;err&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;language&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;rss&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;languages&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;language&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;rsses&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rss&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;df&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;DataFrame&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;languages&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;rsses&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;columns&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;RSS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="n"&gt;df_sorted_rss&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;df&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sort_values&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;RSS&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;# run in Jupyter&lt;/span&gt;
&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;matplotlib&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;pyplot&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;plt&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;matplotlib&lt;/span&gt;
&lt;span class="n"&gt;matplotlib&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;style&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;use&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fivethirtyeight&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="o"&gt;%&lt;/span&gt;&lt;span class="n"&gt;matplotlib&lt;/span&gt; &lt;span class="n"&gt;inline&lt;/span&gt;
&lt;span class="n"&gt;df_sorted_rss&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;plot&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;RSS size in byte when print 1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="Dynamic typing languages" src="http://pp.pymi.vn/images/dynamic.png"&gt;&lt;/p&gt;
&lt;h2&gt;Kết luận&lt;/h2&gt;
&lt;p&gt;Khoan vội kết luận rằng cả thế giới nên chuyển hết về dùng dash cho đỡ tốn RAM hay xa lánh Elixir vì nó chạy tới 30 MB RAM để in số 1 ra màn hình.&lt;/p&gt;
&lt;p&gt;Sử dụng đúng công cụ, cho đúng vấn đề thích hợp mới là điều quan trọng.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;dash được viết ra để dùng làm &lt;code&gt;shell (sh)&lt;/code&gt; cho Ubuntu, nó cần nhẹ, dù trả giá bằng việc không nhiều tính năng, và chỉ là một shell scripting language&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.familug.org/search/label/bash"&gt;bash&lt;/a&gt; là shell được dùng phổ biến nhất thế giới&lt;/li&gt;
&lt;li&gt;awk là ngôn ngữ lập trình đã gắn liền với lịch sử của thế giới UNIX, rất tiện để tính toán dữ liệu cột / hàng. Với AWK cùng các CLI tool truyền thống, người ta có thể &lt;a href="https://adamdrake.com/command-line-tools-can-be-235x-faster-than-your-hadoop-cluster.html"&gt;giải quyết bài toán "big data" nhanh gấp 200 lần dùng Hadoop (EMR)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;mawk nhanh hơn gawk&lt;/li&gt;
&lt;li&gt;perl5 luôn có chỗ đứng của nó, nó vẫn ở trên máy Ubuntu dù chưa bao giờ mình chủ ý cài&lt;/li&gt;
&lt;li&gt;&lt;a href="http://www.familug.org/search/label/guile"&gt;guile&lt;/a&gt; là extension language chính thức được lựa chọn bởi GNU, nó chính là ngôn ngữ scheme được mang vào ứng dụng thực tế&lt;/li&gt;
&lt;li&gt;&lt;a href="http://pymi.vn/"&gt;Python&lt;/a&gt; - ngôn ngữ dễ đọc, phổ biến nhất thế giới, đã đẩy ngành tính toán khoa học từ bộ môn trong phòng thí nghiệm trở thành ngành hot nhất trái đất. PS: Python khi bật lên đã dùng ~ 8MB RAM.&lt;/li&gt;
&lt;li&gt;Ruby còn dùng nhiều RAM hơn nữa, dù về mặt tính năng thường được so ngang với Python, nhưng mặt ứng dụng vào khoa học thì là vực so với trời Python.&lt;/li&gt;
&lt;li&gt;NodeJS là một JavaScript engine chuyển biến cả ngành web, cũng chưa rõ sao nó ngốn gần 25MB để bật lên, có khi đó vốn là bản chất của JavaScript.&lt;/li&gt;
&lt;li&gt;&lt;a href="http://elixir.pymi.vn/"&gt;Elixir&lt;/a&gt; không chỉ bật lên một interpreter như bash, mà đó là cả hệ thống phân tán - chạy máy ảo BEAM của Erlang, nên con số 30MB thậm chí còn là hơi ... ít.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Bài này không xét các ngôn ngữ mà phải viết thành file, compile mới chạy, vì tác giả quá lười.&lt;/p&gt;
&lt;p&gt;PS: học hết đống trên ở &lt;a href="http://www.familug.org/2016/12/free-ebook.html"&gt;đây&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Hết.&lt;/p&gt;
&lt;p&gt;HVN at https://pymi.vn and https://www.familug.org&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="tip"></category></entry><entry><title>Tôi học lập trình không phải vì lương 4000 USD</title><link href="http://pp.pymi.vn/article/toi-hoc-lap-trinh-khong-phai-vi-luong-4000-usd/" rel="alternate"></link><published>2018-05-20T00:00:00+07:00</published><updated>2018-05-20T00:00:00+07:00</updated><author><name>tung491</name></author><id>tag:pp.pymi.vn,2018-05-20:/article/toi-hoc-lap-trinh-khong-phai-vi-luong-4000-usd/</id><summary type="html">&lt;p&gt;Không ít học sinh phổ thông từng thắc mắc học môn lập trình để làm gì?
Có phải vì mức lương 4000 USD của sinh viên mới ra trường mà nhiều người hay
nhắc đến khi nói về lập trình viên.&lt;/p&gt;
&lt;p&gt;Hôm nay mình đọc một bài trên Facebook nói …&lt;/p&gt;</summary><content type="html">&lt;p&gt;Không ít học sinh phổ thông từng thắc mắc học môn lập trình để làm gì?
Có phải vì mức lương 4000 USD của sinh viên mới ra trường mà nhiều người hay
nhắc đến khi nói về lập trình viên.&lt;/p&gt;
&lt;p&gt;Hôm nay mình đọc một bài trên Facebook nói về lí do &lt;code&gt;Tại sao bạn học lập trình?&lt;/code&gt;,
trong đó có 1 lí do được nhắc đi nhắc lại rất nhiều
đó là có một tương lai tươi sáng với mức lương khởi điểm khi ra trường 4000 USD. Bài này nói lên quan điểm của mình về
việc học lập trình để làm gì.&lt;/p&gt;
&lt;p&gt;&lt;img alt="4000USD" src="https://cdn-images-1.medium.com/max/800/1*MNkBMrAinvq65wLx9y2oIg.jpeg"&gt;&lt;/p&gt;
&lt;p&gt;Mình cũng giống các bạn trong clip trên, đều là học sinh cấp 3, đều có không ít thì nhiều kiến thức về lập trình nhưng mình thấy các bạn đang có phần ảo tưởng về ngành lập trình. Mình tiếp xúc với không ít lập trình viên chuyên nghiệp, nên không còn lạ gì những nỗi khổ của ngành này: trĩ lòi, mắt mờ, đau lưng, cột sống, stress, deadline, đau dạ dày, trầm cảm... Những người ngoài chỉ nhìn vào họ những lúc họ khoe lương nhưng đâu có nhìn thấy lúc họ làm việc. Trên các loại báo xàm ke của Việt Nam và các bà hàng xóm, nghề &lt;code&gt;lập trình&lt;/code&gt; thường xuyên được nhắc đến trong các chủ đề như: "những công việc lương cao nhất", "những công việc không sợ thiếu việc làm lương cao trong 5 năm tới", blabla ... ; nhưng sự thực có phải vậy không ? Công việc lập trình cũng chỉ giống bao nhiêu ngành nghề khác là bán sức lao động và giá trị của bản thân cho công ty và xã hội thôi.&lt;/p&gt;
&lt;p&gt;Bố mình từng nói "Không có ngành nghề dễ kiếm việc hơn hay lương cao hơn ngành nghề nào.
Tất cả công việc mày được trả lương là người ta trả cho giá trị và khả năng của mày mang lại chứ không phải trả cho cái ngành nghề của mày hay cái trường mày học."&lt;/p&gt;
&lt;p&gt;Lương 4000 USD/tháng với lập trình không phải là không có nhưng những nguời như thế thuộc loại &lt;strong&gt;hiếm&lt;/strong&gt; và thường có kinh nghiệm 5–7 năm đi làm. Còn về lương một cử nhân Bách Khoa ra trường thì "4000 USD/năm tương đương khoảng 7.5 triệu đồng/tháng thì hợp lý, và cũng là cao hơn mặt bằng xã hội", "xạo chó", "ra trường 4k có cái củ cải" ... là những câu trả lời mình nhận được khi gửi bức ảnh trên và hỏi những người trong nghề và có có cả những người với mức lương &amp;gt;= 4000 USD.&lt;/p&gt;
&lt;p&gt;Quay về vấn đề chính thôi, mình học lập trình để làm gì? Đơn giản thôi, mình học để hiểu về cách của mọi thứ trên Internet đang hoại động và để nó là công cụ cho mình để thực hiện được những gì mình muốn: Làm một trang web, vẽ bản đồ trà sữa, viết một con chatbot, blabla … Với mình, ngôn ngữ trong lập trình cũng giống như Tiếng Anh nó giúp bạn giao tiếp với các lập trình viên khác và thế giới.&lt;/p&gt;
&lt;p&gt;Trong cuộc sống, chúng ta không khó để thấy những sự thật về những con người thành công trong nhiều lĩnh vực nhưng những lĩnh vực đó không hề &lt;code&gt;hot&lt;/code&gt; hay được truyền thống tung hô ví dụ: nuôi lợn, trồng rau, ... vì đơn giản họ tìm thấy được đam mê của mình với nghề và tiềm năng của nghề. Do đó chúng ta thấy được sự thành công đến từ bản thân bạn chứ không phải ngành nghề của bạn&lt;/p&gt;
&lt;p&gt;Tóm lại, đừng thần thánh hóa &lt;strong&gt;lập trình viên&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;HẾT&lt;/p&gt;
&lt;p&gt;TUNG491 at https://pymi.vn.&lt;/p&gt;</content><category term="Trang chủ"></category><category term="developer"></category><category term="lương"></category><category term="coder"></category><category term="4000USD"></category></entry><entry><title>Requests + bs4 &lt;= Requests-HTML</title><link href="http://pp.pymi.vn/article/requests-bs4-requests-html/" rel="alternate"></link><published>2018-05-09T00:00:00+07:00</published><updated>2018-05-09T00:00:00+07:00</updated><author><name>tung491</name></author><id>tag:pp.pymi.vn,2018-05-09:/article/requests-bs4-requests-html/</id><summary type="html">&lt;h2&gt;Giới thiệu&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://html.python-requests.org/"&gt;Requests-HTML&lt;/a&gt; được viết bởi Kenneth Reitz - tác giả của &lt;code&gt;requests&lt;/code&gt; nổi tiếng, với mục đích cao cả là thay thế combo huyền thoại (với pymier) requests + bs4.  Trên trang chủ, requests-html tự mô tả như sau:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This library intends to make parsing HTML (e.g. scraping the web …&lt;/p&gt;&lt;/blockquote&gt;</summary><content type="html">&lt;h2&gt;Giới thiệu&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://html.python-requests.org/"&gt;Requests-HTML&lt;/a&gt; được viết bởi Kenneth Reitz - tác giả của &lt;code&gt;requests&lt;/code&gt; nổi tiếng, với mục đích cao cả là thay thế combo huyền thoại (với pymier) requests + bs4.  Trên trang chủ, requests-html tự mô tả như sau:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This library intends to make parsing HTML (e.g. scraping the web) as simple and intuitive as possible&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;và đặc biệt chỉ hỗ trợ python3.&lt;/p&gt;
&lt;h2&gt;Các tính năng nổi bật của requests-html&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Hỗ trợ đầy đủ JavaScript&lt;/li&gt;
&lt;li&gt;Hỗ trợ chọn thành phần của trang bằng CSS, Xpath&lt;/li&gt;
&lt;li&gt;Tự động theo chuyển trang&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Demo vài tính năng nổi bật&lt;/h2&gt;
&lt;p&gt;Cách cài đặt và sử dụng cơ bản của requests-html đã được tác giả nói rất rõ ở trang chủ do đó mính sẽ không nói lại nữa.&lt;/p&gt;
&lt;h3&gt;Render&lt;/h3&gt;
&lt;p&gt;Nhặt một đoạn văn bản mà đã được render bởi JavaScript:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;session&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;http://www.familug.org/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;render&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;W&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;pyppeteer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;chromium_downloader&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="n"&gt;chromium&lt;/span&gt; &lt;span class="n"&gt;download&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="n"&gt;Download&lt;/span&gt; &lt;span class="n"&gt;may&lt;/span&gt; &lt;span class="n"&gt;take&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="n"&gt;few&lt;/span&gt; &lt;span class="n"&gt;minutes&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;W&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;pyppeteer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;chromium_downloader&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;chromium&lt;/span&gt; &lt;span class="n"&gt;download&lt;/span&gt; &lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;W&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;pyppeteer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;chromium_downloader&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="n"&gt;chromium&lt;/span&gt; &lt;span class="n"&gt;extracted&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;home&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;dosontung007&lt;/span&gt;&lt;span class="o"&gt;/.&lt;/span&gt;&lt;span class="n"&gt;pyppeteer&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;local&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;chromium&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;543305&lt;/span&gt;
&lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;search&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;UEFI vs BIOS - tạo USB boot cài Windows {something} từ Ubuntu&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;something&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;Out&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;]:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;10&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Khi bạn chạy render() lần đầu, method sẽ tải về &lt;code&gt;Chromium headless&lt;/code&gt; về thư mục &lt;code&gt;$HOME&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;XPath Selector&lt;/h3&gt;
&lt;p&gt;Requests-html hỗ trợ Xpath query như Scrapy&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;In [25]: r.html.xpath(&amp;#39;//h3//a&amp;#39;)
Out[25]:
[&amp;lt;Element &amp;#39;a&amp;#39; href=&amp;#39;http://www.familug.org/2018/04/uefi-vs-bios-tao-usb-boot-cai-windows.html&amp;#39;&amp;gt;,
 &amp;lt;Element &amp;#39;a&amp;#39; href=&amp;#39;http://www.familug.org/2018/04/alsa-pulseaudio-jack-ubuntu.html&amp;#39;&amp;gt;,
 &amp;lt;Element &amp;#39;a&amp;#39; href=&amp;#39;http://www.familug.org/2018/02/hello-2018.html&amp;#39;&amp;gt;,
 &amp;lt;Element &amp;#39;a&amp;#39; href=&amp;#39;http://www.familug.org/2017/12/dung-git-diff-voi-patch.html&amp;#39;&amp;gt;,
 &amp;lt;Element &amp;#39;a&amp;#39; href=&amp;#39;http://www.familug.org/2017/11/pgrep-e-grep-process.html&amp;#39;&amp;gt;,
 &amp;lt;Element &amp;#39;a&amp;#39; href=&amp;#39;http://www.familug.org/2017/11/vuot-qua-gioi-han-1-deploy-key-cua.html&amp;#39;&amp;gt;]
In [26]: r.html.xpath(&amp;#39;//h3//a/@href&amp;#39;)
Out[26]:
[&amp;#39;http://www.familug.org/2018/04/uefi-vs-bios-tao-usb-boot-cai-windows.html&amp;#39;,
&amp;#39;http://www.familug.org/2018/04/alsa-pulseaudio-jack-ubuntu.html&amp;#39;,
&amp;#39;http://www.familug.org/2018/02/hello-2018.html&amp;#39;,
&amp;#39;http://www.familug.org/2017/12/dung-git-diff-voi-patch.html&amp;#39;,
&amp;#39;http://www.familug.org/2017/11/pgrep-e-grep-process.html&amp;#39;,
&amp;#39;http://www.familug.org/2017/11/vuot-qua-gioi-han-1-deploy-key-cua.html&amp;#39;]
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;CSS Selector&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;In [26]: sel = &amp;#39;#Blog1 &amp;gt; div.blog-posts.hfeed &amp;gt; div:nth-child(1) &amp;gt; div &amp;gt; div &amp;gt; div &amp;gt; h3&amp;#39;

In [27]: r.html.find(sel, first=True)
Out[27]: &amp;lt;Element &amp;#39;h3&amp;#39; class=(&amp;#39;post-title&amp;#39;, &amp;#39;entry-title&amp;#39;) itemprop=&amp;#39;name&amp;#39;&amp;gt;

In [28]: r.html.find(sel, first=True).text
Out[28]: &amp;#39;UEFI vs BIOS - tạo USB boot cài Windows 10 từ Ubuntu&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;CSS selector này có thể copy từ developer tool của trình duyệt web.&lt;/p&gt;
&lt;h2&gt;Tổng kết&lt;/h2&gt;
&lt;p&gt;Requests-html là 1 thư viện tiện lợi thay thế cho combo requests + bs4, dễ dàng chuyển lên scrapy nếu cần thực hiện dự án crawling lớn, chuyên nghiệp.&lt;/p&gt;
&lt;p&gt;Chi tiết hơn xem tại: http://html.python-requests.org/.&lt;/p&gt;
&lt;p&gt;HẾT.&lt;/p&gt;
&lt;p&gt;TUNG491 at https://pymi.vn&lt;/p&gt;</content><category term="Trang chủ"></category><category term="requests-html"></category><category term="bs4"></category><category term="requests"></category><category term="python"></category><category term="crawl"></category></entry><entry><title>python -i file.py</title><link href="http://pp.pymi.vn/article/pythoni/" rel="alternate"></link><published>2018-05-04T00:00:00+07:00</published><updated>2018-05-04T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-05-04:/article/pythoni/</id><summary type="html">&lt;p&gt;chạy lệnh python với option -i&lt;/p&gt;</summary><content type="html">&lt;p&gt;Với một lập trình viên Python, quá trình sản xuất code là liên tục vòng tuần
hoàn:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;viết code -&amp;gt; python filename.py -&amp;gt; sửa code -&amp;gt; python filename.py ...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;cho đến khi mệt nghỉ, hoặc vợ gọi.&lt;/p&gt;
&lt;p&gt;Option &lt;code&gt;-i&lt;/code&gt; mang lại một khả năng khá thú vị khi cho phép tiếp tục tương tác
với "đoạn code" sau khi đã chạy xong.&lt;/p&gt;
&lt;p&gt;Ví dụ, đoạn code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;
&lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;
&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;
&lt;span class="n"&gt;hot_links&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;https://pymi.vn&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://www.familug.org&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://pp.pymi.vn&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;link&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;hot_links&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;link&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Chạy&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python3 get_data.py
https://pymi.vn
http://www.familug.org
http://pp.pymi.vn
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Giờ muốn tải từng link về thì phải mở editor lên, sửa code và chạy thử tiếp...&lt;/p&gt;
&lt;p&gt;Chạy với &lt;code&gt;-i&lt;/code&gt;, ta có:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ python3 -i get_data.py
https://pymi.vn
http://www.familug.org
http://pp.pymi.vn
&amp;gt;&amp;gt;&amp;gt; locals&lt;span class="o"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;link&amp;#39;&lt;/span&gt;: &lt;span class="s1"&gt;&amp;#39;http://pp.pymi.vn&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;__doc__&amp;#39;&lt;/span&gt;: None, &lt;span class="s1"&gt;&amp;#39;c&amp;#39;&lt;/span&gt;: &lt;span class="m"&gt;15&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;a&amp;#39;&lt;/span&gt;: &lt;span class="m"&gt;6&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;__name__&amp;#39;&lt;/span&gt;: &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;__builtins__&amp;#39;&lt;/span&gt;: &amp;lt;module &lt;span class="s1"&gt;&amp;#39;builtins&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;built-in&lt;span class="o"&gt;)&lt;/span&gt;&amp;gt;, &lt;span class="s1"&gt;&amp;#39;__spec__&amp;#39;&lt;/span&gt;: None, &lt;span class="s1"&gt;&amp;#39;b&amp;#39;&lt;/span&gt;: &lt;span class="m"&gt;9&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;__cached__&amp;#39;&lt;/span&gt;: None, &lt;span class="s1"&gt;&amp;#39;__loader__&amp;#39;&lt;/span&gt;: &amp;lt;_frozen_importlib_external.SourceFileLoader object at 0x7f0bcaee7f28&amp;gt;, &lt;span class="s1"&gt;&amp;#39;hot_links&amp;#39;&lt;/span&gt;: &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;https://pymi.vn&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;http://www.familug.org&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;http://pp.pymi.vn&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;__package__&amp;#39;&lt;/span&gt;: None&lt;span class="o"&gt;}&lt;/span&gt;
&amp;gt;&amp;gt;&amp;gt; c
&lt;span class="m"&gt;15&lt;/span&gt;
&amp;gt;&amp;gt;&amp;gt; hot_links
&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;https://pymi.vn&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;http://www.familug.org&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;http://pp.pymi.vn&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Tất nhiên các Pymier chẳng ai dùng python chay cả, mà là ipython:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ipython -i get_data.py
Python &lt;span class="m"&gt;3&lt;/span&gt;.5.2 &lt;span class="o"&gt;(&lt;/span&gt;default, Nov &lt;span class="m"&gt;17&lt;/span&gt; &lt;span class="m"&gt;2016&lt;/span&gt;, &lt;span class="m"&gt;17&lt;/span&gt;:05:23&lt;span class="o"&gt;)&lt;/span&gt;
Type &lt;span class="s1"&gt;&amp;#39;copyright&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;credits&amp;#39;&lt;/span&gt; or &lt;span class="s1"&gt;&amp;#39;license&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; more information
IPython &lt;span class="m"&gt;6&lt;/span&gt;.2.1 -- An enhanced Interactive Python. Type &lt;span class="s1"&gt;&amp;#39;?&amp;#39;&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; help.
https://pymi.vn
http://www.familug.org
http://pp.pymi.vn

In &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;: hot_links
Out&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;: &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;https://pymi.vn&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;http://www.familug.org&amp;#39;&lt;/span&gt;, &lt;span class="s1"&gt;&amp;#39;http://pp.pymi.vn&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Một option đơn giản, nhưng vô cùng tiện lợi.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;-i     : inspect interactively after running script; forces a prompt even
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Hết.
HVN at https://pymi.vn and http://www.familug.org&lt;/p&gt;</content><category term="Trang chủ"></category><category term="python"></category><category term="tip"></category></entry><entry><title>Blog chung của các Pymier</title><link href="http://pp.pymi.vn/article/first/" rel="alternate"></link><published>2018-05-02T00:00:00+07:00</published><updated>2018-05-02T00:00:00+07:00</updated><author><name>hvnsweeting</name></author><id>tag:pp.pymi.vn,2018-05-02:/article/first/</id><summary type="html">&lt;p&gt;Bài viết đầu tiên&lt;/p&gt;</summary><content type="html">&lt;p&gt;Nơi các Pymier chia sẻ kiến thức cho nhau.
Để tạo một bài viết - hãy fork repo này và tạo một Pull Requests,
sau khi review xong bài viết sẽ được xuất bản.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Các bài viết về Python nên đặt trong Category &lt;code&gt;Python&lt;/code&gt;, và có tag &lt;code&gt;python&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Tên tác giả nên dùng GitHub username&lt;/li&gt;
&lt;li&gt;Bài viết sử dụng Markdown syntax&lt;/li&gt;
&lt;li&gt;Bài viết tuyển chọn sẽ được đưa vào category "Trang chủ"&lt;/li&gt;
&lt;/ul&gt;</content><category term="Trang chủ"></category><category term="memo"></category><category term="python"></category></entry></feed>